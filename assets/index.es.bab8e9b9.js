import{d as hb,c as yr,g as lb,b as fb,_ as db}from"./index.50f2c8db.js";import{r as pb,t as $r,e as jr,D as hu}from"./tslib.c6155f60.js";var lu={},Lo={},Me={},td={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(d,g){var w=d>>>16&65535,S=d&65535,N=g>>>16&65535,z=g&65535;return S*z+(w*z+S*N<<16>>>0)|0}n.mul=Math.imul||e;function r(d,g){return d+g|0}n.add=r;function s(d,g){return d-g|0}n.sub=s;function a(d,g){return d<<g|d>>>32-g}n.rotl=a;function l(d,g){return d<<32-g|d>>>g}n.rotr=l;function p(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d}n.isInteger=Number.isInteger||p,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(d){return n.isInteger(d)&&d>=-n.MAX_SAFE_INTEGER&&d<=n.MAX_SAFE_INTEGER}})(td);Object.defineProperty(Me,"__esModule",{value:!0});var rd=td;function gb(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Me.readInt16BE=gb;function yb(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Me.readUint16BE=yb;function vb(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Me.readInt16LE=vb;function _b(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Me.readUint16LE=_b;function id(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>8,e[r+1]=n>>>0,e}Me.writeUint16BE=id;Me.writeInt16BE=id;function nd(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e}Me.writeUint16LE=nd;Me.writeInt16LE=nd;function zc(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Me.readInt32BE=zc;function Hc(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Me.readUint32BE=Hc;function qc(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Me.readInt32LE=qc;function Kc(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Me.readUint32LE=Kc;function No(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>24,e[r+1]=n>>>16,e[r+2]=n>>>8,e[r+3]=n>>>0,e}Me.writeUint32BE=No;Me.writeInt32BE=No;function Ro(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e[r+2]=n>>>16,e[r+3]=n>>>24,e}Me.writeUint32LE=Ro;Me.writeInt32LE=Ro;function bb(n,e){e===void 0&&(e=0);var r=zc(n,e),s=zc(n,e+4);return r*4294967296+s-(s>>31)*4294967296}Me.readInt64BE=bb;function mb(n,e){e===void 0&&(e=0);var r=Hc(n,e),s=Hc(n,e+4);return r*4294967296+s}Me.readUint64BE=mb;function wb(n,e){e===void 0&&(e=0);var r=qc(n,e),s=qc(n,e+4);return s*4294967296+r-(r>>31)*4294967296}Me.readInt64LE=wb;function Eb(n,e){e===void 0&&(e=0);var r=Kc(n,e),s=Kc(n,e+4);return s*4294967296+r}Me.readUint64LE=Eb;function sd(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),No(n/4294967296>>>0,e,r),No(n>>>0,e,r+4),e}Me.writeUint64BE=sd;Me.writeInt64BE=sd;function od(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ro(n>>>0,e,r),Ro(n/4294967296>>>0,e,r+4),e}Me.writeUint64LE=od;Me.writeInt64LE=od;function Db(n,e,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,a=1,l=n/8+r-1;l>=r;l--)s+=e[l]*a,a*=256;return s}Me.readUintBE=Db;function Sb(n,e,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,a=1,l=r;l<r+n/8;l++)s+=e[l]*a,a*=256;return s}Me.readUintLE=Sb;function Ib(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!rd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var a=1,l=n/8+s-1;l>=s;l--)r[l]=e/a&255,a*=256;return r}Me.writeUintBE=Ib;function xb(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!rd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var a=1,l=s;l<s+n/8;l++)r[l]=e/a&255,a*=256;return r}Me.writeUintLE=xb;function Ob(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e)}Me.readFloat32BE=Ob;function Cb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e,!0)}Me.readFloat32LE=Cb;function Ab(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e)}Me.readFloat64BE=Ab;function Pb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e,!0)}Me.readFloat64LE=Pb;function Tb(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n),e}Me.writeFloat32BE=Tb;function Nb(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n,!0),e}Me.writeFloat32LE=Nb;function Rb(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n),e}Me.writeFloat64BE=Rb;function Fb(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n,!0),e}Me.writeFloat64LE=Fb;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});function Ub(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Ir.wipe=Ub;Object.defineProperty(Lo,"__esModule",{value:!0});var Qt=Me,kc=Ir,Mb=20;function Lb(n,e,r){for(var s=1634760805,a=857760878,l=2036477234,p=1797285236,d=r[3]<<24|r[2]<<16|r[1]<<8|r[0],g=r[7]<<24|r[6]<<16|r[5]<<8|r[4],w=r[11]<<24|r[10]<<16|r[9]<<8|r[8],S=r[15]<<24|r[14]<<16|r[13]<<8|r[12],N=r[19]<<24|r[18]<<16|r[17]<<8|r[16],z=r[23]<<24|r[22]<<16|r[21]<<8|r[20],R=r[27]<<24|r[26]<<16|r[25]<<8|r[24],P=r[31]<<24|r[30]<<16|r[29]<<8|r[28],G=e[3]<<24|e[2]<<16|e[1]<<8|e[0],q=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ie=e[11]<<24|e[10]<<16|e[9]<<8|e[8],T=e[15]<<24|e[14]<<16|e[13]<<8|e[12],M=s,E=a,x=l,O=p,u=d,_=g,Q=w,ne=S,ue=N,ge=z,ye=R,m=P,C=G,Z=q,J=ie,K=T,k=0;k<Mb;k+=2)M=M+u|0,C^=M,C=C>>>32-16|C<<16,ue=ue+C|0,u^=ue,u=u>>>32-12|u<<12,E=E+_|0,Z^=E,Z=Z>>>32-16|Z<<16,ge=ge+Z|0,_^=ge,_=_>>>32-12|_<<12,x=x+Q|0,J^=x,J=J>>>32-16|J<<16,ye=ye+J|0,Q^=ye,Q=Q>>>32-12|Q<<12,O=O+ne|0,K^=O,K=K>>>32-16|K<<16,m=m+K|0,ne^=m,ne=ne>>>32-12|ne<<12,x=x+Q|0,J^=x,J=J>>>32-8|J<<8,ye=ye+J|0,Q^=ye,Q=Q>>>32-7|Q<<7,O=O+ne|0,K^=O,K=K>>>32-8|K<<8,m=m+K|0,ne^=m,ne=ne>>>32-7|ne<<7,E=E+_|0,Z^=E,Z=Z>>>32-8|Z<<8,ge=ge+Z|0,_^=ge,_=_>>>32-7|_<<7,M=M+u|0,C^=M,C=C>>>32-8|C<<8,ue=ue+C|0,u^=ue,u=u>>>32-7|u<<7,M=M+_|0,K^=M,K=K>>>32-16|K<<16,ye=ye+K|0,_^=ye,_=_>>>32-12|_<<12,E=E+Q|0,C^=E,C=C>>>32-16|C<<16,m=m+C|0,Q^=m,Q=Q>>>32-12|Q<<12,x=x+ne|0,Z^=x,Z=Z>>>32-16|Z<<16,ue=ue+Z|0,ne^=ue,ne=ne>>>32-12|ne<<12,O=O+u|0,J^=O,J=J>>>32-16|J<<16,ge=ge+J|0,u^=ge,u=u>>>32-12|u<<12,x=x+ne|0,Z^=x,Z=Z>>>32-8|Z<<8,ue=ue+Z|0,ne^=ue,ne=ne>>>32-7|ne<<7,O=O+u|0,J^=O,J=J>>>32-8|J<<8,ge=ge+J|0,u^=ge,u=u>>>32-7|u<<7,E=E+Q|0,C^=E,C=C>>>32-8|C<<8,m=m+C|0,Q^=m,Q=Q>>>32-7|Q<<7,M=M+_|0,K^=M,K=K>>>32-8|K<<8,ye=ye+K|0,_^=ye,_=_>>>32-7|_<<7;Qt.writeUint32LE(M+s|0,n,0),Qt.writeUint32LE(E+a|0,n,4),Qt.writeUint32LE(x+l|0,n,8),Qt.writeUint32LE(O+p|0,n,12),Qt.writeUint32LE(u+d|0,n,16),Qt.writeUint32LE(_+g|0,n,20),Qt.writeUint32LE(Q+w|0,n,24),Qt.writeUint32LE(ne+S|0,n,28),Qt.writeUint32LE(ue+N|0,n,32),Qt.writeUint32LE(ge+z|0,n,36),Qt.writeUint32LE(ye+R|0,n,40),Qt.writeUint32LE(m+P|0,n,44),Qt.writeUint32LE(C+G|0,n,48),Qt.writeUint32LE(Z+q|0,n,52),Qt.writeUint32LE(J+ie|0,n,56),Qt.writeUint32LE(K+T|0,n,60)}function ad(n,e,r,s,a){if(a===void 0&&(a=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var l,p;if(a===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=new Uint8Array(16),p=l.length-e.length,l.set(e,p)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");l=e,p=a}for(var d=new Uint8Array(64),g=0;g<r.length;g+=64){Lb(d,l,n);for(var w=g;w<g+64&&w<r.length;w++)s[w]=r[w]^d[w-g];jb(l,0,p)}return kc.wipe(d),a===0&&kc.wipe(l),s}Lo.streamXOR=ad;function $b(n,e,r,s){return s===void 0&&(s=0),kc.wipe(r),ad(n,e,r,r,s)}Lo.stream=$b;function jb(n,e,r){for(var s=1;r--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var cd={},Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});function Bb(n,e,r){return~(n-1)&e|n-1&r}Ri.select=Bb;function zb(n,e){return(n|0)-(e|0)-1>>>31&1}Ri.lessOrEqual=zb;function ud(n,e){if(n.length!==e.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^e[s];return 1&r-1>>>8}Ri.compare=ud;function Hb(n,e){return n.length===0||e.length===0?!1:ud(n,e)!==0}Ri.equal=Hb;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ri,r=Ir;n.DIGEST_LENGTH=16;var s=function(){function p(d){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=d[0]|d[1]<<8;this._r[0]=g&8191;var w=d[2]|d[3]<<8;this._r[1]=(g>>>13|w<<3)&8191;var S=d[4]|d[5]<<8;this._r[2]=(w>>>10|S<<6)&7939;var N=d[6]|d[7]<<8;this._r[3]=(S>>>7|N<<9)&8191;var z=d[8]|d[9]<<8;this._r[4]=(N>>>4|z<<12)&255,this._r[5]=z>>>1&8190;var R=d[10]|d[11]<<8;this._r[6]=(z>>>14|R<<2)&8191;var P=d[12]|d[13]<<8;this._r[7]=(R>>>11|P<<5)&8065;var G=d[14]|d[15]<<8;this._r[8]=(P>>>8|G<<8)&8191,this._r[9]=G>>>5&127,this._pad[0]=d[16]|d[17]<<8,this._pad[1]=d[18]|d[19]<<8,this._pad[2]=d[20]|d[21]<<8,this._pad[3]=d[22]|d[23]<<8,this._pad[4]=d[24]|d[25]<<8,this._pad[5]=d[26]|d[27]<<8,this._pad[6]=d[28]|d[29]<<8,this._pad[7]=d[30]|d[31]<<8}return p.prototype._blocks=function(d,g,w){for(var S=this._fin?0:2048,N=this._h[0],z=this._h[1],R=this._h[2],P=this._h[3],G=this._h[4],q=this._h[5],ie=this._h[6],T=this._h[7],M=this._h[8],E=this._h[9],x=this._r[0],O=this._r[1],u=this._r[2],_=this._r[3],Q=this._r[4],ne=this._r[5],ue=this._r[6],ge=this._r[7],ye=this._r[8],m=this._r[9];w>=16;){var C=d[g+0]|d[g+1]<<8;N+=C&8191;var Z=d[g+2]|d[g+3]<<8;z+=(C>>>13|Z<<3)&8191;var J=d[g+4]|d[g+5]<<8;R+=(Z>>>10|J<<6)&8191;var K=d[g+6]|d[g+7]<<8;P+=(J>>>7|K<<9)&8191;var k=d[g+8]|d[g+9]<<8;G+=(K>>>4|k<<12)&8191,q+=k>>>1&8191;var ee=d[g+10]|d[g+11]<<8;ie+=(k>>>14|ee<<2)&8191;var re=d[g+12]|d[g+13]<<8;T+=(ee>>>11|re<<5)&8191;var De=d[g+14]|d[g+15]<<8;M+=(re>>>8|De<<8)&8191,E+=De>>>5|S;var oe=0,Se=oe;Se+=N*x,Se+=z*(5*m),Se+=R*(5*ye),Se+=P*(5*ge),Se+=G*(5*ue),oe=Se>>>13,Se&=8191,Se+=q*(5*ne),Se+=ie*(5*Q),Se+=T*(5*_),Se+=M*(5*u),Se+=E*(5*O),oe+=Se>>>13,Se&=8191;var le=oe;le+=N*O,le+=z*x,le+=R*(5*m),le+=P*(5*ye),le+=G*(5*ge),oe=le>>>13,le&=8191,le+=q*(5*ue),le+=ie*(5*ne),le+=T*(5*Q),le+=M*(5*_),le+=E*(5*u),oe+=le>>>13,le&=8191;var Pe=oe;Pe+=N*u,Pe+=z*O,Pe+=R*x,Pe+=P*(5*m),Pe+=G*(5*ye),oe=Pe>>>13,Pe&=8191,Pe+=q*(5*ge),Pe+=ie*(5*ue),Pe+=T*(5*ne),Pe+=M*(5*Q),Pe+=E*(5*_),oe+=Pe>>>13,Pe&=8191;var B=oe;B+=N*_,B+=z*u,B+=R*O,B+=P*x,B+=G*(5*m),oe=B>>>13,B&=8191,B+=q*(5*ye),B+=ie*(5*ge),B+=T*(5*ue),B+=M*(5*ne),B+=E*(5*Q),oe+=B>>>13,B&=8191;var j=oe;j+=N*Q,j+=z*_,j+=R*u,j+=P*O,j+=G*x,oe=j>>>13,j&=8191,j+=q*(5*m),j+=ie*(5*ye),j+=T*(5*ge),j+=M*(5*ue),j+=E*(5*ne),oe+=j>>>13,j&=8191;var F=oe;F+=N*ne,F+=z*Q,F+=R*_,F+=P*u,F+=G*O,oe=F>>>13,F&=8191,F+=q*x,F+=ie*(5*m),F+=T*(5*ye),F+=M*(5*ge),F+=E*(5*ue),oe+=F>>>13,F&=8191;var h=oe;h+=N*ue,h+=z*ne,h+=R*Q,h+=P*_,h+=G*u,oe=h>>>13,h&=8191,h+=q*O,h+=ie*x,h+=T*(5*m),h+=M*(5*ye),h+=E*(5*ge),oe+=h>>>13,h&=8191;var I=oe;I+=N*ge,I+=z*ue,I+=R*ne,I+=P*Q,I+=G*_,oe=I>>>13,I&=8191,I+=q*u,I+=ie*O,I+=T*x,I+=M*(5*m),I+=E*(5*ye),oe+=I>>>13,I&=8191;var se=oe;se+=N*ye,se+=z*ge,se+=R*ue,se+=P*ne,se+=G*Q,oe=se>>>13,se&=8191,se+=q*_,se+=ie*u,se+=T*O,se+=M*x,se+=E*(5*m),oe+=se>>>13,se&=8191;var he=oe;he+=N*m,he+=z*ye,he+=R*ge,he+=P*ue,he+=G*ne,oe=he>>>13,he&=8191,he+=q*Q,he+=ie*_,he+=T*u,he+=M*O,he+=E*x,oe+=he>>>13,he&=8191,oe=(oe<<2)+oe|0,oe=oe+Se|0,Se=oe&8191,oe=oe>>>13,le+=oe,N=Se,z=le,R=Pe,P=B,G=j,q=F,ie=h,T=I,M=se,E=he,g+=16,w-=16}this._h[0]=N,this._h[1]=z,this._h[2]=R,this._h[3]=P,this._h[4]=G,this._h[5]=q,this._h[6]=ie,this._h[7]=T,this._h[8]=M,this._h[9]=E},p.prototype.finish=function(d,g){g===void 0&&(g=0);var w=new Uint16Array(10),S,N,z,R;if(this._leftover){for(R=this._leftover,this._buffer[R++]=1;R<16;R++)this._buffer[R]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(S=this._h[1]>>>13,this._h[1]&=8191,R=2;R<10;R++)this._h[R]+=S,S=this._h[R]>>>13,this._h[R]&=8191;for(this._h[0]+=S*5,S=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=S,S=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=S,w[0]=this._h[0]+5,S=w[0]>>>13,w[0]&=8191,R=1;R<10;R++)w[R]=this._h[R]+S,S=w[R]>>>13,w[R]&=8191;for(w[9]-=1<<13,N=(S^1)-1,R=0;R<10;R++)w[R]&=N;for(N=~N,R=0;R<10;R++)this._h[R]=this._h[R]&N|w[R];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,z=this._h[0]+this._pad[0],this._h[0]=z&65535,R=1;R<8;R++)z=(this._h[R]+this._pad[R]|0)+(z>>>16)|0,this._h[R]=z&65535;return d[g+0]=this._h[0]>>>0,d[g+1]=this._h[0]>>>8,d[g+2]=this._h[1]>>>0,d[g+3]=this._h[1]>>>8,d[g+4]=this._h[2]>>>0,d[g+5]=this._h[2]>>>8,d[g+6]=this._h[3]>>>0,d[g+7]=this._h[3]>>>8,d[g+8]=this._h[4]>>>0,d[g+9]=this._h[4]>>>8,d[g+10]=this._h[5]>>>0,d[g+11]=this._h[5]>>>8,d[g+12]=this._h[6]>>>0,d[g+13]=this._h[6]>>>8,d[g+14]=this._h[7]>>>0,d[g+15]=this._h[7]>>>8,this._finished=!0,this},p.prototype.update=function(d){var g=0,w=d.length,S;if(this._leftover){S=16-this._leftover,S>w&&(S=w);for(var N=0;N<S;N++)this._buffer[this._leftover+N]=d[g+N];if(w-=S,g+=S,this._leftover+=S,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(w>=16&&(S=w-w%16,this._blocks(d,g,S),g+=S,w-=S),w){for(var N=0;N<w;N++)this._buffer[this._leftover+N]=d[g+N];this._leftover+=w}return this},p.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var d=new Uint8Array(16);return this.finish(d),d},p.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},p}();n.Poly1305=s;function a(p,d){var g=new s(p);g.update(d);var w=g.digest();return g.clean(),w}n.oneTimeAuth=a;function l(p,d){return p.length!==n.DIGEST_LENGTH||d.length!==n.DIGEST_LENGTH?!1:e.equal(p,d)}n.equal=l})(cd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Lo,r=cd,s=Ir,a=Me,l=Ri;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var p=new Uint8Array(16),d=function(){function g(w){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,w.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(w)}return g.prototype.seal=function(w,S,N,z){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var R=new Uint8Array(16);R.set(w,R.length-w.length);var P=new Uint8Array(32);e.stream(this._key,R,P,4);var G=S.length+this.tagLength,q;if(z){if(z.length!==G)throw new Error("ChaCha20Poly1305: incorrect destination length");q=z}else q=new Uint8Array(G);return e.streamXOR(this._key,R,S,q,4),this._authenticate(q.subarray(q.length-this.tagLength,q.length),P,q.subarray(0,q.length-this.tagLength),N),s.wipe(R),q},g.prototype.open=function(w,S,N,z){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(S.length<this.tagLength)return null;var R=new Uint8Array(16);R.set(w,R.length-w.length);var P=new Uint8Array(32);e.stream(this._key,R,P,4);var G=new Uint8Array(this.tagLength);if(this._authenticate(G,P,S.subarray(0,S.length-this.tagLength),N),!l.equal(G,S.subarray(S.length-this.tagLength,S.length)))return null;var q=S.length-this.tagLength,ie;if(z){if(z.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");ie=z}else ie=new Uint8Array(q);return e.streamXOR(this._key,R,S.subarray(0,S.length-this.tagLength),ie,4),s.wipe(R),ie},g.prototype.clean=function(){return s.wipe(this._key),this},g.prototype._authenticate=function(w,S,N,z){var R=new r.Poly1305(S);z&&(R.update(z),z.length%16>0&&R.update(p.subarray(z.length%16))),R.update(N),N.length%16>0&&R.update(p.subarray(N.length%16));var P=new Uint8Array(8);z&&a.writeUint64LE(z.length,P),R.update(P),a.writeUint64LE(N.length,P),R.update(P);for(var G=R.digest(),q=0;q<G.length;q++)w[q]=G[q];R.clean(),s.wipe(G),s.wipe(P)},g}();n.ChaCha20Poly1305=d})(lu);var hd={},fs={},fu={};Object.defineProperty(fu,"__esModule",{value:!0});function qb(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}fu.isSerializableHash=qb;Object.defineProperty(fs,"__esModule",{value:!0});var Qr=fu,Kb=Ri,kb=Ir,ld=function(){function n(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var a=0;a<s.length;a++)s[a]^=54;this._inner.update(s);for(var a=0;a<s.length;a++)s[a]^=106;this._outer.update(s),Qr.isSerializableHash(this._inner)&&Qr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),kb.wipe(s)}return n.prototype.reset=function(){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Qr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Qr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!Qr.isSerializableHash(this._inner)||!Qr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!Qr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();fs.HMAC=ld;function Vb(n,e,r){var s=new ld(n,e);s.update(r);var a=s.digest();return s.clean(),a}fs.hmac=Vb;fs.equal=Kb.equal;Object.defineProperty(hd,"__esModule",{value:!0});var jl=fs,Bl=Ir,Gb=function(){function n(e,r,s,a){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var l=jl.hmac(this._hash,s,r);this._hmac=new jl.HMAC(e,l),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var r=new Uint8Array(e),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),Bl.wipe(this._buffer),Bl.wipe(this._counter),this._bufpos=0},n}(),Wb=hd.HKDF=Gb,Rn={},$o={},jo={};Object.defineProperty(jo,"__esModule",{value:!0});jo.BrowserRandomSource=void 0;const zl=65536;class Yb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let s=0;s<r.length;s+=zl)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,zl)));return r}}jo.BrowserRandomSource=Yb;var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.NodeRandomSource=void 0;const Jb=Ir;class Xb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof hb<"u"){const e=pb;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let a=0;a<s.length;a++)s[a]=r[a];return(0,Jb.wipe)(r),s}}Bo.NodeRandomSource=Xb;Object.defineProperty($o,"__esModule",{value:!0});$o.SystemRandomSource=void 0;const Zb=jo,Qb=Bo;class em{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Zb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Qb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}$o.SystemRandomSource=em;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=$o,r=Me,s=Ir;n.defaultRandomSource=new e.SystemRandomSource;function a(w,S=n.defaultRandomSource){return S.randomBytes(w)}n.randomBytes=a;function l(w=n.defaultRandomSource){const S=a(4,w),N=(0,r.readUint32LE)(S);return(0,s.wipe)(S),N}n.randomUint32=l;const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(w,S=p,N=n.defaultRandomSource){if(S.length<2)throw new Error("randomString charset is too short");if(S.length>256)throw new Error("randomString charset is too long");let z="";const R=S.length,P=256-256%R;for(;w>0;){const G=a(Math.ceil(w*256/P),N);for(let q=0;q<G.length&&w>0;q++){const ie=G[q];ie<P&&(z+=S.charAt(ie%R),w--)}(0,s.wipe)(G)}return z}n.randomString=d;function g(w,S=p,N=n.defaultRandomSource){const z=Math.ceil(w/(Math.log(S.length)/Math.LN2));return d(z,S,N)}n.randomStringForEntropy=g})(Rn);var zo={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Me,r=Ir;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function d(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},d.prototype.update=function(g,w){if(w===void 0&&(w=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var S=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&w>0;)this._buffer[this._bufferLength++]=g[S++],w--;this._bufferLength===this.blockSize&&(l(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(S=l(this._temp,this._state,g,S,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=g[S++],w--;return this},d.prototype.finish=function(g){if(!this._finished){var w=this._bytesHashed,S=this._bufferLength,N=w/536870912|0,z=w<<3,R=w%64<56?64:128;this._buffer[S]=128;for(var P=S+1;P<R-8;P++)this._buffer[P]=0;e.writeUint32BE(N,this._buffer,R-8),e.writeUint32BE(z,this._buffer,R-4),l(this._temp,this._state,this._buffer,0,R),this._finished=!0}for(var P=0;P<this.digestLength/4;P++)e.writeUint32BE(this._state[P],g,P*4);return this},d.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(g){r.wipe(g.state),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},d}();n.SHA256=s;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function l(d,g,w,S,N){for(;N>=64;){for(var z=g[0],R=g[1],P=g[2],G=g[3],q=g[4],ie=g[5],T=g[6],M=g[7],E=0;E<16;E++){var x=S+E*4;d[E]=e.readUint32BE(w,x)}for(var E=16;E<64;E++){var O=d[E-2],u=(O>>>17|O<<32-17)^(O>>>19|O<<32-19)^O>>>10;O=d[E-15];var _=(O>>>7|O<<32-7)^(O>>>18|O<<32-18)^O>>>3;d[E]=(u+d[E-7]|0)+(_+d[E-16]|0)}for(var E=0;E<64;E++){var u=(((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(q&ie^~q&T)|0)+(M+(a[E]+d[E]|0)|0)|0,_=((z>>>2|z<<32-2)^(z>>>13|z<<32-13)^(z>>>22|z<<32-22))+(z&R^z&P^R&P)|0;M=T,T=ie,ie=q,q=G+u|0,G=P,P=R,R=z,z=u+_|0}g[0]+=z,g[1]+=R,g[2]+=P,g[3]+=G,g[4]+=q,g[5]+=ie,g[6]+=T,g[7]+=M,S+=64,N-=64}return S}function p(d){var g=new s;g.update(d);var w=g.digest();return g.clean(),w}n.hash=p})(zo);var du={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Rn,r=Ir;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(E){const x=new Float64Array(16);if(E)for(let O=0;O<E.length;O++)x[O]=E[O];return x}const a=new Uint8Array(32);a[0]=9;const l=s([56129,1]);function p(E){let x=1;for(let O=0;O<16;O++){let u=E[O]+x+65535;x=Math.floor(u/65536),E[O]=u-x*65536}E[0]+=x-1+37*(x-1)}function d(E,x,O){const u=~(O-1);for(let _=0;_<16;_++){const Q=u&(E[_]^x[_]);E[_]^=Q,x[_]^=Q}}function g(E,x){const O=s(),u=s();for(let _=0;_<16;_++)u[_]=x[_];p(u),p(u),p(u);for(let _=0;_<2;_++){O[0]=u[0]-65517;for(let ne=1;ne<15;ne++)O[ne]=u[ne]-65535-(O[ne-1]>>16&1),O[ne-1]&=65535;O[15]=u[15]-32767-(O[14]>>16&1);const Q=O[15]>>16&1;O[14]&=65535,d(u,O,1-Q)}for(let _=0;_<16;_++)E[2*_]=u[_]&255,E[2*_+1]=u[_]>>8}function w(E,x){for(let O=0;O<16;O++)E[O]=x[2*O]+(x[2*O+1]<<8);E[15]&=32767}function S(E,x,O){for(let u=0;u<16;u++)E[u]=x[u]+O[u]}function N(E,x,O){for(let u=0;u<16;u++)E[u]=x[u]-O[u]}function z(E,x,O){let u,_,Q=0,ne=0,ue=0,ge=0,ye=0,m=0,C=0,Z=0,J=0,K=0,k=0,ee=0,re=0,De=0,oe=0,Se=0,le=0,Pe=0,B=0,j=0,F=0,h=0,I=0,se=0,he=0,Ee=0,He=0,ke=0,Le=0,pt=0,gt=0,je=O[0],Ie=O[1],Re=O[2],Fe=O[3],Be=O[4],Oe=O[5],Ue=O[6],we=O[7],Ce=O[8],qe=O[9],xe=O[10],Ve=O[11],We=O[12],et=O[13],tt=O[14],Je=O[15];u=x[0],Q+=u*je,ne+=u*Ie,ue+=u*Re,ge+=u*Fe,ye+=u*Be,m+=u*Oe,C+=u*Ue,Z+=u*we,J+=u*Ce,K+=u*qe,k+=u*xe,ee+=u*Ve,re+=u*We,De+=u*et,oe+=u*tt,Se+=u*Je,u=x[1],ne+=u*je,ue+=u*Ie,ge+=u*Re,ye+=u*Fe,m+=u*Be,C+=u*Oe,Z+=u*Ue,J+=u*we,K+=u*Ce,k+=u*qe,ee+=u*xe,re+=u*Ve,De+=u*We,oe+=u*et,Se+=u*tt,le+=u*Je,u=x[2],ue+=u*je,ge+=u*Ie,ye+=u*Re,m+=u*Fe,C+=u*Be,Z+=u*Oe,J+=u*Ue,K+=u*we,k+=u*Ce,ee+=u*qe,re+=u*xe,De+=u*Ve,oe+=u*We,Se+=u*et,le+=u*tt,Pe+=u*Je,u=x[3],ge+=u*je,ye+=u*Ie,m+=u*Re,C+=u*Fe,Z+=u*Be,J+=u*Oe,K+=u*Ue,k+=u*we,ee+=u*Ce,re+=u*qe,De+=u*xe,oe+=u*Ve,Se+=u*We,le+=u*et,Pe+=u*tt,B+=u*Je,u=x[4],ye+=u*je,m+=u*Ie,C+=u*Re,Z+=u*Fe,J+=u*Be,K+=u*Oe,k+=u*Ue,ee+=u*we,re+=u*Ce,De+=u*qe,oe+=u*xe,Se+=u*Ve,le+=u*We,Pe+=u*et,B+=u*tt,j+=u*Je,u=x[5],m+=u*je,C+=u*Ie,Z+=u*Re,J+=u*Fe,K+=u*Be,k+=u*Oe,ee+=u*Ue,re+=u*we,De+=u*Ce,oe+=u*qe,Se+=u*xe,le+=u*Ve,Pe+=u*We,B+=u*et,j+=u*tt,F+=u*Je,u=x[6],C+=u*je,Z+=u*Ie,J+=u*Re,K+=u*Fe,k+=u*Be,ee+=u*Oe,re+=u*Ue,De+=u*we,oe+=u*Ce,Se+=u*qe,le+=u*xe,Pe+=u*Ve,B+=u*We,j+=u*et,F+=u*tt,h+=u*Je,u=x[7],Z+=u*je,J+=u*Ie,K+=u*Re,k+=u*Fe,ee+=u*Be,re+=u*Oe,De+=u*Ue,oe+=u*we,Se+=u*Ce,le+=u*qe,Pe+=u*xe,B+=u*Ve,j+=u*We,F+=u*et,h+=u*tt,I+=u*Je,u=x[8],J+=u*je,K+=u*Ie,k+=u*Re,ee+=u*Fe,re+=u*Be,De+=u*Oe,oe+=u*Ue,Se+=u*we,le+=u*Ce,Pe+=u*qe,B+=u*xe,j+=u*Ve,F+=u*We,h+=u*et,I+=u*tt,se+=u*Je,u=x[9],K+=u*je,k+=u*Ie,ee+=u*Re,re+=u*Fe,De+=u*Be,oe+=u*Oe,Se+=u*Ue,le+=u*we,Pe+=u*Ce,B+=u*qe,j+=u*xe,F+=u*Ve,h+=u*We,I+=u*et,se+=u*tt,he+=u*Je,u=x[10],k+=u*je,ee+=u*Ie,re+=u*Re,De+=u*Fe,oe+=u*Be,Se+=u*Oe,le+=u*Ue,Pe+=u*we,B+=u*Ce,j+=u*qe,F+=u*xe,h+=u*Ve,I+=u*We,se+=u*et,he+=u*tt,Ee+=u*Je,u=x[11],ee+=u*je,re+=u*Ie,De+=u*Re,oe+=u*Fe,Se+=u*Be,le+=u*Oe,Pe+=u*Ue,B+=u*we,j+=u*Ce,F+=u*qe,h+=u*xe,I+=u*Ve,se+=u*We,he+=u*et,Ee+=u*tt,He+=u*Je,u=x[12],re+=u*je,De+=u*Ie,oe+=u*Re,Se+=u*Fe,le+=u*Be,Pe+=u*Oe,B+=u*Ue,j+=u*we,F+=u*Ce,h+=u*qe,I+=u*xe,se+=u*Ve,he+=u*We,Ee+=u*et,He+=u*tt,ke+=u*Je,u=x[13],De+=u*je,oe+=u*Ie,Se+=u*Re,le+=u*Fe,Pe+=u*Be,B+=u*Oe,j+=u*Ue,F+=u*we,h+=u*Ce,I+=u*qe,se+=u*xe,he+=u*Ve,Ee+=u*We,He+=u*et,ke+=u*tt,Le+=u*Je,u=x[14],oe+=u*je,Se+=u*Ie,le+=u*Re,Pe+=u*Fe,B+=u*Be,j+=u*Oe,F+=u*Ue,h+=u*we,I+=u*Ce,se+=u*qe,he+=u*xe,Ee+=u*Ve,He+=u*We,ke+=u*et,Le+=u*tt,pt+=u*Je,u=x[15],Se+=u*je,le+=u*Ie,Pe+=u*Re,B+=u*Fe,j+=u*Be,F+=u*Oe,h+=u*Ue,I+=u*we,se+=u*Ce,he+=u*qe,Ee+=u*xe,He+=u*Ve,ke+=u*We,Le+=u*et,pt+=u*tt,gt+=u*Je,Q+=38*le,ne+=38*Pe,ue+=38*B,ge+=38*j,ye+=38*F,m+=38*h,C+=38*I,Z+=38*se,J+=38*he,K+=38*Ee,k+=38*He,ee+=38*ke,re+=38*Le,De+=38*pt,oe+=38*gt,_=1,u=Q+_+65535,_=Math.floor(u/65536),Q=u-_*65536,u=ne+_+65535,_=Math.floor(u/65536),ne=u-_*65536,u=ue+_+65535,_=Math.floor(u/65536),ue=u-_*65536,u=ge+_+65535,_=Math.floor(u/65536),ge=u-_*65536,u=ye+_+65535,_=Math.floor(u/65536),ye=u-_*65536,u=m+_+65535,_=Math.floor(u/65536),m=u-_*65536,u=C+_+65535,_=Math.floor(u/65536),C=u-_*65536,u=Z+_+65535,_=Math.floor(u/65536),Z=u-_*65536,u=J+_+65535,_=Math.floor(u/65536),J=u-_*65536,u=K+_+65535,_=Math.floor(u/65536),K=u-_*65536,u=k+_+65535,_=Math.floor(u/65536),k=u-_*65536,u=ee+_+65535,_=Math.floor(u/65536),ee=u-_*65536,u=re+_+65535,_=Math.floor(u/65536),re=u-_*65536,u=De+_+65535,_=Math.floor(u/65536),De=u-_*65536,u=oe+_+65535,_=Math.floor(u/65536),oe=u-_*65536,u=Se+_+65535,_=Math.floor(u/65536),Se=u-_*65536,Q+=_-1+37*(_-1),_=1,u=Q+_+65535,_=Math.floor(u/65536),Q=u-_*65536,u=ne+_+65535,_=Math.floor(u/65536),ne=u-_*65536,u=ue+_+65535,_=Math.floor(u/65536),ue=u-_*65536,u=ge+_+65535,_=Math.floor(u/65536),ge=u-_*65536,u=ye+_+65535,_=Math.floor(u/65536),ye=u-_*65536,u=m+_+65535,_=Math.floor(u/65536),m=u-_*65536,u=C+_+65535,_=Math.floor(u/65536),C=u-_*65536,u=Z+_+65535,_=Math.floor(u/65536),Z=u-_*65536,u=J+_+65535,_=Math.floor(u/65536),J=u-_*65536,u=K+_+65535,_=Math.floor(u/65536),K=u-_*65536,u=k+_+65535,_=Math.floor(u/65536),k=u-_*65536,u=ee+_+65535,_=Math.floor(u/65536),ee=u-_*65536,u=re+_+65535,_=Math.floor(u/65536),re=u-_*65536,u=De+_+65535,_=Math.floor(u/65536),De=u-_*65536,u=oe+_+65535,_=Math.floor(u/65536),oe=u-_*65536,u=Se+_+65535,_=Math.floor(u/65536),Se=u-_*65536,Q+=_-1+37*(_-1),E[0]=Q,E[1]=ne,E[2]=ue,E[3]=ge,E[4]=ye,E[5]=m,E[6]=C,E[7]=Z,E[8]=J,E[9]=K,E[10]=k,E[11]=ee,E[12]=re,E[13]=De,E[14]=oe,E[15]=Se}function R(E,x){z(E,x,x)}function P(E,x){const O=s();for(let u=0;u<16;u++)O[u]=x[u];for(let u=253;u>=0;u--)R(O,O),u!==2&&u!==4&&z(O,O,x);for(let u=0;u<16;u++)E[u]=O[u]}function G(E,x){const O=new Uint8Array(32),u=new Float64Array(80),_=s(),Q=s(),ne=s(),ue=s(),ge=s(),ye=s();for(let J=0;J<31;J++)O[J]=E[J];O[31]=E[31]&127|64,O[0]&=248,w(u,x);for(let J=0;J<16;J++)Q[J]=u[J];_[0]=ue[0]=1;for(let J=254;J>=0;--J){const K=O[J>>>3]>>>(J&7)&1;d(_,Q,K),d(ne,ue,K),S(ge,_,ne),N(_,_,ne),S(ne,Q,ue),N(Q,Q,ue),R(ue,ge),R(ye,_),z(_,ne,_),z(ne,Q,ge),S(ge,_,ne),N(_,_,ne),R(Q,_),N(ne,ue,ye),z(_,ne,l),S(_,_,ue),z(ne,ne,_),z(_,ue,ye),z(ue,Q,u),R(Q,ge),d(_,Q,K),d(ne,ue,K)}for(let J=0;J<16;J++)u[J+16]=_[J],u[J+32]=ne[J],u[J+48]=Q[J],u[J+64]=ue[J];const m=u.subarray(32),C=u.subarray(16);P(m,m),z(C,C,m);const Z=new Uint8Array(32);return g(Z,C),Z}n.scalarMult=G;function q(E){return G(E,a)}n.scalarMultBase=q;function ie(E){if(E.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(E);return{publicKey:q(x),secretKey:x}}n.generateKeyPairFromSeed=ie;function T(E){const x=(0,e.randomBytes)(32,E),O=ie(x);return(0,r.wipe)(x),O}n.generateKeyPair=T;function M(E,x,O=!1){if(E.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=G(E,x);if(O){let _=0;for(let Q=0;Q<u.length;Q++)_|=u[Q];if(_===0)throw new Error("X25519: invalid shared key")}return u}n.sharedKey=M})(du);function pu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function fd(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?pu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Vc(n,e){e||(e=n.reduce((a,l)=>a+l.length,0));const r=fd(e);let s=0;for(const a of n)r.set(a,s),s+=a.length;return pu(r)}function tm(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var l=n.charAt(a),p=l.charCodeAt(0);if(r[p]!==255)throw new TypeError(l+" is ambiguous");r[p]=a}var d=n.length,g=n.charAt(0),w=Math.log(d)/Math.log(256),S=Math.log(256)/Math.log(d);function N(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var G=0,q=0,ie=0,T=P.length;ie!==T&&P[ie]===0;)ie++,G++;for(var M=(T-ie)*S+1>>>0,E=new Uint8Array(M);ie!==T;){for(var x=P[ie],O=0,u=M-1;(x!==0||O<q)&&u!==-1;u--,O++)x+=256*E[u]>>>0,E[u]=x%d>>>0,x=x/d>>>0;if(x!==0)throw new Error("Non-zero carry");q=O,ie++}for(var _=M-q;_!==M&&E[_]===0;)_++;for(var Q=g.repeat(G);_<M;++_)Q+=n.charAt(E[_]);return Q}function z(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var G=0;if(P[G]!==" "){for(var q=0,ie=0;P[G]===g;)q++,G++;for(var T=(P.length-G)*w+1>>>0,M=new Uint8Array(T);P[G];){var E=r[P.charCodeAt(G)];if(E===255)return;for(var x=0,O=T-1;(E!==0||x<ie)&&O!==-1;O--,x++)E+=d*M[O]>>>0,M[O]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");ie=x,G++}if(P[G]!==" "){for(var u=T-ie;u!==T&&M[u]===0;)u++;for(var _=new Uint8Array(q+(T-u)),Q=q;u!==T;)_[Q++]=M[u++];return _}}}function R(P){var G=z(P);if(G)return G;throw new Error(`Non-${e} character`)}return{encode:N,decodeUnsafe:z,decode:R}}var rm=tm,im=rm;const dd=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},nm=n=>new TextEncoder().encode(n),sm=n=>new TextDecoder().decode(n);class om{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class am{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pd(this,e)}}class cm{constructor(e){this.decoders=e}or(e){return pd(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pd=(n,e)=>new cm({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class um{constructor(e,r,s,a){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new om(e,r,s),this.decoder=new am(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ho=({name:n,prefix:e,encode:r,decode:s})=>new um(n,e,r,s),ds=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:a}=im(r,e);return Ho({prefix:n,name:e,encode:s,decode:l=>dd(a(l))})},hm=(n,e,r,s)=>{const a={};for(let S=0;S<e.length;++S)a[e[S]]=S;let l=n.length;for(;n[l-1]==="=";)--l;const p=new Uint8Array(l*r/8|0);let d=0,g=0,w=0;for(let S=0;S<l;++S){const N=a[n[S]];if(N===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<r|N,d+=r,d>=8&&(d-=8,p[w++]=255&g>>d)}if(d>=r||255&g<<8-d)throw new SyntaxError("Unexpected end of data");return p},lm=(n,e,r)=>{const s=e[e.length-1]==="=",a=(1<<r)-1;let l="",p=0,d=0;for(let g=0;g<n.length;++g)for(d=d<<8|n[g],p+=8;p>r;)p-=r,l+=e[a&d>>p];if(p&&(l+=e[a&d<<r-p]),s)for(;l.length*r&7;)l+="=";return l},Yt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>Ho({prefix:e,name:n,encode(a){return lm(a,s,r)},decode(a){return hm(a,s,r,n)}}),fm=Ho({prefix:"\0",name:"identity",encode:n=>sm(n),decode:n=>nm(n)});var dm=Object.freeze(Object.defineProperty({__proto__:null,identity:fm},Symbol.toStringTag,{value:"Module"}));const pm=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var gm=Object.freeze(Object.defineProperty({__proto__:null,base2:pm},Symbol.toStringTag,{value:"Module"}));const ym=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var vm=Object.freeze(Object.defineProperty({__proto__:null,base8:ym},Symbol.toStringTag,{value:"Module"}));const _m=ds({prefix:"9",name:"base10",alphabet:"0123456789"});var bm=Object.freeze(Object.defineProperty({__proto__:null,base10:_m},Symbol.toStringTag,{value:"Module"}));const mm=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wm=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Em=Object.freeze(Object.defineProperty({__proto__:null,base16:mm,base16upper:wm},Symbol.toStringTag,{value:"Module"}));const Dm=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Sm=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Im=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xm=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Om=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Cm=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Am=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pm=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tm=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Nm=Object.freeze(Object.defineProperty({__proto__:null,base32:Dm,base32upper:Sm,base32pad:Im,base32padupper:xm,base32hex:Om,base32hexupper:Cm,base32hexpad:Am,base32hexpadupper:Pm,base32z:Tm},Symbol.toStringTag,{value:"Module"}));const Rm=ds({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fm=ds({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Um=Object.freeze(Object.defineProperty({__proto__:null,base36:Rm,base36upper:Fm},Symbol.toStringTag,{value:"Module"}));const Mm=ds({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lm=ds({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $m=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Mm,base58flickr:Lm},Symbol.toStringTag,{value:"Module"}));const jm=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Bm=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zm=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Hm=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var qm=Object.freeze(Object.defineProperty({__proto__:null,base64:jm,base64pad:Bm,base64url:zm,base64urlpad:Hm},Symbol.toStringTag,{value:"Module"}));const gd=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Km=gd.reduce((n,e,r)=>(n[r]=e,n),[]),km=gd.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function Vm(n){return n.reduce((e,r)=>(e+=Km[r],e),"")}function Gm(n){const e=[];for(const r of n){const s=km[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const Wm=Ho({prefix:"\u{1F680}",name:"base256emoji",encode:Vm,decode:Gm});var Ym=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Wm},Symbol.toStringTag,{value:"Module"})),Jm=yd,Hl=128,Xm=127,Zm=~Xm,Qm=Math.pow(2,31);function yd(n,e,r){e=e||[],r=r||0;for(var s=r;n>=Qm;)e[r++]=n&255|Hl,n/=128;for(;n&Zm;)e[r++]=n&255|Hl,n>>>=7;return e[r]=n|0,yd.bytes=r-s+1,e}var ew=Gc,tw=128,ql=127;function Gc(n,s){var r=0,s=s||0,a=0,l=s,p,d=n.length;do{if(l>=d)throw Gc.bytes=0,new RangeError("Could not decode varint");p=n[l++],r+=a<28?(p&ql)<<a:(p&ql)*Math.pow(2,a),a+=7}while(p>=tw);return Gc.bytes=l-s,r}var rw=Math.pow(2,7),iw=Math.pow(2,14),nw=Math.pow(2,21),sw=Math.pow(2,28),ow=Math.pow(2,35),aw=Math.pow(2,42),cw=Math.pow(2,49),uw=Math.pow(2,56),hw=Math.pow(2,63),lw=function(n){return n<rw?1:n<iw?2:n<nw?3:n<sw?4:n<ow?5:n<aw?6:n<cw?7:n<uw?8:n<hw?9:10},fw={encode:Jm,decode:ew,encodingLength:lw},vd=fw;const Kl=(n,e,r=0)=>(vd.encode(n,e,r),e),kl=n=>vd.encodingLength(n),Wc=(n,e)=>{const r=e.byteLength,s=kl(n),a=s+kl(r),l=new Uint8Array(a+r);return Kl(n,l,0),Kl(r,l,s),l.set(e,a),new dw(n,r,e,l)};class dw{constructor(e,r,s,a){this.code=e,this.size=r,this.digest=s,this.bytes=a}}const _d=({name:n,code:e,encode:r})=>new pw(n,e,r);class pw{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Wc(this.code,r):r.then(s=>Wc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const bd=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),gw=_d({name:"sha2-256",code:18,encode:bd("SHA-256")}),yw=_d({name:"sha2-512",code:19,encode:bd("SHA-512")});var vw=Object.freeze(Object.defineProperty({__proto__:null,sha256:gw,sha512:yw},Symbol.toStringTag,{value:"Module"}));const md=0,_w="identity",wd=dd,bw=n=>Wc(md,wd(n)),mw={code:md,name:_w,encode:wd,digest:bw};var ww=Object.freeze(Object.defineProperty({__proto__:null,identity:mw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Vl={...dm,...gm,...vm,...bm,...Em,...Nm,...Um,...$m,...qm,...Ym};({...vw,...ww});function Ed(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const Gl=Ed("utf8","u",n=>{const e=new TextDecoder("utf8");return"u"+e.decode(n)},n=>new TextEncoder().encode(n.substring(1))),xc=Ed("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=fd(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),Dd={utf8:Gl,"utf-8":Gl,hex:Vl.base16,latin1:xc,ascii:xc,binary:xc,...Vl};function _r(n,e="utf8"){const r=Dd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?pu(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function cr(n,e="utf8"){const r=Dd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var Wl=globalThis&&globalThis.__spreadArray||function(n,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return n.concat(l||Array.prototype.slice.call(e))},Ew=function(){function n(e,r,s){this.name=e,this.version=r,this.os=s,this.type="browser"}return n}(),Dw=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),Sw=function(){function n(e,r,s,a){this.name=e,this.version=r,this.os=s,this.bot=a,this.type="bot-device"}return n}(),Iw=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),xw=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),Ow=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Cw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Yl=3,Aw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Ow]],Jl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Pw(n){return n?Xl(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new xw:typeof navigator<"u"?Xl(navigator.userAgent):Rw()}function Tw(n){return n!==""&&Aw.reduce(function(e,r){var s=r[0],a=r[1];if(e)return e;var l=a.exec(n);return!!l&&[s,l]},!1)}function Xl(n){var e=Tw(n);if(!e)return null;var r=e[0],s=e[1];if(r==="searchbot")return new Iw;var a=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);a?a.length<Yl&&(a=Wl(Wl([],a,!0),Fw(Yl-a.length),!0)):a=[];var l=a.join("."),p=Nw(n),d=Cw.exec(n);return d&&d[1]?new Sw(r,l,p,d[1]):new Ew(r,l,p)}function Nw(n){for(var e=0,r=Jl.length;e<r;e++){var s=Jl[e],a=s[0],l=s[1],p=l.exec(n);if(p)return a}return null}function Rw(){var n=typeof process<"u"&&process.version;return n?new Dw(process.version.slice(1)):null}function Fw(n){for(var e=[],r=0;r<n;r++)e.push("0");return e}var ve={},Sd={},qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.delay=void 0;function Uw(n){return new Promise(e=>{setTimeout(()=>{e(!0)},n)})}qo.delay=Uw;var Pn={},gu={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.ONE_THOUSAND=Tn.ONE_HUNDRED=void 0;Tn.ONE_HUNDRED=100;Tn.ONE_THOUSAND=1e3;var Id={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365})(Id);(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=$r.exports;e.__exportStar(Tn,n),e.__exportStar(Id,n)})(gu);Object.defineProperty(Pn,"__esModule",{value:!0});Pn.fromMiliseconds=Pn.toMiliseconds=void 0;const xd=gu;function Mw(n){return n*xd.ONE_THOUSAND}Pn.toMiliseconds=Mw;function Lw(n){return Math.floor(n/xd.ONE_THOUSAND)}Pn.fromMiliseconds=Lw;(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=$r.exports;e.__exportStar(qo,n),e.__exportStar(Pn,n)})(Sd);var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.Watch=void 0;class Od{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const r=this.get(e);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);const s=Date.now()-r.started;this.timestamps.set(e,{started:r.started,elapsed:s})}get(e){const r=this.timestamps.get(e);if(typeof r>"u")throw new Error(`No timestamp found for label: ${e}`);return r}elapsed(e){const r=this.get(e);return r.elapsed||Date.now()-r.started}}ps.Watch=Od;ps.default=Od;var Cd={},Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.IWatch=void 0;class $w{}Ko.IWatch=$w;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),$r.exports.__exportStar(Ko,n)})(Cd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=$r.exports;e.__exportStar(Sd,n),e.__exportStar(ps,n),e.__exportStar(Cd,n),e.__exportStar(gu,n)})(ve);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=Pd=lt.getLocation=lt.getLocationOrThrow=yu=lt.getNavigator=lt.getNavigatorOrThrow=Ad=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function Qi(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}lt.getFromWindow=Qi;function Fn(n){const e=Qi(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}lt.getFromWindowOrThrow=Fn;function jw(){return Fn("document")}lt.getDocumentOrThrow=jw;function Bw(){return Qi("document")}var Ad=lt.getDocument=Bw;function zw(){return Fn("navigator")}lt.getNavigatorOrThrow=zw;function Hw(){return Qi("navigator")}var yu=lt.getNavigator=Hw;function qw(){return Fn("location")}lt.getLocationOrThrow=qw;function Kw(){return Qi("location")}var Pd=lt.getLocation=Kw;function kw(){return Fn("crypto")}lt.getCryptoOrThrow=kw;function Vw(){return Qi("crypto")}lt.getCrypto=Vw;function Gw(){return Fn("localStorage")}lt.getLocalStorageOrThrow=Gw;function Ww(){return Qi("localStorage")}lt.getLocalStorage=Ww;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});var Td=vu.getWindowMetadata=void 0;const Zl=lt;function Yw(){let n,e;try{n=Zl.getDocumentOrThrow(),e=Zl.getLocationOrThrow()}catch{return null}function r(){const N=n.getElementsByTagName("link"),z=[];for(let R=0;R<N.length;R++){const P=N[R],G=P.getAttribute("rel");if(G&&G.toLowerCase().indexOf("icon")>-1){const q=P.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let ie=e.protocol+"//"+e.host;if(q.indexOf("/")===0)ie+=q;else{const T=e.pathname.split("/");T.pop(),ie+=T.join("/")+"/"+q}z.push(ie)}else if(q.indexOf("//")===0){const ie=e.protocol+q;z.push(ie)}else z.push(q)}}return z}function s(...N){const z=n.getElementsByTagName("meta");for(let R=0;R<z.length;R++){const P=z[R],G=["itemprop","property","name"].map(q=>P.getAttribute(q)).filter(q=>q?N.includes(q):!1);if(G.length&&G){const q=P.getAttribute("content");if(q)return q}}return""}function a(){let N=s("name","og:site_name","og:title","twitter:title");return N||(N=n.title),N}function l(){return s("description","og:description","twitter:description","keywords")}const p=a(),d=l(),g=e.origin,w=r();return{description:d,url:g,icons:w,name:p}}Td=vu.getWindowMetadata=Yw;var cs={},Jw=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Nd="%[a-f0-9]{2}",Ql=new RegExp("("+Nd+")|([^%]+?)","gi"),ef=new RegExp("("+Nd+")+","gi");function Yc(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var r=n.slice(0,e),s=n.slice(e);return Array.prototype.concat.call([],Yc(r),Yc(s))}function Xw(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(Ql)||[],r=1;r<e.length;r++)n=Yc(e,r).join(""),e=n.match(Ql)||[];return n}}function Zw(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=ef.exec(n);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=Xw(r[0]);s!==r[0]&&(e[r[0]]=s)}r=ef.exec(n)}e["%C2"]="\uFFFD";for(var a=Object.keys(e),l=0;l<a.length;l++){var p=a[l];n=n.replace(new RegExp(p,"g"),e[p])}return n}var Qw=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return Zw(n)}},eE=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const r=n.indexOf(e);return r===-1?[n]:[n.slice(0,r),n.slice(r+e.length)]},tE=function(n,e){for(var r={},s=Object.keys(n),a=Array.isArray(e),l=0;l<s.length;l++){var p=s[l],d=n[p];(a?e.indexOf(p)!==-1:e(p,d,n))&&(r[p]=d)}return r};(function(n){const e=Jw,r=Qw,s=eE,a=tE,l=T=>T==null,p=Symbol("encodeFragmentIdentifier");function d(T){switch(T.arrayFormat){case"index":return M=>(E,x)=>{const O=E.length;return x===void 0||T.skipNull&&x===null||T.skipEmptyString&&x===""?E:x===null?[...E,[S(M,T),"[",O,"]"].join("")]:[...E,[S(M,T),"[",S(O,T),"]=",S(x,T)].join("")]};case"bracket":return M=>(E,x)=>x===void 0||T.skipNull&&x===null||T.skipEmptyString&&x===""?E:x===null?[...E,[S(M,T),"[]"].join("")]:[...E,[S(M,T),"[]=",S(x,T)].join("")];case"colon-list-separator":return M=>(E,x)=>x===void 0||T.skipNull&&x===null||T.skipEmptyString&&x===""?E:x===null?[...E,[S(M,T),":list="].join("")]:[...E,[S(M,T),":list=",S(x,T)].join("")];case"comma":case"separator":case"bracket-separator":{const M=T.arrayFormat==="bracket-separator"?"[]=":"=";return E=>(x,O)=>O===void 0||T.skipNull&&O===null||T.skipEmptyString&&O===""?x:(O=O===null?"":O,x.length===0?[[S(E,T),M,S(O,T)].join("")]:[[x,S(O,T)].join(T.arrayFormatSeparator)])}default:return M=>(E,x)=>x===void 0||T.skipNull&&x===null||T.skipEmptyString&&x===""?E:x===null?[...E,S(M,T)]:[...E,[S(M,T),"=",S(x,T)].join("")]}}function g(T){let M;switch(T.arrayFormat){case"index":return(E,x,O)=>{if(M=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),!M){O[E]=x;return}O[E]===void 0&&(O[E]={}),O[E][M[1]]=x};case"bracket":return(E,x,O)=>{if(M=/(\[\])$/.exec(E),E=E.replace(/\[\]$/,""),!M){O[E]=x;return}if(O[E]===void 0){O[E]=[x];return}O[E]=[].concat(O[E],x)};case"colon-list-separator":return(E,x,O)=>{if(M=/(:list)$/.exec(E),E=E.replace(/:list$/,""),!M){O[E]=x;return}if(O[E]===void 0){O[E]=[x];return}O[E]=[].concat(O[E],x)};case"comma":case"separator":return(E,x,O)=>{const u=typeof x=="string"&&x.includes(T.arrayFormatSeparator),_=typeof x=="string"&&!u&&N(x,T).includes(T.arrayFormatSeparator);x=_?N(x,T):x;const Q=u||_?x.split(T.arrayFormatSeparator).map(ne=>N(ne,T)):x===null?x:N(x,T);O[E]=Q};case"bracket-separator":return(E,x,O)=>{const u=/(\[\])$/.test(E);if(E=E.replace(/\[\]$/,""),!u){O[E]=x&&N(x,T);return}const _=x===null?[]:x.split(T.arrayFormatSeparator).map(Q=>N(Q,T));if(O[E]===void 0){O[E]=_;return}O[E]=[].concat(O[E],_)};default:return(E,x,O)=>{if(O[E]===void 0){O[E]=x;return}O[E]=[].concat(O[E],x)}}}function w(T){if(typeof T!="string"||T.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function S(T,M){return M.encode?M.strict?e(T):encodeURIComponent(T):T}function N(T,M){return M.decode?r(T):T}function z(T){return Array.isArray(T)?T.sort():typeof T=="object"?z(Object.keys(T)).sort((M,E)=>Number(M)-Number(E)).map(M=>T[M]):T}function R(T){const M=T.indexOf("#");return M!==-1&&(T=T.slice(0,M)),T}function P(T){let M="";const E=T.indexOf("#");return E!==-1&&(M=T.slice(E)),M}function G(T){T=R(T);const M=T.indexOf("?");return M===-1?"":T.slice(M+1)}function q(T,M){return M.parseNumbers&&!Number.isNaN(Number(T))&&typeof T=="string"&&T.trim()!==""?T=Number(T):M.parseBooleans&&T!==null&&(T.toLowerCase()==="true"||T.toLowerCase()==="false")&&(T=T.toLowerCase()==="true"),T}function ie(T,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),w(M.arrayFormatSeparator);const E=g(M),x=Object.create(null);if(typeof T!="string"||(T=T.trim().replace(/^[?#&]/,""),!T))return x;for(const O of T.split("&")){if(O==="")continue;let[u,_]=s(M.decode?O.replace(/\+/g," "):O,"=");_=_===void 0?null:["comma","separator","bracket-separator"].includes(M.arrayFormat)?_:N(_,M),E(N(u,M),_,x)}for(const O of Object.keys(x)){const u=x[O];if(typeof u=="object"&&u!==null)for(const _ of Object.keys(u))u[_]=q(u[_],M);else x[O]=q(u,M)}return M.sort===!1?x:(M.sort===!0?Object.keys(x).sort():Object.keys(x).sort(M.sort)).reduce((O,u)=>{const _=x[u];return Boolean(_)&&typeof _=="object"&&!Array.isArray(_)?O[u]=z(_):O[u]=_,O},Object.create(null))}n.extract=G,n.parse=ie,n.stringify=(T,M)=>{if(!T)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),w(M.arrayFormatSeparator);const E=_=>M.skipNull&&l(T[_])||M.skipEmptyString&&T[_]==="",x=d(M),O={};for(const _ of Object.keys(T))E(_)||(O[_]=T[_]);const u=Object.keys(O);return M.sort!==!1&&u.sort(M.sort),u.map(_=>{const Q=T[_];return Q===void 0?"":Q===null?S(_,M):Array.isArray(Q)?Q.length===0&&M.arrayFormat==="bracket-separator"?S(_,M)+"[]":Q.reduce(x(_),[]).join("&"):S(_,M)+"="+S(Q,M)}).filter(_=>_.length>0).join("&")},n.parseUrl=(T,M)=>{M=Object.assign({decode:!0},M);const[E,x]=s(T,"#");return Object.assign({url:E.split("?")[0]||"",query:ie(G(T),M)},M&&M.parseFragmentIdentifier&&x?{fragmentIdentifier:N(x,M)}:{})},n.stringifyUrl=(T,M)=>{M=Object.assign({encode:!0,strict:!0,[p]:!0},M);const E=R(T.url).split("?")[0]||"",x=n.extract(T.url),O=n.parse(x,{sort:!1}),u=Object.assign(O,T.query);let _=n.stringify(u,M);_&&(_=`?${_}`);let Q=P(T.url);return T.fragmentIdentifier&&(Q=`#${M[p]?S(T.fragmentIdentifier,M):T.fragmentIdentifier}`),`${E}${_}${Q}`},n.pick=(T,M,E)=>{E=Object.assign({parseFragmentIdentifier:!0,[p]:!1},E);const{url:x,query:O,fragmentIdentifier:u}=n.parseUrl(T,E);return n.stringifyUrl({url:x,query:a(O,M),fragmentIdentifier:u},E)},n.exclude=(T,M,E)=>{const x=Array.isArray(M)?O=>!M.includes(O):(O,u)=>!M(O,u);return n.pick(T,x,E)}})(cs);const rE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function iE(n,e=[]){const r=[];return Object.keys(n).forEach(s=>{if(e.length&&!e.includes(s))return;const a=n[s];r.push(...a.accounts)}),r}function Rd(n,e){return n.includes(":")?[n]:e.chains||[]}const Fd="base10",ar="base16",Jc="base64pad",_u="utf8",Ud=0,en=1,nE=0,tf=1,Xc=12,bu=32;function sE(){const n=du.generateKeyPair();return{privateKey:cr(n.secretKey,ar),publicKey:cr(n.publicKey,ar)}}function Zc(){const n=Rn.randomBytes(bu);return cr(n,ar)}function oE(n,e){const r=du.sharedKey(_r(n,ar),_r(e,ar)),s=new Wb(zo.SHA256,r).expand(bu);return cr(s,ar)}function aE(n){const e=zo.hash(_r(n,ar));return cr(e,ar)}function Cn(n){const e=zo.hash(_r(n,_u));return cr(e,ar)}function cE(n){return _r(`${n}`,Fd)}function gs(n){return Number(cr(n,Fd))}function uE(n){const e=cE(typeof n.type<"u"?n.type:Ud);if(gs(e)===en&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?_r(n.senderPublicKey,ar):void 0,s=typeof n.iv<"u"?_r(n.iv,ar):Rn.randomBytes(Xc),a=new lu.ChaCha20Poly1305(_r(n.symKey,ar)).seal(s,_r(n.message,_u));return lE({type:e,sealed:a,iv:s,senderPublicKey:r})}function hE(n){const e=new lu.ChaCha20Poly1305(_r(n.symKey,ar)),{sealed:r,iv:s}=Fo(n.encoded),a=e.open(s,r);if(a===null)throw new Error("Failed to decrypt");return cr(a,_u)}function lE(n){if(gs(n.type)===en){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return cr(Vc([n.type,n.senderPublicKey,n.iv,n.sealed]),Jc)}return cr(Vc([n.type,n.iv,n.sealed]),Jc)}function Fo(n){const e=_r(n,Jc),r=e.slice(nE,tf),s=tf;if(gs(r)===en){const d=s+bu,g=d+Xc,w=e.slice(s,d),S=e.slice(d,g),N=e.slice(g);return{type:r,sealed:N,iv:S,senderPublicKey:w}}const a=s+Xc,l=e.slice(s,a),p=e.slice(a);return{type:r,sealed:p,iv:l}}function fE(n,e){const r=Fo(n);return Md({type:gs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?cr(r.senderPublicKey,ar):void 0,receiverPublicKey:e?.receiverPublicKey})}function Md(n){const e=n?.type||Ud;if(e===en){if(typeof n?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof n?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n?.senderPublicKey,receiverPublicKey:n?.receiverPublicKey}}function rf(n){return n.type===en&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var dE=Object.defineProperty,nf=Object.getOwnPropertySymbols,pE=Object.prototype.hasOwnProperty,gE=Object.prototype.propertyIsEnumerable,sf=(n,e,r)=>e in n?dE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,of=(n,e)=>{for(var r in e||(e={}))pE.call(e,r)&&sf(n,r,e[r]);if(nf)for(var r of nf(e))gE.call(e,r)&&sf(n,r,e[r]);return n};const yE="ReactNative",Ji={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},vE="js";function mu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ld(){return!Ad()&&!!yu()&&navigator.product===yE}function wu(){return!mu()&&!!yu()}function $d(){return Ld()?Ji.reactNative:mu()?Ji.node:wu()?Ji.browser:Ji.unknown}function _E(n,e){let r=cs.parse(n);return r=of(of({},r),e),n=cs.stringify(r),n}function bE(){return Td()||{name:"",description:"",url:"",icons:[""]}}function mE(){if(typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:s}=global.Platform;return[r,s].join("-")}const n=Pw();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function wE(){var n;const e=$d();return e===Ji.browser?[e,((n=Pd())==null?void 0:n.host)||"unknown"].join(":"):e}function EE(n,e,r){const s=mE(),a=wE();return[[n,e].join("-"),[vE,r].join("-"),s,a].join("/")}function DE({protocol:n,version:e,relayUrl:r,sdkVersion:s,auth:a,projectId:l,useOnCloseEvent:p}){const d=r.split("?"),g=EE(n,e,s),w={auth:a,ua:g,projectId:l,useOnCloseEvent:p||void 0},S=_E(d[1]||"",w);return d[0]+"?"+S}function Xi(n,e){return n.filter(r=>e.includes(r)).length===n.length}function jd(n){return Object.fromEntries(n.entries())}function Bd(n){return new Map(Object.entries(n))}function xn(n=ve.FIVE_MINUTES,e){const r=ve.toMiliseconds(n||ve.FIVE_MINUTES);let s,a,l;return{resolve:p=>{l&&s&&(clearTimeout(l),s(p))},reject:p=>{l&&a&&(clearTimeout(l),a(p))},done:()=>new Promise((p,d)=>{l=setTimeout(()=>{d(new Error(e))},r),s=p,a=d})}}function Uo(n,e,r){return new Promise(async(s,a)=>{const l=setTimeout(()=>a(new Error(r)),e);try{const p=await n;s(p)}catch(p){a(p)}clearTimeout(l)})}function zd(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function SE(n){return zd("topic",n)}function IE(n){return zd("id",n)}function Hd(n){const[e,r]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")s.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return s}function ri(n,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(n))}function Ai(n){return Date.now()>=ve.toMiliseconds(n)}function Ht(n,e){return`${n}${e?`:${e}`:""}`}function Oc(n=[],e=[]){return[...new Set([...n,...e])]}async function xE({id:n,topic:e,wcDeepLink:r}){try{if(!r)return;let a=(typeof r=="string"?JSON.parse(r):r)?.href;if(typeof a!="string")return;a.endsWith("/")&&(a=a.slice(0,-1));const l=`${a}/wc?requestId=${n}&sessionTopic=${e}`,p=$d();p===Ji.browser?window.open(l,"_self","noreferrer noopener"):p===Ji.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(l)}catch(s){console.error(s)}}const OE="irn";function Qc(n){return n?.relay||{protocol:OE}}function Co(n){const e=rE[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var CE=Object.defineProperty,af=Object.getOwnPropertySymbols,AE=Object.prototype.hasOwnProperty,PE=Object.prototype.propertyIsEnumerable,cf=(n,e,r)=>e in n?CE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,TE=(n,e)=>{for(var r in e||(e={}))AE.call(e,r)&&cf(n,r,e[r]);if(af)for(var r of af(e))PE.call(e,r)&&cf(n,r,e[r]);return n};function NE(n,e="-"){const r={},s="relay"+e;return Object.keys(n).forEach(a=>{if(a.startsWith(s)){const l=a.replace(s,""),p=n[a];r[l]=p}}),r}function RE(n){const e=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),a=n.substring(e+1,r).split("@"),l=typeof r<"u"?n.substring(r):"",p=cs.parse(l);return{protocol:s,topic:FE(a[0]),version:parseInt(a[1],10),symKey:p.symKey,relay:NE(p)}}function FE(n){return n.startsWith("//")?n.substring(2):n}function UE(n,e="-"){const r="relay",s={};return Object.keys(n).forEach(a=>{const l=r+e+a;n[a]&&(s[l]=n[a])}),s}function ME(n){return`${n.protocol}:${n.topic}@${n.version}?`+cs.stringify(TE({symKey:n.symKey},UE(n.relay)))}function Un(n){const e=[];return n.forEach(r=>{const[s,a]=r.split(":");e.push(`${s}:${a}`)}),e}function LE(n){const e=[];return Object.values(n).forEach(r=>{e.push(...Un(r.accounts))}),e}function $E(n,e){const r=[];return Object.values(n).forEach(s=>{Un(s.accounts).includes(e)&&r.push(...s.methods)}),r}function jE(n,e){const r=[];return Object.values(n).forEach(s=>{Un(s.accounts).includes(e)&&r.push(...s.events)}),r}function BE(n,e){const r=Po(n,e);if(r)throw new Error(r.message);const s={};for(const[a,l]of Object.entries(n))s[a]={methods:l.methods,events:l.events,chains:l.accounts.map(p=>`${p.split(":")[0]}:${p.split(":")[1]}`)};return s}function qd(n){return n.includes(":")}function Ao(n){return qd(n)?n.split(":")[0]:n}const zE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},HE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ce(n,e){const{message:r,code:s}=HE[n];return{message:e?`${r} ${e}`:r,code:s}}function Rt(n,e){const{message:r,code:s}=zE[n];return{message:e?`${r} ${e}`:r,code:s}}function vi(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function An(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function or(n){return typeof n>"u"}function Gt(n,e){return e&&or(n)?!0:typeof n=="string"&&!!n.trim().length}function Eu(n,e){return e&&or(n)?!0:typeof n=="number"&&!isNaN(n)}function qE(n,e){const{requiredNamespaces:r}=e,s=Object.keys(n.namespaces),a=Object.keys(r);let l=!0;return Xi(a,s)?(s.forEach(p=>{const{accounts:d,methods:g,events:w}=n.namespaces[p],S=Un(d),N=r[p];(!Xi(Rd(p,N),S)||!Xi(N.methods,g)||!Xi(N.events,w))&&(l=!1)}),l):!1}function Du(n){return Gt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function KE(n){if(Gt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Du(r)}}return!1}function kE(n){if(Gt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function VE(n){var e;return(e=n?.proposer)==null?void 0:e.publicKey}function GE(n){return n?.topic}function WE(n,e){let r=null;return Gt(n?.publicKey,!1)||(r=ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function uf(n){let e=!0;return vi(n)?n.length&&(e=n.every(r=>Gt(r,!1))):e=!1,e}function YE(n,e,r){let s=null;return vi(e)?e.forEach(a=>{s||(!Du(a)||!a.includes(n))&&(s=Rt("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):s=Rt("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),s}function JE(n,e){let r=null;return Object.entries(n).forEach(([s,a])=>{if(r)return;const l=YE(s,Rd(s,a),`${e} requiredNamespace`);l&&(r=l)}),r}function XE(n,e){let r=null;return vi(n)?n.forEach(s=>{r||KE(s)||(r=Rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function ZE(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=XE(s?.accounts,`${e} namespace`);a&&(r=a)}),r}function QE(n,e){let r=null;return uf(n?.methods)?uf(n?.events)||(r=Rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Kd(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=QE(s,`${e}, namespace`);a&&(r=a)}),r}function e3(n,e,r){let s=null;if(n&&An(n)){const a=Kd(n,e);a&&(s=a);const l=JE(n,e);l&&(s=l)}else s=ce("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return s}function Po(n,e){let r=null;if(n&&An(n)){const s=Kd(n,e);s&&(r=s);const a=ZE(n,e);a&&(r=a)}else r=ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function kd(n){return Gt(n.protocol,!0)}function t3(n,e){let r=!1;return e&&!n?r=!0:n&&vi(n)&&n.length&&n.forEach(s=>{r=kd(s)}),r}function r3(n){return typeof n=="number"}function gr(n){return typeof n<"u"&&typeof n!==null}function i3(n){return!(!n||typeof n!="object"||!n.code||!Eu(n.code,!1)||!n.message||!Gt(n.message,!1))}function n3(n){return!(or(n)||!Gt(n.method,!1))}function s3(n){return!(or(n)||or(n.result)&&or(n.error)||!Eu(n.id,!1)||!Gt(n.jsonrpc,!1))}function o3(n){return!(or(n)||!Gt(n.name,!1))}function hf(n,e){return!(!Du(e)||!LE(n).includes(e))}function a3(n,e,r){return Gt(r,!1)?$E(n,e).includes(r):!1}function c3(n,e,r){return Gt(r,!1)?jE(n,e).includes(r):!1}function lf(n,e,r){let s=null;const a=u3(n),l=h3(e),p=Object.keys(a),d=Object.keys(l),g=ff(Object.keys(n)),w=ff(Object.keys(e)),S=g.filter(N=>!w.includes(N));return S.length&&(s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${S.toString()}
      Received: ${Object.keys(e).toString()}`)),Xi(p,d)||(s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${p.toString()}
      Approved: ${d.toString()}`)),Object.keys(e).forEach(N=>{if(!N.includes(":")||s)return;const z=Un(e[N].accounts);z.includes(N)||(s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${N}
        Required: ${N}
        Approved: ${z.toString()}`))}),p.forEach(N=>{s||(Xi(a[N].methods,l[N].methods)?Xi(a[N].events,l[N].events)||(s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${N}`)):s=ce("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${N}`))}),s}function u3(n){const e={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?e[r]=n[r]:(s=n[r].chains)==null||s.forEach(a=>{e[a]={methods:n[r].methods,events:n[r].events}})}),e}function ff(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function h3(n){const e={};return Object.keys(n).forEach(r=>{r.includes(":")?e[r]=n[r]:Un(n[r].accounts)?.forEach(a=>{e[a]={accounts:n[r].accounts.filter(l=>l.includes(`${a}:`)),methods:n[r].methods,events:n[r].events}})}),e}function l3(n,e){return Eu(n,!1)&&n<=e.max&&n>=e.min}var ko={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});function f3(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}ys.safeJsonParse=f3;function d3(n){return typeof n=="string"?n:JSON.stringify(n,(e,r)=>typeof r>"u"?null:r)}ys.safeJsonStringify=d3;var To={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof yr<"u"&&yr.localStorage?To.exports=yr.localStorage:typeof window<"u"&&window.localStorage?To.exports=window.localStorage:To.exports=new e})();var Vd={},Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.IKeyValueStorage=void 0;class p3{}Vo.IKeyValueStorage=p3;var Go={};Object.defineProperty(Go,"__esModule",{value:!0});Go.parseEntry=void 0;const g3=ys;function y3(n){var e;return[n[0],g3.safeJsonParse((e=n[1])!==null&&e!==void 0?e:"")]}Go.parseEntry=y3;(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=$r.exports;e.__exportStar(Vo,n),e.__exportStar(Go,n)})(Vd);Object.defineProperty(ko,"__esModule",{value:!0});ko.KeyValueStorage=void 0;const On=$r.exports,df=ys,v3=On.__importDefault(To.exports),_3=Vd;class Gd{constructor(){this.localStorage=v3.default}getKeys(){return On.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return On.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(_3.parseEntry)})}getItem(e){return On.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return df.safeJsonParse(r)})}setItem(e,r){return On.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,df.safeJsonStringify(r))})}removeItem(e){return On.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}ko.KeyValueStorage=Gd;var b3=ko.default=Gd,vs={},Wo={},Su={},Yo={};class tn{}var m3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:tn},Symbol.toStringTag,{value:"Module"})),w3=lb(m3);Object.defineProperty(Yo,"__esModule",{value:!0});Yo.IHeartBeat=void 0;const E3=w3;class D3 extends E3.IEvents{constructor(e){super()}}Yo.IHeartBeat=D3;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),$r.exports.__exportStar(Yo,n)})(Su);var Iu={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.HEARTBEAT_EVENTS=Nn.HEARTBEAT_INTERVAL=void 0;const S3=ve;Nn.HEARTBEAT_INTERVAL=S3.FIVE_SECONDS;Nn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),$r.exports.__exportStar(Nn,n)})(Iu);Object.defineProperty(Wo,"__esModule",{value:!0});Wo.HeartBeat=void 0;const Cc=$r.exports,I3=jr.exports,x3=ve,O3=Su,Ac=Iu;class xu extends O3.IHeartBeat{constructor(e){super(e),this.events=new I3.EventEmitter,this.interval=Ac.HEARTBEAT_INTERVAL,this.interval=e?.interval||Ac.HEARTBEAT_INTERVAL}static init(e){return Cc.__awaiter(this,void 0,void 0,function*(){const r=new xu(e);return yield r.init(),r})}init(){return Cc.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}initialize(){return Cc.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),x3.toMiliseconds(this.interval))})}pulse(){this.events.emit(Ac.HEARTBEAT_EVENTS.pulse)}}Wo.HeartBeat=xu;(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=$r.exports;e.__exportStar(Wo,n),e.__exportStar(Su,n),e.__exportStar(Iu,n)})(vs);var Qe={};function C3(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}var A3=P3;function P3(n,e,r){var s=r&&r.stringify||C3,a=1;if(typeof n=="object"&&n!==null){var l=e.length+a;if(l===1)return n;var p=new Array(l);p[0]=s(n);for(var d=1;d<l;d++)p[d]=s(e[d]);return p.join(" ")}if(typeof n!="string")return n;var g=e.length;if(g===0)return n;for(var w="",S=1-a,N=-1,z=n&&n.length||0,R=0;R<z;){if(n.charCodeAt(R)===37&&R+1<z){switch(N=N>-1?N:0,n.charCodeAt(R+1)){case 100:case 102:if(S>=g||e[S]==null)break;N<R&&(w+=n.slice(N,R)),w+=Number(e[S]),N=R+2,R++;break;case 105:if(S>=g||e[S]==null)break;N<R&&(w+=n.slice(N,R)),w+=Math.floor(Number(e[S])),N=R+2,R++;break;case 79:case 111:case 106:if(S>=g||e[S]===void 0)break;N<R&&(w+=n.slice(N,R));var P=typeof e[S];if(P==="string"){w+="'"+e[S]+"'",N=R+2,R++;break}if(P==="function"){w+=e[S].name||"<anonymous>",N=R+2,R++;break}w+=s(e[S]),N=R+2,R++;break;case 115:if(S>=g)break;N<R&&(w+=n.slice(N,R)),w+=String(e[S]),N=R+2,R++;break;case 37:N<R&&(w+=n.slice(N,R)),w+="%",N=R+2,R++,S--;break}++S}++R}return N===-1?n:(N<z&&(w+=n.slice(N)),w)}const pf=A3;var T3=ii;const us=z3().console||{},N3={mapHttpRequest:So,mapHttpResponse:So,wrapRequestSerializer:Pc,wrapResponseSerializer:Pc,wrapErrorSerializer:Pc,req:So,res:So,err:L3};function R3(n,e){return Array.isArray(n)?n.filter(function(s){return s!=="!stdSerializers.err"}):n===!0?Object.keys(e):!1}function ii(n){n=n||{},n.browser=n.browser||{};const e=n.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=n.browser.write||us;n.browser.write&&(n.browser.asObject=!0);const s=n.serializers||{},a=R3(n.browser.serialize,s);let l=n.browser.serialize;Array.isArray(n.browser.serialize)&&n.browser.serialize.indexOf("!stdSerializers.err")>-1&&(l=!1);const p=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),n.enabled===!1&&(n.level="silent");const d=n.level||"info",g=Object.create(r);g.log||(g.log=hs),Object.defineProperty(g,"levelVal",{get:S}),Object.defineProperty(g,"level",{get:N,set:z});const w={transmit:e,serialize:a,asObject:n.browser.asObject,levels:p,timestamp:$3(n)};g.levels=ii.levels,g.level=d,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=hs,g.serializers=s,g._serialize=a,g._stdErrSerialize=l,g.child=R,e&&(g._logEvent=eu());function S(){return this.level==="silent"?1/0:this.levels.values[this.level]}function N(){return this._level}function z(P){if(P!=="silent"&&!this.levels.values[P])throw Error("unknown level "+P);this._level=P,Sn(w,g,"error","log"),Sn(w,g,"fatal","error"),Sn(w,g,"warn","error"),Sn(w,g,"info","log"),Sn(w,g,"debug","log"),Sn(w,g,"trace","log")}function R(P,G){if(!P)throw new Error("missing bindings for child Pino");G=G||{},a&&P.serializers&&(G.serializers=P.serializers);const q=G.serializers;if(a&&q){var ie=Object.assign({},s,q),T=n.browser.serialize===!0?Object.keys(ie):a;delete P.serializers,Jo([P],T,ie,this._stdErrSerialize)}function M(E){this._childLevel=(E._childLevel|0)+1,this.error=In(E,P,"error"),this.fatal=In(E,P,"fatal"),this.warn=In(E,P,"warn"),this.info=In(E,P,"info"),this.debug=In(E,P,"debug"),this.trace=In(E,P,"trace"),ie&&(this.serializers=ie,this._serialize=T),e&&(this._logEvent=eu([].concat(E._logEvent.bindings,P)))}return M.prototype=this,new M(this)}return g}ii.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ii.stdSerializers=N3;ii.stdTimeFunctions=Object.assign({},{nullTime:Wd,epochTime:Yd,unixTime:j3,isoTime:B3});function Sn(n,e,r,s){const a=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?hs:a[r]?a[r]:us[r]||us[s]||hs,F3(n,e,r)}function F3(n,e,r){!n.transmit&&e[r]===hs||(e[r]=function(s){return function(){const l=n.timestamp(),p=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===us?us:this;for(var g=0;g<p.length;g++)p[g]=arguments[g];if(n.serialize&&!n.asObject&&Jo(p,this._serialize,this.serializers,this._stdErrSerialize),n.asObject?s.call(d,U3(this,r,p,l)):s.apply(d,p),n.transmit){const w=n.transmit.level||e.level,S=ii.levels.values[w],N=ii.levels.values[r];if(N<S)return;M3(this,{ts:l,methodLevel:r,methodValue:N,transmitLevel:w,transmitValue:ii.levels.values[n.transmit.level||e.level],send:n.transmit.send,val:e.levelVal},p)}}}(e[r]))}function U3(n,e,r,s){n._serialize&&Jo(r,n._serialize,n.serializers,n._stdErrSerialize);const a=r.slice();let l=a[0];const p={};s&&(p.time=s),p.level=ii.levels.values[e];let d=(n._childLevel|0)+1;if(d<1&&(d=1),l!==null&&typeof l=="object"){for(;d--&&typeof a[0]=="object";)Object.assign(p,a.shift());l=a.length?pf(a.shift(),a):void 0}else typeof l=="string"&&(l=pf(a.shift(),a));return l!==void 0&&(p.msg=l),p}function Jo(n,e,r,s){for(const a in n)if(s&&n[a]instanceof Error)n[a]=ii.stdSerializers.err(n[a]);else if(typeof n[a]=="object"&&!Array.isArray(n[a]))for(const l in n[a])e&&e.indexOf(l)>-1&&l in r&&(n[a][l]=r[l](n[a][l]))}function In(n,e,r){return function(){const s=new Array(1+arguments.length);s[0]=e;for(var a=1;a<s.length;a++)s[a]=arguments[a-1];return n[r].apply(this,s)}}function M3(n,e,r){const s=e.send,a=e.ts,l=e.methodLevel,p=e.methodValue,d=e.val,g=n._logEvent.bindings;Jo(r,n._serialize||Object.keys(n.serializers),n.serializers,n._stdErrSerialize===void 0?!0:n._stdErrSerialize),n._logEvent.ts=a,n._logEvent.messages=r.filter(function(w){return g.indexOf(w)===-1}),n._logEvent.level.label=l,n._logEvent.level.value=p,s(l,n._logEvent,d),n._logEvent=eu(g)}function eu(n){return{ts:0,messages:[],bindings:n||[],level:{label:"",value:0}}}function L3(n){const e={type:n.constructor.name,msg:n.message,stack:n.stack};for(const r in n)e[r]===void 0&&(e[r]=n[r]);return e}function $3(n){return typeof n.timestamp=="function"?n.timestamp:n.timestamp===!1?Wd:Yd}function So(){return{}}function Pc(n){return n}function hs(){}function Wd(){return!1}function Yd(){return Date.now()}function j3(){return Math.round(Date.now()/1e3)}function B3(){return new Date(Date.now()).toISOString()}function z3(){function n(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return n(self)||n(window)||n(this)||{}}}var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.PINO_CUSTOM_CONTEXT_KEY=Zi.PINO_LOGGER_DEFAULTS=void 0;Zi.PINO_LOGGER_DEFAULTS={level:"info"};Zi.PINO_CUSTOM_CONTEXT_KEY="custom_context";var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.generateChildLogger=vr.formatChildLoggerContext=vr.getLoggerContext=vr.setBrowserLoggerContext=vr.getBrowserLoggerContext=vr.getDefaultLoggerOptions=void 0;const Mn=Zi;function H3(n){return Object.assign(Object.assign({},n),{level:n?.level||Mn.PINO_LOGGER_DEFAULTS.level})}vr.getDefaultLoggerOptions=H3;function Jd(n,e=Mn.PINO_CUSTOM_CONTEXT_KEY){return n[e]||""}vr.getBrowserLoggerContext=Jd;function Xd(n,e,r=Mn.PINO_CUSTOM_CONTEXT_KEY){return n[r]=e,n}vr.setBrowserLoggerContext=Xd;function Zd(n,e=Mn.PINO_CUSTOM_CONTEXT_KEY){let r="";return typeof n.bindings>"u"?r=Jd(n,e):r=n.bindings().context||"",r}vr.getLoggerContext=Zd;function Qd(n,e,r=Mn.PINO_CUSTOM_CONTEXT_KEY){const s=Zd(n,r);return s.trim()?`${s}/${e}`:e}vr.formatChildLoggerContext=Qd;function q3(n,e,r=Mn.PINO_CUSTOM_CONTEXT_KEY){const s=Qd(n,e,r),a=n.child({context:s});return Xd(a,s,r)}vr.generateChildLogger=q3;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=$r.exports,r=e.__importDefault(T3);Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(Zi,n),e.__exportStar(vr,n)})(Qe);class K3 extends tn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class k3 extends tn{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class V3{constructor(e,r){this.logger=e,this.core=r}}class G3 extends tn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class W3 extends tn{constructor(e){super()}}class Y3{constructor(e,r,s,a){this.core=e,this.logger=r,this.name=s}}class J3 extends tn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class X3 extends tn{constructor(e,r){super(),this.core=e,this.logger=r}}class Z3{constructor(e,r){this.projectId=e,this.logger=r}}class Q3{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class e6{constructor(e){this.client=e}}const t6=n=>JSON.stringify(n,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),r6=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function Ou(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return r6(n)}catch{return n}}function ls(n){return typeof n=="string"?n:t6(n)||""}var Cu={},ep={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Me,r=Ir;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function d(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},d.prototype.update=function(g,w){if(w===void 0&&(w=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var S=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&w>0;)this._buffer[this._bufferLength++]=g[S++],w--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(S=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,S,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=g[S++],w--;return this},d.prototype.finish=function(g){if(!this._finished){var w=this._bytesHashed,S=this._bufferLength,N=w/536870912|0,z=w<<3,R=w%128<112?128:256;this._buffer[S]=128;for(var P=S+1;P<R-8;P++)this._buffer[P]=0;e.writeUint32BE(N,this._buffer,R-8),e.writeUint32BE(z,this._buffer,R-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,R),this._finished=!0}for(var P=0;P<this.digestLength/8;P++)e.writeUint32BE(this._stateHi[P],g,P*8),e.writeUint32BE(this._stateLo[P],g,P*8+4);return this},d.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(g){r.wipe(g.stateHi),r.wipe(g.stateLo),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},d}();n.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(d,g,w,S,N,z,R){for(var P=w[0],G=w[1],q=w[2],ie=w[3],T=w[4],M=w[5],E=w[6],x=w[7],O=S[0],u=S[1],_=S[2],Q=S[3],ne=S[4],ue=S[5],ge=S[6],ye=S[7],m,C,Z,J,K,k,ee,re;R>=128;){for(var De=0;De<16;De++){var oe=8*De+z;d[De]=e.readUint32BE(N,oe),g[De]=e.readUint32BE(N,oe+4)}for(var De=0;De<80;De++){var Se=P,le=G,Pe=q,B=ie,j=T,F=M,h=E,I=x,se=O,he=u,Ee=_,He=Q,ke=ne,Le=ue,pt=ge,gt=ye;if(m=x,C=ye,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=(T>>>14|ne<<32-14)^(T>>>18|ne<<32-18)^(ne>>>41-32|T<<32-(41-32)),C=(ne>>>14|T<<32-14)^(ne>>>18|T<<32-18)^(T>>>41-32|ne<<32-(41-32)),K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,m=T&M^~T&E,C=ne&ue^~ne&ge,K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,m=a[De*2],C=a[De*2+1],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,m=d[De%16],C=g[De%16],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,Z=ee&65535|re<<16,J=K&65535|k<<16,m=Z,C=J,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=(P>>>28|O<<32-28)^(O>>>34-32|P<<32-(34-32))^(O>>>39-32|P<<32-(39-32)),C=(O>>>28|P<<32-28)^(P>>>34-32|O<<32-(34-32))^(P>>>39-32|O<<32-(39-32)),K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,m=P&G^P&q^G&q,C=O&u^O&_^u&_,K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,I=ee&65535|re<<16,gt=K&65535|k<<16,m=B,C=He,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=Z,C=J,K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,B=ee&65535|re<<16,He=K&65535|k<<16,G=Se,q=le,ie=Pe,T=B,M=j,E=F,x=h,P=I,u=se,_=he,Q=Ee,ne=He,ue=ke,ge=Le,ye=pt,O=gt,De%16===15)for(var oe=0;oe<16;oe++)m=d[oe],C=g[oe],K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=d[(oe+9)%16],C=g[(oe+9)%16],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,Z=d[(oe+1)%16],J=g[(oe+1)%16],m=(Z>>>1|J<<32-1)^(Z>>>8|J<<32-8)^Z>>>7,C=(J>>>1|Z<<32-1)^(J>>>8|Z<<32-8)^(J>>>7|Z<<32-7),K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,Z=d[(oe+14)%16],J=g[(oe+14)%16],m=(Z>>>19|J<<32-19)^(J>>>61-32|Z<<32-(61-32))^Z>>>6,C=(J>>>19|Z<<32-19)^(Z>>>61-32|J<<32-(61-32))^(J>>>6|Z<<32-6),K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,d[oe]=ee&65535|re<<16,g[oe]=K&65535|k<<16}m=P,C=O,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=w[0],C=S[0],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,w[0]=P=ee&65535|re<<16,S[0]=O=K&65535|k<<16,m=G,C=u,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=w[1],C=S[1],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,w[1]=G=ee&65535|re<<16,S[1]=u=K&65535|k<<16,m=q,C=_,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=w[2],C=S[2],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,w[2]=q=ee&65535|re<<16,S[2]=_=K&65535|k<<16,m=ie,C=Q,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=w[3],C=S[3],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,w[3]=ie=ee&65535|re<<16,S[3]=Q=K&65535|k<<16,m=T,C=ne,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=w[4],C=S[4],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,w[4]=T=ee&65535|re<<16,S[4]=ne=K&65535|k<<16,m=M,C=ue,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=w[5],C=S[5],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,w[5]=M=ee&65535|re<<16,S[5]=ue=K&65535|k<<16,m=E,C=ge,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=w[6],C=S[6],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,w[6]=E=ee&65535|re<<16,S[6]=ge=K&65535|k<<16,m=x,C=ye,K=C&65535,k=C>>>16,ee=m&65535,re=m>>>16,m=w[7],C=S[7],K+=C&65535,k+=C>>>16,ee+=m&65535,re+=m>>>16,k+=K>>>16,ee+=k>>>16,re+=ee>>>16,w[7]=x=ee&65535|re<<16,S[7]=ye=K&65535|k<<16,z+=128,R-=128}return z}function p(d){var g=new s;g.update(d);var w=g.digest();return g.clean(),w}n.hash=p})(ep);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Rn,r=ep,s=Ir;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function a(B){const j=new Float64Array(16);if(B)for(let F=0;F<B.length;F++)j[F]=B[F];return j}const l=new Uint8Array(32);l[0]=9;const p=a(),d=a([1]),g=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),w=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),N=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),z=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function R(B,j){for(let F=0;F<16;F++)B[F]=j[F]|0}function P(B){let j=1;for(let F=0;F<16;F++){let h=B[F]+j+65535;j=Math.floor(h/65536),B[F]=h-j*65536}B[0]+=j-1+37*(j-1)}function G(B,j,F){const h=~(F-1);for(let I=0;I<16;I++){const se=h&(B[I]^j[I]);B[I]^=se,j[I]^=se}}function q(B,j){const F=a(),h=a();for(let I=0;I<16;I++)h[I]=j[I];P(h),P(h),P(h);for(let I=0;I<2;I++){F[0]=h[0]-65517;for(let he=1;he<15;he++)F[he]=h[he]-65535-(F[he-1]>>16&1),F[he-1]&=65535;F[15]=h[15]-32767-(F[14]>>16&1);const se=F[15]>>16&1;F[14]&=65535,G(h,F,1-se)}for(let I=0;I<16;I++)B[2*I]=h[I]&255,B[2*I+1]=h[I]>>8}function ie(B,j){let F=0;for(let h=0;h<32;h++)F|=B[h]^j[h];return(1&F-1>>>8)-1}function T(B,j){const F=new Uint8Array(32),h=new Uint8Array(32);return q(F,B),q(h,j),ie(F,h)}function M(B){const j=new Uint8Array(32);return q(j,B),j[0]&1}function E(B,j){for(let F=0;F<16;F++)B[F]=j[2*F]+(j[2*F+1]<<8);B[15]&=32767}function x(B,j,F){for(let h=0;h<16;h++)B[h]=j[h]+F[h]}function O(B,j,F){for(let h=0;h<16;h++)B[h]=j[h]-F[h]}function u(B,j,F){let h,I,se=0,he=0,Ee=0,He=0,ke=0,Le=0,pt=0,gt=0,je=0,Ie=0,Re=0,Fe=0,Be=0,Oe=0,Ue=0,we=0,Ce=0,qe=0,xe=0,Ve=0,We=0,et=0,tt=0,Je=0,er=0,ur=0,Gr=0,tr=0,ni=0,_i=0,Mi=0,wt=F[0],yt=F[1],Et=F[2],Dt=F[3],bt=F[4],vt=F[5],Ut=F[6],Mt=F[7],St=F[8],Lt=F[9],It=F[10],At=F[11],xt=F[12],ht=F[13],$t=F[14],jt=F[15];h=j[0],se+=h*wt,he+=h*yt,Ee+=h*Et,He+=h*Dt,ke+=h*bt,Le+=h*vt,pt+=h*Ut,gt+=h*Mt,je+=h*St,Ie+=h*Lt,Re+=h*It,Fe+=h*At,Be+=h*xt,Oe+=h*ht,Ue+=h*$t,we+=h*jt,h=j[1],he+=h*wt,Ee+=h*yt,He+=h*Et,ke+=h*Dt,Le+=h*bt,pt+=h*vt,gt+=h*Ut,je+=h*Mt,Ie+=h*St,Re+=h*Lt,Fe+=h*It,Be+=h*At,Oe+=h*xt,Ue+=h*ht,we+=h*$t,Ce+=h*jt,h=j[2],Ee+=h*wt,He+=h*yt,ke+=h*Et,Le+=h*Dt,pt+=h*bt,gt+=h*vt,je+=h*Ut,Ie+=h*Mt,Re+=h*St,Fe+=h*Lt,Be+=h*It,Oe+=h*At,Ue+=h*xt,we+=h*ht,Ce+=h*$t,qe+=h*jt,h=j[3],He+=h*wt,ke+=h*yt,Le+=h*Et,pt+=h*Dt,gt+=h*bt,je+=h*vt,Ie+=h*Ut,Re+=h*Mt,Fe+=h*St,Be+=h*Lt,Oe+=h*It,Ue+=h*At,we+=h*xt,Ce+=h*ht,qe+=h*$t,xe+=h*jt,h=j[4],ke+=h*wt,Le+=h*yt,pt+=h*Et,gt+=h*Dt,je+=h*bt,Ie+=h*vt,Re+=h*Ut,Fe+=h*Mt,Be+=h*St,Oe+=h*Lt,Ue+=h*It,we+=h*At,Ce+=h*xt,qe+=h*ht,xe+=h*$t,Ve+=h*jt,h=j[5],Le+=h*wt,pt+=h*yt,gt+=h*Et,je+=h*Dt,Ie+=h*bt,Re+=h*vt,Fe+=h*Ut,Be+=h*Mt,Oe+=h*St,Ue+=h*Lt,we+=h*It,Ce+=h*At,qe+=h*xt,xe+=h*ht,Ve+=h*$t,We+=h*jt,h=j[6],pt+=h*wt,gt+=h*yt,je+=h*Et,Ie+=h*Dt,Re+=h*bt,Fe+=h*vt,Be+=h*Ut,Oe+=h*Mt,Ue+=h*St,we+=h*Lt,Ce+=h*It,qe+=h*At,xe+=h*xt,Ve+=h*ht,We+=h*$t,et+=h*jt,h=j[7],gt+=h*wt,je+=h*yt,Ie+=h*Et,Re+=h*Dt,Fe+=h*bt,Be+=h*vt,Oe+=h*Ut,Ue+=h*Mt,we+=h*St,Ce+=h*Lt,qe+=h*It,xe+=h*At,Ve+=h*xt,We+=h*ht,et+=h*$t,tt+=h*jt,h=j[8],je+=h*wt,Ie+=h*yt,Re+=h*Et,Fe+=h*Dt,Be+=h*bt,Oe+=h*vt,Ue+=h*Ut,we+=h*Mt,Ce+=h*St,qe+=h*Lt,xe+=h*It,Ve+=h*At,We+=h*xt,et+=h*ht,tt+=h*$t,Je+=h*jt,h=j[9],Ie+=h*wt,Re+=h*yt,Fe+=h*Et,Be+=h*Dt,Oe+=h*bt,Ue+=h*vt,we+=h*Ut,Ce+=h*Mt,qe+=h*St,xe+=h*Lt,Ve+=h*It,We+=h*At,et+=h*xt,tt+=h*ht,Je+=h*$t,er+=h*jt,h=j[10],Re+=h*wt,Fe+=h*yt,Be+=h*Et,Oe+=h*Dt,Ue+=h*bt,we+=h*vt,Ce+=h*Ut,qe+=h*Mt,xe+=h*St,Ve+=h*Lt,We+=h*It,et+=h*At,tt+=h*xt,Je+=h*ht,er+=h*$t,ur+=h*jt,h=j[11],Fe+=h*wt,Be+=h*yt,Oe+=h*Et,Ue+=h*Dt,we+=h*bt,Ce+=h*vt,qe+=h*Ut,xe+=h*Mt,Ve+=h*St,We+=h*Lt,et+=h*It,tt+=h*At,Je+=h*xt,er+=h*ht,ur+=h*$t,Gr+=h*jt,h=j[12],Be+=h*wt,Oe+=h*yt,Ue+=h*Et,we+=h*Dt,Ce+=h*bt,qe+=h*vt,xe+=h*Ut,Ve+=h*Mt,We+=h*St,et+=h*Lt,tt+=h*It,Je+=h*At,er+=h*xt,ur+=h*ht,Gr+=h*$t,tr+=h*jt,h=j[13],Oe+=h*wt,Ue+=h*yt,we+=h*Et,Ce+=h*Dt,qe+=h*bt,xe+=h*vt,Ve+=h*Ut,We+=h*Mt,et+=h*St,tt+=h*Lt,Je+=h*It,er+=h*At,ur+=h*xt,Gr+=h*ht,tr+=h*$t,ni+=h*jt,h=j[14],Ue+=h*wt,we+=h*yt,Ce+=h*Et,qe+=h*Dt,xe+=h*bt,Ve+=h*vt,We+=h*Ut,et+=h*Mt,tt+=h*St,Je+=h*Lt,er+=h*It,ur+=h*At,Gr+=h*xt,tr+=h*ht,ni+=h*$t,_i+=h*jt,h=j[15],we+=h*wt,Ce+=h*yt,qe+=h*Et,xe+=h*Dt,Ve+=h*bt,We+=h*vt,et+=h*Ut,tt+=h*Mt,Je+=h*St,er+=h*Lt,ur+=h*It,Gr+=h*At,tr+=h*xt,ni+=h*ht,_i+=h*$t,Mi+=h*jt,se+=38*Ce,he+=38*qe,Ee+=38*xe,He+=38*Ve,ke+=38*We,Le+=38*et,pt+=38*tt,gt+=38*Je,je+=38*er,Ie+=38*ur,Re+=38*Gr,Fe+=38*tr,Be+=38*ni,Oe+=38*_i,Ue+=38*Mi,I=1,h=se+I+65535,I=Math.floor(h/65536),se=h-I*65536,h=he+I+65535,I=Math.floor(h/65536),he=h-I*65536,h=Ee+I+65535,I=Math.floor(h/65536),Ee=h-I*65536,h=He+I+65535,I=Math.floor(h/65536),He=h-I*65536,h=ke+I+65535,I=Math.floor(h/65536),ke=h-I*65536,h=Le+I+65535,I=Math.floor(h/65536),Le=h-I*65536,h=pt+I+65535,I=Math.floor(h/65536),pt=h-I*65536,h=gt+I+65535,I=Math.floor(h/65536),gt=h-I*65536,h=je+I+65535,I=Math.floor(h/65536),je=h-I*65536,h=Ie+I+65535,I=Math.floor(h/65536),Ie=h-I*65536,h=Re+I+65535,I=Math.floor(h/65536),Re=h-I*65536,h=Fe+I+65535,I=Math.floor(h/65536),Fe=h-I*65536,h=Be+I+65535,I=Math.floor(h/65536),Be=h-I*65536,h=Oe+I+65535,I=Math.floor(h/65536),Oe=h-I*65536,h=Ue+I+65535,I=Math.floor(h/65536),Ue=h-I*65536,h=we+I+65535,I=Math.floor(h/65536),we=h-I*65536,se+=I-1+37*(I-1),I=1,h=se+I+65535,I=Math.floor(h/65536),se=h-I*65536,h=he+I+65535,I=Math.floor(h/65536),he=h-I*65536,h=Ee+I+65535,I=Math.floor(h/65536),Ee=h-I*65536,h=He+I+65535,I=Math.floor(h/65536),He=h-I*65536,h=ke+I+65535,I=Math.floor(h/65536),ke=h-I*65536,h=Le+I+65535,I=Math.floor(h/65536),Le=h-I*65536,h=pt+I+65535,I=Math.floor(h/65536),pt=h-I*65536,h=gt+I+65535,I=Math.floor(h/65536),gt=h-I*65536,h=je+I+65535,I=Math.floor(h/65536),je=h-I*65536,h=Ie+I+65535,I=Math.floor(h/65536),Ie=h-I*65536,h=Re+I+65535,I=Math.floor(h/65536),Re=h-I*65536,h=Fe+I+65535,I=Math.floor(h/65536),Fe=h-I*65536,h=Be+I+65535,I=Math.floor(h/65536),Be=h-I*65536,h=Oe+I+65535,I=Math.floor(h/65536),Oe=h-I*65536,h=Ue+I+65535,I=Math.floor(h/65536),Ue=h-I*65536,h=we+I+65535,I=Math.floor(h/65536),we=h-I*65536,se+=I-1+37*(I-1),B[0]=se,B[1]=he,B[2]=Ee,B[3]=He,B[4]=ke,B[5]=Le,B[6]=pt,B[7]=gt,B[8]=je,B[9]=Ie,B[10]=Re,B[11]=Fe,B[12]=Be,B[13]=Oe,B[14]=Ue,B[15]=we}function _(B,j){u(B,j,j)}function Q(B,j){const F=a();let h;for(h=0;h<16;h++)F[h]=j[h];for(h=253;h>=0;h--)_(F,F),h!==2&&h!==4&&u(F,F,j);for(h=0;h<16;h++)B[h]=F[h]}function ne(B,j){const F=a();let h;for(h=0;h<16;h++)F[h]=j[h];for(h=250;h>=0;h--)_(F,F),h!==1&&u(F,F,j);for(h=0;h<16;h++)B[h]=F[h]}function ue(B,j){const F=a(),h=a(),I=a(),se=a(),he=a(),Ee=a(),He=a(),ke=a(),Le=a();O(F,B[1],B[0]),O(Le,j[1],j[0]),u(F,F,Le),x(h,B[0],B[1]),x(Le,j[0],j[1]),u(h,h,Le),u(I,B[3],j[3]),u(I,I,w),u(se,B[2],j[2]),x(se,se,se),O(he,h,F),O(Ee,se,I),x(He,se,I),x(ke,h,F),u(B[0],he,Ee),u(B[1],ke,He),u(B[2],He,Ee),u(B[3],he,ke)}function ge(B,j,F){for(let h=0;h<4;h++)G(B[h],j[h],F)}function ye(B,j){const F=a(),h=a(),I=a();Q(I,j[2]),u(F,j[0],I),u(h,j[1],I),q(B,h),B[31]^=M(F)<<7}function m(B,j,F){R(B[0],p),R(B[1],d),R(B[2],d),R(B[3],p);for(let h=255;h>=0;--h){const I=F[h/8|0]>>(h&7)&1;ge(B,j,I),ue(j,B),ue(B,B),ge(B,j,I)}}function C(B,j){const F=[a(),a(),a(),a()];R(F[0],S),R(F[1],N),R(F[2],d),u(F[3],S,N),m(B,F,j)}function Z(B){if(B.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const j=(0,r.hash)(B);j[0]&=248,j[31]&=127,j[31]|=64;const F=new Uint8Array(32),h=[a(),a(),a(),a()];C(h,j),ye(F,h);const I=new Uint8Array(64);return I.set(B),I.set(F,32),{publicKey:F,secretKey:I}}n.generateKeyPairFromSeed=Z;function J(B){const j=(0,e.randomBytes)(32,B),F=Z(j);return(0,s.wipe)(j),F}n.generateKeyPair=J;function K(B){if(B.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(B.subarray(32))}n.extractPublicKeyFromSecretKey=K;const k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ee(B,j){let F,h,I,se;for(h=63;h>=32;--h){for(F=0,I=h-32,se=h-12;I<se;++I)j[I]+=F-16*j[h]*k[I-(h-32)],F=Math.floor((j[I]+128)/256),j[I]-=F*256;j[I]+=F,j[h]=0}for(F=0,I=0;I<32;I++)j[I]+=F-(j[31]>>4)*k[I],F=j[I]>>8,j[I]&=255;for(I=0;I<32;I++)j[I]-=F*k[I];for(h=0;h<32;h++)j[h+1]+=j[h]>>8,B[h]=j[h]&255}function re(B){const j=new Float64Array(64);for(let F=0;F<64;F++)j[F]=B[F];for(let F=0;F<64;F++)B[F]=0;ee(B,j)}function De(B,j){const F=new Float64Array(64),h=[a(),a(),a(),a()],I=(0,r.hash)(B.subarray(0,32));I[0]&=248,I[31]&=127,I[31]|=64;const se=new Uint8Array(64);se.set(I.subarray(32),32);const he=new r.SHA512;he.update(se.subarray(32)),he.update(j);const Ee=he.digest();he.clean(),re(Ee),C(h,Ee),ye(se,h),he.reset(),he.update(se.subarray(0,32)),he.update(B.subarray(32)),he.update(j);const He=he.digest();re(He);for(let ke=0;ke<32;ke++)F[ke]=Ee[ke];for(let ke=0;ke<32;ke++)for(let Le=0;Le<32;Le++)F[ke+Le]+=He[ke]*I[Le];return ee(se.subarray(32),F),se}n.sign=De;function oe(B,j){const F=a(),h=a(),I=a(),se=a(),he=a(),Ee=a(),He=a();return R(B[2],d),E(B[1],j),_(I,B[1]),u(se,I,g),O(I,I,B[2]),x(se,B[2],se),_(he,se),_(Ee,he),u(He,Ee,he),u(F,He,I),u(F,F,se),ne(F,F),u(F,F,I),u(F,F,se),u(F,F,se),u(B[0],F,se),_(h,B[0]),u(h,h,se),T(h,I)&&u(B[0],B[0],z),_(h,B[0]),u(h,h,se),T(h,I)?-1:(M(B[0])===j[31]>>7&&O(B[0],p,B[0]),u(B[3],B[0],B[1]),0)}function Se(B,j,F){const h=new Uint8Array(32),I=[a(),a(),a(),a()],se=[a(),a(),a(),a()];if(F.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(oe(se,B))return!1;const he=new r.SHA512;he.update(F.subarray(0,32)),he.update(B),he.update(j);const Ee=he.digest();return re(Ee),m(I,se,Ee),C(se,F.subarray(32)),ue(I,se),ye(h,I),!ie(F,h)}n.verify=Se;function le(B){let j=[a(),a(),a(),a()];if(oe(j,B))throw new Error("Ed25519: invalid public key");let F=a(),h=a(),I=j[1];x(F,d,I),O(h,d,I),Q(h,h),u(F,F,h);let se=new Uint8Array(32);return q(se,F),se}n.convertPublicKeyToX25519=le;function Pe(B){const j=(0,r.hash)(B.subarray(0,32));j[0]&=248,j[31]&=127,j[31]|=64;const F=new Uint8Array(j.subarray(0,32));return(0,s.wipe)(j),F}n.convertSecretKeyToX25519=Pe})(Cu);const i6="EdDSA",n6="JWT",tp=".",rp="base64url",s6="utf8",o6="utf8",a6=":",c6="did",u6="key",gf="base58btc",h6="z",l6="K36",f6=32;function Mo(n){return cr(_r(ls(n),s6),rp)}function ip(n){const e=_r(l6,gf),r=h6+cr(Vc([e,n]),gf);return[c6,u6,r].join(a6)}function d6(n){return cr(n,rp)}function p6(n){return _r([Mo(n.header),Mo(n.payload)].join(tp),o6)}function g6(n){return[Mo(n.header),Mo(n.payload),d6(n.signature)].join(tp)}function yf(n=Rn.randomBytes(f6)){return Cu.generateKeyPairFromSeed(n)}async function y6(n,e,r,s,a=ve.fromMiliseconds(Date.now())){const l={alg:i6,typ:n6},p=ip(s.publicKey),d=a+r,g={iss:p,sub:n,aud:e,iat:a,exp:d},w=p6({header:l,payload:g}),S=Cu.sign(s.secretKey,w);return g6({header:l,payload:g,signature:S})}const v6="PARSE_ERROR",_6="INVALID_REQUEST",b6="METHOD_NOT_FOUND",m6="INVALID_PARAMS",np="INTERNAL_ERROR",Au="SERVER_ERROR",w6=[-32700,-32600,-32601,-32602,-32603],as={[v6]:{code:-32700,message:"Parse error"},[_6]:{code:-32600,message:"Invalid Request"},[b6]:{code:-32601,message:"Method not found"},[m6]:{code:-32602,message:"Invalid params"},[np]:{code:-32603,message:"Internal error"},[Au]:{code:-32e3,message:"Server error"}},sp=Au;function E6(n){return w6.includes(n)}function vf(n){return Object.keys(as).includes(n)?as[n]:as[sp]}function D6(n){const e=Object.values(as).find(r=>r.code===n);return e||as[sp]}function op(n,e,r){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):n}var ap={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.isBrowserCryptoAvailable=Pi.getSubtleCrypto=Pi.getBrowerCrypto=void 0;function Pu(){return(yr===null||yr===void 0?void 0:yr.crypto)||(yr===null||yr===void 0?void 0:yr.msCrypto)||{}}Pi.getBrowerCrypto=Pu;function cp(){const n=Pu();return n.subtle||n.webkitSubtle}Pi.getSubtleCrypto=cp;function S6(){return!!Pu()&&!!cp()}Pi.isBrowserCryptoAvailable=S6;var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.isBrowser=Ti.isNode=Ti.isReactNative=void 0;function up(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Ti.isReactNative=up;function hp(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Ti.isNode=hp;function I6(){return!up()&&!hp()}Ti.isBrowser=I6;(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=$r.exports;e.__exportStar(Pi,n),e.__exportStar(Ti,n)})(ap);function lp(n=3){const e=Date.now()*Math.pow(10,n),r=Math.floor(Math.random()*Math.pow(10,n));return e+r}function Tu(n=6){return BigInt(lp(n))}function Xo(n,e,r){return{id:r||lp(),jsonrpc:"2.0",method:n,params:e}}function Nu(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Zo(n,e,r){return{id:n,jsonrpc:"2.0",error:x6(e,r)}}function x6(n,e){return typeof n>"u"?vf(np):(typeof n=="string"&&(n=Object.assign(Object.assign({},vf(Au)),{message:n})),typeof e<"u"&&(n.data=e),E6(n.code)&&(n=D6(n.code)),n)}class O6{}class C6 extends O6{constructor(){super()}}class A6 extends C6{constructor(e){super()}}const P6="^https?:",T6="^wss?:";function N6(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function fp(n,e){const r=N6(n);return typeof r>"u"?!1:new RegExp(e).test(r)}function _f(n){return fp(n,P6)}function bf(n){return fp(n,T6)}function R6(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function dp(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function Ru(n){return dp(n)&&"method"in n}function Qo(n){return dp(n)&&(yi(n)||Vr(n))}function yi(n){return"result"in n}function Vr(n){return"error"in n}class Fi extends A6{constructor(e){super(e),this.events=new jr.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Xo(e.method,e.params||[],e.id||Tu().toString()),r)}async requestStrict(e,r){return new Promise(async(s,a)=>{if(!this.connection.connected)try{await this.open()}catch(l){a(l)}this.events.on(`${e.id}`,l=>{Vr(l)?a(l.error):s(l.result)});try{await this.connection.send(e,r)}catch(l){a(l)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Qo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const F6=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),U6=()=>typeof window<"u",mf=n=>n.split("?")[0],wf=10,M6=F6();class L6{constructor(e){if(this.url=e,this.events=new jr.exports.EventEmitter,this.registering=!1,!bf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ls(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!bf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,s)=>{const a=ap.isReactNative()?void 0:{rejectUnauthorized:!R6(e)},l=new M6(e,[],a);U6()?l.onerror=p=>{const d=p;s(this.emitError(d.error))}:l.on("error",p=>{s(this.emitError(p))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ou(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),a=s.message||s.toString(),l=Zo(e,a);this.events.emit("payload",l)}parseError(e,r=this.url){return op(e,mf(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>wf&&this.events.setMaxListeners(wf)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${mf(this.url)}`));return this.events.emit("register_error",r),r}}var tu={exports:{}};(function(n,e){var r=200,s="__lodash_hash_undefined__",a=1,l=2,p=9007199254740991,d="[object Arguments]",g="[object Array]",w="[object AsyncFunction]",S="[object Boolean]",N="[object Date]",z="[object Error]",R="[object Function]",P="[object GeneratorFunction]",G="[object Map]",q="[object Number]",ie="[object Null]",T="[object Object]",M="[object Promise]",E="[object Proxy]",x="[object RegExp]",O="[object Set]",u="[object String]",_="[object Symbol]",Q="[object Undefined]",ne="[object WeakMap]",ue="[object ArrayBuffer]",ge="[object DataView]",ye="[object Float32Array]",m="[object Float64Array]",C="[object Int8Array]",Z="[object Int16Array]",J="[object Int32Array]",K="[object Uint8Array]",k="[object Uint8ClampedArray]",ee="[object Uint16Array]",re="[object Uint32Array]",De=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,Se=/^(?:0|[1-9]\d*)$/,le={};le[ye]=le[m]=le[C]=le[Z]=le[J]=le[K]=le[k]=le[ee]=le[re]=!0,le[d]=le[g]=le[ue]=le[S]=le[ge]=le[N]=le[z]=le[R]=le[G]=le[q]=le[T]=le[x]=le[O]=le[u]=le[ne]=!1;var Pe=typeof yr=="object"&&yr&&yr.Object===Object&&yr,B=typeof self=="object"&&self&&self.Object===Object&&self,j=Pe||B||Function("return this")(),F=e&&!e.nodeType&&e,h=F&&!0&&n&&!n.nodeType&&n,I=h&&h.exports===F,se=I&&Pe.process,he=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),Ee=he&&he.isTypedArray;function He(b,U){for(var X=-1,fe=b==null?0:b.length,at=0,Te=[];++X<fe;){var ft=b[X];U(ft,X,b)&&(Te[at++]=ft)}return Te}function ke(b,U){for(var X=-1,fe=U.length,at=b.length;++X<fe;)b[at+X]=U[X];return b}function Le(b,U){for(var X=-1,fe=b==null?0:b.length;++X<fe;)if(U(b[X],X,b))return!0;return!1}function pt(b,U){for(var X=-1,fe=Array(b);++X<b;)fe[X]=U(X);return fe}function gt(b){return function(U){return b(U)}}function je(b,U){return b.has(U)}function Ie(b,U){return b?.[U]}function Re(b){var U=-1,X=Array(b.size);return b.forEach(function(fe,at){X[++U]=[at,fe]}),X}function Fe(b,U){return function(X){return b(U(X))}}function Be(b){var U=-1,X=Array(b.size);return b.forEach(function(fe){X[++U]=fe}),X}var Oe=Array.prototype,Ue=Function.prototype,we=Object.prototype,Ce=j["__core-js_shared__"],qe=Ue.toString,xe=we.hasOwnProperty,Ve=function(){var b=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),We=we.toString,et=RegExp("^"+qe.call(xe).replace(De,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=I?j.Buffer:void 0,Je=j.Symbol,er=j.Uint8Array,ur=we.propertyIsEnumerable,Gr=Oe.splice,tr=Je?Je.toStringTag:void 0,ni=Object.getOwnPropertySymbols,_i=tt?tt.isBuffer:void 0,Mi=Fe(Object.keys,Object),wt=br(j,"DataView"),yt=br(j,"Map"),Et=br(j,"Promise"),Dt=br(j,"Set"),bt=br(j,"WeakMap"),vt=br(Object,"create"),Ut=oi(wt),Mt=oi(yt),St=oi(Et),Lt=oi(Dt),It=oi(bt),At=Je?Je.prototype:void 0,xt=At?At.valueOf:void 0;function ht(b){var U=-1,X=b==null?0:b.length;for(this.clear();++U<X;){var fe=b[U];this.set(fe[0],fe[1])}}function $t(){this.__data__=vt?vt(null):{},this.size=0}function jt(b){var U=this.has(b)&&delete this.__data__[b];return this.size-=U?1:0,U}function ra(b){var U=this.__data__;if(vt){var X=U[b];return X===s?void 0:X}return xe.call(U,b)?U[b]:void 0}function ia(b){var U=this.__data__;return vt?U[b]!==void 0:xe.call(U,b)}function na(b,U){var X=this.__data__;return this.size+=this.has(b)?0:1,X[b]=vt&&U===void 0?s:U,this}ht.prototype.clear=$t,ht.prototype.delete=jt,ht.prototype.get=ra,ht.prototype.has=ia,ht.prototype.set=na;function xr(b){var U=-1,X=b==null?0:b.length;for(this.clear();++U<X;){var fe=b[U];this.set(fe[0],fe[1])}}function sa(){this.__data__=[],this.size=0}function oa(b){var U=this.__data__,X=Li(U,b);if(X<0)return!1;var fe=U.length-1;return X==fe?U.pop():Gr.call(U,X,1),--this.size,!0}function aa(b){var U=this.__data__,X=Li(U,b);return X<0?void 0:U[X][1]}function ca(b){return Li(this.__data__,b)>-1}function ua(b,U){var X=this.__data__,fe=Li(X,b);return fe<0?(++this.size,X.push([b,U])):X[fe][1]=U,this}xr.prototype.clear=sa,xr.prototype.delete=oa,xr.prototype.get=aa,xr.prototype.has=ca,xr.prototype.set=ua;function si(b){var U=-1,X=b==null?0:b.length;for(this.clear();++U<X;){var fe=b[U];this.set(fe[0],fe[1])}}function nn(){this.size=0,this.__data__={hash:new ht,map:new(yt||xr),string:new ht}}function ha(b){var U=bi(this,b).delete(b);return this.size-=U?1:0,U}function sn(b){return bi(this,b).get(b)}function la(b){return bi(this,b).has(b)}function fa(b,U){var X=bi(this,b),fe=X.size;return X.set(b,U),this.size+=X.size==fe?0:1,this}si.prototype.clear=nn,si.prototype.delete=ha,si.prototype.get=sn,si.prototype.has=la,si.prototype.set=fa;function on(b){var U=-1,X=b==null?0:b.length;for(this.__data__=new si;++U<X;)this.add(b[U])}function bs(b){return this.__data__.set(b,s),this}function ms(b){return this.__data__.has(b)}on.prototype.add=on.prototype.push=bs,on.prototype.has=ms;function Br(b){var U=this.__data__=new xr(b);this.size=U.size}function da(){this.__data__=new xr,this.size=0}function pa(b){var U=this.__data__,X=U.delete(b);return this.size=U.size,X}function ga(b){return this.__data__.get(b)}function ya(b){return this.__data__.has(b)}function ws(b,U){var X=this.__data__;if(X instanceof xr){var fe=X.__data__;if(!yt||fe.length<r-1)return fe.push([b,U]),this.size=++X.size,this;X=this.__data__=new si(fe)}return X.set(b,U),this.size=X.size,this}Br.prototype.clear=da,Br.prototype.delete=pa,Br.prototype.get=ga,Br.prototype.has=ya,Br.prototype.set=ws;function Es(b,U){var X=un(b),fe=!X&&Fs(b),at=!X&&!fe&&jn(b),Te=!X&&!fe&&!at&&Ls(b),ft=X||fe||at||Te,Bt=ft?pt(b.length,String):[],Xe=Bt.length;for(var ct in b)(U||xe.call(b,ct))&&!(ft&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||As(ct,Xe)))&&Bt.push(ct);return Bt}function Li(b,U){for(var X=b.length;X--;)if(Rs(b[X][0],U))return X;return-1}function Ln(b,U,X){var fe=U(b);return un(b)?fe:ke(fe,X(b))}function $i(b){return b==null?b===void 0?Q:ie:tr&&tr in Object(b)?Os(b):ba(b)}function $n(b){return Bi(b)&&$i(b)==d}function ji(b,U,X,fe,at){return b===U?!0:b==null||U==null||!Bi(b)&&!Bi(U)?b!==b&&U!==U:Ds(b,U,X,fe,ji,at)}function Ds(b,U,X,fe,at,Te){var ft=un(b),Bt=un(U),Xe=ft?g:Wr(b),ct=Bt?g:Wr(U);Xe=Xe==d?T:Xe,ct=ct==d?T:ct;var Pt=Xe==T,hr=ct==T,zt=Xe==ct;if(zt&&jn(b)){if(!jn(U))return!1;ft=!0,Pt=!1}if(zt&&!Pt)return Te||(Te=new Br),ft||Ls(b)?an(b,U,X,fe,at,Te):_a(b,U,Xe,X,fe,at,Te);if(!(X&a)){var dt=Pt&&xe.call(b,"__wrapped__"),rr=hr&&xe.call(U,"__wrapped__");if(dt||rr){var zr=dt?b.value():b,Or=rr?U.value():U;return Te||(Te=new Br),at(zr,Or,X,fe,Te)}}return zt?(Te||(Te=new Br),xs(b,U,X,fe,at,Te)):!1}function va(b){if(!Ms(b)||Ts(b))return!1;var U=hn(b)?et:oe;return U.test(oi(b))}function Ss(b){return Bi(b)&&Us(b.length)&&!!le[$i(b)]}function Is(b){if(!Ns(b))return Mi(b);var U=[];for(var X in Object(b))xe.call(b,X)&&X!="constructor"&&U.push(X);return U}function an(b,U,X,fe,at,Te){var ft=X&a,Bt=b.length,Xe=U.length;if(Bt!=Xe&&!(ft&&Xe>Bt))return!1;var ct=Te.get(b);if(ct&&Te.get(U))return ct==U;var Pt=-1,hr=!0,zt=X&l?new on:void 0;for(Te.set(b,U),Te.set(U,b);++Pt<Bt;){var dt=b[Pt],rr=U[Pt];if(fe)var zr=ft?fe(rr,dt,Pt,U,b,Te):fe(dt,rr,Pt,b,U,Te);if(zr!==void 0){if(zr)continue;hr=!1;break}if(zt){if(!Le(U,function(Or,Yr){if(!je(zt,Yr)&&(dt===Or||at(dt,Or,X,fe,Te)))return zt.push(Yr)})){hr=!1;break}}else if(!(dt===rr||at(dt,rr,X,fe,Te))){hr=!1;break}}return Te.delete(b),Te.delete(U),hr}function _a(b,U,X,fe,at,Te,ft){switch(X){case ge:if(b.byteLength!=U.byteLength||b.byteOffset!=U.byteOffset)return!1;b=b.buffer,U=U.buffer;case ue:return!(b.byteLength!=U.byteLength||!Te(new er(b),new er(U)));case S:case N:case q:return Rs(+b,+U);case z:return b.name==U.name&&b.message==U.message;case x:case u:return b==U+"";case G:var Bt=Re;case O:var Xe=fe&a;if(Bt||(Bt=Be),b.size!=U.size&&!Xe)return!1;var ct=ft.get(b);if(ct)return ct==U;fe|=l,ft.set(b,U);var Pt=an(Bt(b),Bt(U),fe,at,Te,ft);return ft.delete(b),Pt;case _:if(xt)return xt.call(b)==xt.call(U)}return!1}function xs(b,U,X,fe,at,Te){var ft=X&a,Bt=cn(b),Xe=Bt.length,ct=cn(U),Pt=ct.length;if(Xe!=Pt&&!ft)return!1;for(var hr=Xe;hr--;){var zt=Bt[hr];if(!(ft?zt in U:xe.call(U,zt)))return!1}var dt=Te.get(b);if(dt&&Te.get(U))return dt==U;var rr=!0;Te.set(b,U),Te.set(U,b);for(var zr=ft;++hr<Xe;){zt=Bt[hr];var Or=b[zt],Yr=U[zt];if(fe)var Bn=ft?fe(Yr,Or,zt,U,b,Te):fe(Or,Yr,zt,b,U,Te);if(!(Bn===void 0?Or===Yr||at(Or,Yr,X,fe,Te):Bn)){rr=!1;break}zr||(zr=zt=="constructor")}if(rr&&!zr){var zi=b.constructor,kt=U.constructor;zi!=kt&&"constructor"in b&&"constructor"in U&&!(typeof zi=="function"&&zi instanceof zi&&typeof kt=="function"&&kt instanceof kt)&&(rr=!1)}return Te.delete(b),Te.delete(U),rr}function cn(b){return Ln(b,Ea,Cs)}function bi(b,U){var X=b.__data__;return Ps(U)?X[typeof U=="string"?"string":"hash"]:X.map}function br(b,U){var X=Ie(b,U);return va(X)?X:void 0}function Os(b){var U=xe.call(b,tr),X=b[tr];try{b[tr]=void 0;var fe=!0}catch{}var at=We.call(b);return fe&&(U?b[tr]=X:delete b[tr]),at}var Cs=ni?function(b){return b==null?[]:(b=Object(b),He(ni(b),function(U){return ur.call(b,U)}))}:ot,Wr=$i;(wt&&Wr(new wt(new ArrayBuffer(1)))!=ge||yt&&Wr(new yt)!=G||Et&&Wr(Et.resolve())!=M||Dt&&Wr(new Dt)!=O||bt&&Wr(new bt)!=ne)&&(Wr=function(b){var U=$i(b),X=U==T?b.constructor:void 0,fe=X?oi(X):"";if(fe)switch(fe){case Ut:return ge;case Mt:return G;case St:return M;case Lt:return O;case It:return ne}return U});function As(b,U){return U=U??p,!!U&&(typeof b=="number"||Se.test(b))&&b>-1&&b%1==0&&b<U}function Ps(b){var U=typeof b;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?b!=="__proto__":b===null}function Ts(b){return!!Ve&&Ve in b}function Ns(b){var U=b&&b.constructor,X=typeof U=="function"&&U.prototype||we;return b===X}function ba(b){return We.call(b)}function oi(b){if(b!=null){try{return qe.call(b)}catch{}try{return b+""}catch{}}return""}function Rs(b,U){return b===U||b!==b&&U!==U}var Fs=$n(function(){return arguments}())?$n:function(b){return Bi(b)&&xe.call(b,"callee")&&!ur.call(b,"callee")},un=Array.isArray;function ma(b){return b!=null&&Us(b.length)&&!hn(b)}var jn=_i||st;function wa(b,U){return ji(b,U)}function hn(b){if(!Ms(b))return!1;var U=$i(b);return U==R||U==P||U==w||U==E}function Us(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=p}function Ms(b){var U=typeof b;return b!=null&&(U=="object"||U=="function")}function Bi(b){return b!=null&&typeof b=="object"}var Ls=Ee?gt(Ee):Ss;function Ea(b){return ma(b)?Es(b):Is(b)}function ot(){return[]}function st(){return!1}n.exports=wa})(tu,tu.exports);var $6=tu.exports;function j6(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var l=n.charAt(a),p=l.charCodeAt(0);if(r[p]!==255)throw new TypeError(l+" is ambiguous");r[p]=a}var d=n.length,g=n.charAt(0),w=Math.log(d)/Math.log(256),S=Math.log(256)/Math.log(d);function N(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var G=0,q=0,ie=0,T=P.length;ie!==T&&P[ie]===0;)ie++,G++;for(var M=(T-ie)*S+1>>>0,E=new Uint8Array(M);ie!==T;){for(var x=P[ie],O=0,u=M-1;(x!==0||O<q)&&u!==-1;u--,O++)x+=256*E[u]>>>0,E[u]=x%d>>>0,x=x/d>>>0;if(x!==0)throw new Error("Non-zero carry");q=O,ie++}for(var _=M-q;_!==M&&E[_]===0;)_++;for(var Q=g.repeat(G);_<M;++_)Q+=n.charAt(E[_]);return Q}function z(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var G=0;if(P[G]!==" "){for(var q=0,ie=0;P[G]===g;)q++,G++;for(var T=(P.length-G)*w+1>>>0,M=new Uint8Array(T);P[G];){var E=r[P.charCodeAt(G)];if(E===255)return;for(var x=0,O=T-1;(E!==0||x<ie)&&O!==-1;O--,x++)E+=d*M[O]>>>0,M[O]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");ie=x,G++}if(P[G]!==" "){for(var u=T-ie;u!==T&&M[u]===0;)u++;for(var _=new Uint8Array(q+(T-u)),Q=q;u!==T;)_[Q++]=M[u++];return _}}}function R(P){var G=z(P);if(G)return G;throw new Error(`Non-${e} character`)}return{encode:N,decodeUnsafe:z,decode:R}}var B6=j6,z6=B6;const pp=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},H6=n=>new TextEncoder().encode(n),q6=n=>new TextDecoder().decode(n);class K6{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class k6{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return gp(this,e)}}class V6{constructor(e){this.decoders=e}or(e){return gp(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const gp=(n,e)=>new V6({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class G6{constructor(e,r,s,a){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new K6(e,r,s),this.decoder=new k6(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ea=({name:n,prefix:e,encode:r,decode:s})=>new G6(n,e,r,s),_s=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:a}=z6(r,e);return ea({prefix:n,name:e,encode:s,decode:l=>pp(a(l))})},W6=(n,e,r,s)=>{const a={};for(let S=0;S<e.length;++S)a[e[S]]=S;let l=n.length;for(;n[l-1]==="=";)--l;const p=new Uint8Array(l*r/8|0);let d=0,g=0,w=0;for(let S=0;S<l;++S){const N=a[n[S]];if(N===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<r|N,d+=r,d>=8&&(d-=8,p[w++]=255&g>>d)}if(d>=r||255&g<<8-d)throw new SyntaxError("Unexpected end of data");return p},Y6=(n,e,r)=>{const s=e[e.length-1]==="=",a=(1<<r)-1;let l="",p=0,d=0;for(let g=0;g<n.length;++g)for(d=d<<8|n[g],p+=8;p>r;)p-=r,l+=e[a&d>>p];if(p&&(l+=e[a&d<<r-p]),s)for(;l.length*r&7;)l+="=";return l},Jt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>ea({prefix:e,name:n,encode(a){return Y6(a,s,r)},decode(a){return W6(a,s,r,n)}}),J6=ea({prefix:"\0",name:"identity",encode:n=>q6(n),decode:n=>H6(n)});var X6=Object.freeze({__proto__:null,identity:J6});const Z6=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Q6=Object.freeze({__proto__:null,base2:Z6});const e2=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var t2=Object.freeze({__proto__:null,base8:e2});const r2=_s({prefix:"9",name:"base10",alphabet:"0123456789"});var i2=Object.freeze({__proto__:null,base10:r2});const n2=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),s2=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var o2=Object.freeze({__proto__:null,base16:n2,base16upper:s2});const a2=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),c2=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),u2=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),h2=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),l2=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),f2=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),d2=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),p2=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),g2=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var y2=Object.freeze({__proto__:null,base32:a2,base32upper:c2,base32pad:u2,base32padupper:h2,base32hex:l2,base32hexupper:f2,base32hexpad:d2,base32hexpadupper:p2,base32z:g2});const v2=_s({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_2=_s({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var b2=Object.freeze({__proto__:null,base36:v2,base36upper:_2});const m2=_s({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),w2=_s({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var E2=Object.freeze({__proto__:null,base58btc:m2,base58flickr:w2});const D2=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),S2=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),I2=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),x2=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var O2=Object.freeze({__proto__:null,base64:D2,base64pad:S2,base64url:I2,base64urlpad:x2});const yp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),C2=yp.reduce((n,e,r)=>(n[r]=e,n),[]),A2=yp.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function P2(n){return n.reduce((e,r)=>(e+=C2[r],e),"")}function T2(n){const e=[];for(const r of n){const s=A2[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const N2=ea({prefix:"\u{1F680}",name:"base256emoji",encode:P2,decode:T2});var R2=Object.freeze({__proto__:null,base256emoji:N2}),F2=vp,Ef=128,U2=127,M2=~U2,L2=Math.pow(2,31);function vp(n,e,r){e=e||[],r=r||0;for(var s=r;n>=L2;)e[r++]=n&255|Ef,n/=128;for(;n&M2;)e[r++]=n&255|Ef,n>>>=7;return e[r]=n|0,vp.bytes=r-s+1,e}var $2=ru,j2=128,Df=127;function ru(n,s){var r=0,s=s||0,a=0,l=s,p,d=n.length;do{if(l>=d)throw ru.bytes=0,new RangeError("Could not decode varint");p=n[l++],r+=a<28?(p&Df)<<a:(p&Df)*Math.pow(2,a),a+=7}while(p>=j2);return ru.bytes=l-s,r}var B2=Math.pow(2,7),z2=Math.pow(2,14),H2=Math.pow(2,21),q2=Math.pow(2,28),K2=Math.pow(2,35),k2=Math.pow(2,42),V2=Math.pow(2,49),G2=Math.pow(2,56),W2=Math.pow(2,63),Y2=function(n){return n<B2?1:n<z2?2:n<H2?3:n<q2?4:n<K2?5:n<k2?6:n<V2?7:n<G2?8:n<W2?9:10},J2={encode:F2,decode:$2,encodingLength:Y2},_p=J2;const Sf=(n,e,r=0)=>(_p.encode(n,e,r),e),If=n=>_p.encodingLength(n),iu=(n,e)=>{const r=e.byteLength,s=If(n),a=s+If(r),l=new Uint8Array(a+r);return Sf(n,l,0),Sf(r,l,s),l.set(e,a),new X2(n,r,e,l)};class X2{constructor(e,r,s,a){this.code=e,this.size=r,this.digest=s,this.bytes=a}}const bp=({name:n,code:e,encode:r})=>new Z2(n,e,r);class Z2{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?iu(this.code,r):r.then(s=>iu(this.code,s))}else throw Error("Unknown type, must be binary type")}}const mp=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Q2=bp({name:"sha2-256",code:18,encode:mp("SHA-256")}),eD=bp({name:"sha2-512",code:19,encode:mp("SHA-512")});var tD=Object.freeze({__proto__:null,sha256:Q2,sha512:eD});const wp=0,rD="identity",Ep=pp,iD=n=>iu(wp,Ep(n)),nD={code:wp,name:rD,encode:Ep,digest:iD};var sD=Object.freeze({__proto__:null,identity:nD});new TextEncoder,new TextDecoder;const xf={...X6,...Q6,...t2,...i2,...o2,...y2,...b2,...E2,...O2,...R2};({...tD,...sD});function Dp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function oD(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Dp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Sp(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const Of=Sp("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Tc=Sp("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=oD(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),aD={utf8:Of,"utf-8":Of,hex:xf.base16,latin1:Tc,ascii:Tc,binary:Tc,...xf};function cD(n,e="utf8"){const r=aD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Dp(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const Ip="wc",uD=2,Fu="core",Ni=`${Ip}@2:${Fu}:`,hD={name:Fu,logger:"error"},lD={database:":memory:"},fD="crypto",Cf="client_ed25519_seed",dD=ve.ONE_DAY,pD="keychain",gD="0.3",yD="messages",vD="0.3",_D=ve.SIX_HOURS,bD="publisher",xp="irn",mD="error",Op="wss://relay.walletconnect.com",wD="relayer",Ct={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ED="_subscription",rs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},DD=ve.ONE_SECOND/2,SD="2.8.4",ID=1e4,xD="0.3",OD="WALLETCONNECT_CLIENT_ID",ti={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},CD="subscription",AD="0.3",PD=ve.FIVE_SECONDS*1e3,TD="pairing",ND="0.3",is={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},ei={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},RD="history",FD="0.3",UD="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},MD="0.3",Nc="verify-api",Af="https://verify.walletconnect.com";class LD{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=pD,this.version=gD,this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:l}=ce("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(l)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,jd(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Bd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $D{constructor(e,r,s){this.core=e,this.logger=r,this.name=fD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),l=yf(a);return ip(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=sE();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const l=await this.getClientSeed(),p=yf(l),d=Zc();return await y6(d,a,dD,p)},this.generateSharedKey=(a,l,p)=>{this.isInitialized();const d=this.getPrivateKey(a),g=oE(d,l);return this.setSymKey(g,p)},this.setSymKey=async(a,l)=>{this.isInitialized();const p=l||aE(a);return await this.keychain.set(p,a),p},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,l,p)=>{this.isInitialized();const d=Md(p),g=ls(l);if(rf(d)){const z=d.senderPublicKey,R=d.receiverPublicKey;a=await this.generateSharedKey(z,R)}const w=this.getSymKey(a),{type:S,senderPublicKey:N}=d;return uE({type:S,symKey:w,message:g,senderPublicKey:N})},this.decode=async(a,l,p)=>{this.isInitialized();const d=fE(l,p);if(rf(d)){const S=d.receiverPublicKey,N=d.senderPublicKey;a=await this.generateSharedKey(S,N)}const g=this.getSymKey(a),w=hE({symKey:g,encoded:l});return Ou(w)},this.getPayloadType=a=>{const l=Fo(a);return gs(l.type)},this.getPayloadSenderPublicKey=a=>{const l=Fo(a);return l.senderPublicKey?cr(l.senderPublicKey,ar):void 0},this.core=e,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=s||new LD(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Cf)}catch{e=Zc(),await this.keychain.set(Cf,e)}return cD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class jD extends V3{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=yD,this.version=vD,this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const l=Cn(a);let p=this.messages.get(s);return typeof p>"u"&&(p={}),typeof p[l]<"u"||(p[l]=a,this.messages.set(s,p),await this.persist()),l},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const l=this.get(s),p=Cn(a);return typeof l[p]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(e,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,jd(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Bd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class BD extends G3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new jr.exports.EventEmitter,this.name=bD,this.queue=new Map,this.publishTimeout=ve.toMiliseconds(ve.TEN_SECONDS),this.queueTimeout=ve.toMiliseconds(ve.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,a,l)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}});try{const p=l?.ttl||_D,d=Qc(l),g=l?.prompt||!1,w=l?.tag||0,S=l?.id||Tu().toString(),N={topic:s,message:a,opts:{ttl:p,relay:d,prompt:g,tag:w,id:S}},z=setTimeout(()=>this.queue.set(S,N),this.queueTimeout);try{await await Uo(this.rpcPublish(s,a,p,d,g,w,S),this.publishTimeout),clearTimeout(z),this.relayer.events.emit(Ct.publish,N)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}})}catch(p){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(p),p}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=e,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(e,r,s,a,l,p,d){var g,w,S,N;const z={method:Co(a.protocol).publish,params:{topic:e,message:r,ttl:s,prompt:l,tag:p},id:d};return or((g=z.params)==null?void 0:g.prompt)&&((w=z.params)==null||delete w.prompt),or((S=z.params)==null?void 0:S.tag)&&((N=z.params)==null||delete N.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:z}),this.relayer.request(z)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:s,opts:a}=e;await this.publish(r,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(vs.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ct.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ct.message_ack,e=>{this.onPublish(e.id.toString())})}}class zD{constructor(){this.map=new Map,this.set=(e,r)=>{const s=this.get(e);this.exists(e,r)||this.map.set(e,[...s,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,r))return;const a=s.filter(l=>l!==r);if(!a.length){this.map.delete(e);return}this.map.set(e,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var HD=Object.defineProperty,qD=Object.defineProperties,KD=Object.getOwnPropertyDescriptors,Pf=Object.getOwnPropertySymbols,kD=Object.prototype.hasOwnProperty,VD=Object.prototype.propertyIsEnumerable,Tf=(n,e,r)=>e in n?HD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ns=(n,e)=>{for(var r in e||(e={}))kD.call(e,r)&&Tf(n,r,e[r]);if(Pf)for(var r of Pf(e))VD.call(e,r)&&Tf(n,r,e[r]);return n},Rc=(n,e)=>qD(n,KD(e));class GD extends J3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new zD,this.events=new jr.exports.EventEmitter,this.name=CD,this.version=AD,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ni,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const l=Qc(a),p={topic:s,relay:l};this.pending.set(s,p);const d=await this.rpcSubscribe(s,l);return this.onSubscribe(d,p),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),d}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof a?.id<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,l)=>{const p=new ve.Watch;p.start(this.pendingSubscriptionWatchLabel);const d=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(d),p.stop(this.pendingSubscriptionWatchLabel),a(!0)),p.elapsed(this.pendingSubscriptionWatchLabel)>=PD&&(clearInterval(d),p.stop(this.pendingSubscriptionWatchLabel),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let s=!1;try{s=this.getSubscription(e).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const s=this.topicMap.get(e);await Promise.all(s.map(async a=>await this.unsubscribeById(e,a,r)))}async unsubscribeById(e,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}});try{const a=Qc(s);await this.rpcUnsubscribe(e,r,a);const l=Rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(e,r){const s={method:Co(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Uo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}return Cn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,s={method:Co(r.protocol).batchSubscribe,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Uo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}}rpcUnsubscribe(e,r,s){const a={method:Co(s.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(e,r){this.setSubscription(e,Rc(ns({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,ns({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,ns({},r)),this.topicMap.set(r.topic,e),this.events.emit(ti.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ti.deleted,Rc(ns({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ti.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ti.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);vi(r)&&this.onBatchSubscribe(r.map((s,a)=>Rc(ns({},e[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(vs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ct.connect,async()=>{await this.onConnect()}),this.relayer.on(Ct.disconnect,()=>{this.onDisconnect()}),this.events.on(ti.created,async e=>{const r=ti.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(ti.deleted,async e=>{const r=ti.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var WD=Object.defineProperty,Nf=Object.getOwnPropertySymbols,YD=Object.prototype.hasOwnProperty,JD=Object.prototype.propertyIsEnumerable,Rf=(n,e,r)=>e in n?WD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,XD=(n,e)=>{for(var r in e||(e={}))YD.call(e,r)&&Rf(n,r,e[r]);if(Nf)for(var r of Nf(e))JD.call(e,r)&&Rf(n,r,e[r]);return n};class ZD extends W3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new jr.exports.EventEmitter,this.name=wD,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qe.generateChildLogger(e.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:e.logger||mD})),this.messages=new jD(this.logger,e.core),this.subscriber=new GD(this,this.logger),this.publisher=new BD(this,this.logger),this.relayUrl=e?.relayUrl||Op,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribted to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},ID)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,s){this.isInitialized(),await this.publisher.publish(e,r,s),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var s;this.isInitialized();let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return a||(await Promise.all([new Promise(l=>{this.subscriber.once(ti.created,p=>{p.topic===e&&l()})}),new Promise(async l=>{a=await this.subscriber.subscribe(e,r),l()})]),a)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ct.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(ti.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await Uo(this.provider.connect(),5e3,"socket stalled").catch(a=>s(a)).then(()=>r()).finally(()=>this.removeListener(Ct.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(Ct.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(Ct.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(rs.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fi(new L6(DE({sdkVersion:SD,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:s}=e;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(e){const{topic:r,message:s}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ru(e)){if(!e.method.endsWith(ED))return;const r=e.params,{topic:s,message:a,publishedAt:l}=r.data,p={topic:s,message:a,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(XD({type:"event",event:r.id},p)),this.events.emit(r.id,p),await this.acknowledgePayload(e),await this.onMessageEvent(p)}else Qo(e)&&this.events.emit(Ct.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ct.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Nu(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(rs.payload,e=>this.onProviderPayload(e)),this.provider.on(rs.connect,()=>{this.events.emit(Ct.connect)}),this.provider.on(rs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(rs.error,e=>{this.logger.error(e),this.events.emit(Ct.error,e)})}registerEventListeners(){this.events.on(Ct.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ct.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ve.toMiliseconds(DD))}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var QD=Object.defineProperty,Ff=Object.getOwnPropertySymbols,e5=Object.prototype.hasOwnProperty,t5=Object.prototype.propertyIsEnumerable,Uf=(n,e,r)=>e in n?QD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Mf=(n,e)=>{for(var r in e||(e={}))e5.call(e,r)&&Uf(n,r,e[r]);if(Ff)for(var r of Ff(e))t5.call(e,r)&&Uf(n,r,e[r]);return n};class ta extends Y3{constructor(e,r,s,a=Ni,l=void 0){super(e,r,s,a),this.core=e,this.logger=r,this.name=s,this.map=new Map,this.version=xD,this.cached=[],this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(p=>{this.getKey&&p!==null&&!or(p)?this.map.set(this.getKey(p),p):VE(p)?this.map.set(p.id,p):GE(p)&&this.map.set(p.topic,p)}),this.cached=[],this.initialized=!0)},this.set=async(p,d)=>{this.isInitialized(),this.map.has(p)?await this.update(p,d):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:p,value:d}),this.map.set(p,d),await this.persist())},this.get=p=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:p}),this.getData(p)),this.getAll=p=>(this.isInitialized(),p?this.values.filter(d=>Object.keys(p).every(g=>$6(d[g],p[g]))):this.values),this.update=async(p,d)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:p,update:d});const g=Mf(Mf({},this.getData(p)),d);this.map.set(p,g),await this.persist()},this.delete=async(p,d)=>{this.isInitialized(),this.map.has(p)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:p,reason:d}),this.map.delete(p),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=l}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class r5{constructor(e,r){this.core=e,this.logger=r,this.name=TD,this.version=ND,this.events=new hu,this.initialized=!1,this.storagePrefix=Ni,this.ignoredPayloadTypes=[en],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Zc(),a=await this.core.crypto.setSymKey(s),l=ri(ve.FIVE_MINUTES),p={protocol:xp},d={topic:a,expiry:l,relay:p,active:!1},g=ME({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:p});return await this.pairings.set(a,d),await this.core.relayer.subscribe(a),this.core.expirer.set(a,l),{topic:a,uri:g}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:l,relay:p}=RE(s.uri);if(this.pairings.keys.includes(a))throw new Error(`Pairing already exists: ${a}`);if(this.core.crypto.hasKeys(a))throw new Error(`Keychain already exists: ${a}`);const d=ri(ve.FIVE_MINUTES),g={topic:a,relay:p,expiry:d,active:!1};return await this.pairings.set(a,g),await this.core.crypto.setSymKey(l,a),await this.core.relayer.subscribe(a,{relay:p}),this.core.expirer.set(a,d),s.activatePairing&&await this.activate({topic:a}),g},this.activate=async({topic:s})=>{this.isInitialized();const a=ri(ve.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const l=await this.sendRequest(a,"wc_pairingPing",{}),{done:p,resolve:d,reject:g}=xn();this.events.once(Ht("pairing_ping",l),({error:w})=>{w?g(w):d()}),await p()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",Rt("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,l)=>{const p=Xo(a,l),d=await this.core.crypto.encode(s,p),g=is[a].req;return this.core.history.set(s,p),this.core.relayer.publish(s,d,g),p.id},this.sendResult=async(s,a,l)=>{const p=Nu(s,l),d=await this.core.crypto.encode(a,p),g=await this.core.history.get(a,s),w=is[g.request.method].res;await this.core.relayer.publish(a,d,w),await this.core.history.resolve(p)},this.sendError=async(s,a,l)=>{const p=Zo(s,l),d=await this.core.crypto.encode(a,p),g=await this.core.history.get(a,s),w=is[g.request.method]?is[g.request.method].res:is.unregistered_method.res;await this.core.relayer.publish(a,d,w),await this.core.history.resolve(p)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>Ai(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:l}=s,p=l.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingRequest(a,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,l);default:return this.onUnknownRpcMethodRequest(a,l)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:l}=s,p=(await this.core.history.get(a,l.id)).request.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingResponse(a,l);default:return this.onUnknownRpcMethodResponse(p)}},this.onPairingPingRequest=async(s,a)=>{const{id:l}=a;try{this.isValidPing({topic:s}),await this.sendResult(l,s,!0),this.events.emit("pairing_ping",{id:l,topic:s})}catch(p){await this.sendError(l,s,p),this.logger.error(p)}},this.onPairingPingResponse=(s,a)=>{const{id:l}=a;setTimeout(()=>{yi(a)?this.events.emit(Ht("pairing_ping",l),{}):Vr(a)&&this.events.emit(Ht("pairing_ping",l),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:l}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:l,topic:s})}catch(p){await this.sendError(l,s,p),this.logger.error(p)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:l,method:p}=a;try{if(this.registeredMethods.includes(p))return;const d=Rt("WC_METHOD_UNSUPPORTED",p);await this.sendError(l,s,d),this.logger.error(d)}catch(d){await this.sendError(l,s,d),this.logger.error(d)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Rt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!gr(s)){const{message:a}=ce("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(a)}if(!kE(s.uri)){const{message:a}=ce("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(a)}},this.isValidPing=async s=>{if(!gr(s)){const{message:l}=ce("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!gr(s)){const{message:l}=ce("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:a}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(Ai(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=ce("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=e,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new ta(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ct.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(r,s);Ru(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Qo(a)&&(await this.core.history.resolve(a),this.onRelayEventResponse({topic:r,payload:a}))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:r}=Hd(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class i5 extends k3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new jr.exports.EventEmitter,this.name=RD,this.version=FD,this.cached=[],this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:l}),this.records.has(a.id))return;const p={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:l};this.records.set(p.id,p),this.events.emit(ei.created,p)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=Vr(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(ei.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(l=>{if(l.topic===s){if(typeof a<"u"&&l.id!==a)return;this.records.delete(l.id),this.events.emit(ei.deleted,l)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Xo(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ei.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ei.created,e=>{const r=ei.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ei.updated,e=>{const r=ei.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ei.deleted,e=>{const r=ei.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class n5 extends X3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new jr.exports.EventEmitter,this.name=UD,this.version=MD,this.cached=[],this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const l=this.formatTarget(s),p={target:l,expiry:a};this.expirations.set(l,p),this.checkExpiry(l,p),this.events.emit(Mr.created,{target:l,expiration:p})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),l=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Mr.deleted,{target:a,expiration:l})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return SE(e);if(typeof e=="number")return IE(e);const{message:r}=ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:s}=ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(e,r){const{expiry:s}=r;ve.toMiliseconds(s)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(vs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const r=Mr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const r=Mr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const r=Mr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}class s5 extends Z3{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Nc,this.initialized=!1,this.init=async s=>{Ld()||!wu()||(this.verifyUrl=s?.verifyUrl||Af,await this.createIframe())},this.register=async s=>{var a;if(this.initialized||await this.init(),!!this.iframe)try{(a=this.iframe.contentWindow)==null||a.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var a;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const l=this.startAbortTimer(ve.FIVE_SECONDS),p=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(l),p.status===200?(a=await p.json())==null?void 0:a.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,a)=>{if(document.getElementById(Nc))return s();const l=document.createElement("iframe");l.setAttribute("id",Nc),l.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),l.style.display="none",l.addEventListener("load",()=>{this.initialized=!0,s()}),l.addEventListener("error",p=>{a(p)}),document.body.append(l),this.iframe=l}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ve.toMiliseconds(ve.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=Af,this.abortController=new AbortController,this.isDevEnv=mu()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}var o5=Object.defineProperty,Lf=Object.getOwnPropertySymbols,a5=Object.prototype.hasOwnProperty,c5=Object.prototype.propertyIsEnumerable,$f=(n,e,r)=>e in n?o5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,jf=(n,e)=>{for(var r in e||(e={}))a5.call(e,r)&&$f(n,r,e[r]);if(Lf)for(var r of Lf(e))c5.call(e,r)&&$f(n,r,e[r]);return n};class Uu extends K3{constructor(e){super(e),this.protocol=Ip,this.version=uD,this.name=Fu,this.events=new jr.exports.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Op;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:e?.logger||hD.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new vs.HeartBeat,this.crypto=new $D(this,this.logger,e?.keychain),this.history=new i5(this,this.logger),this.expirer=new n5(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new b3(jf(jf({},lD),e?.storageOptions)),this.relayer=new ZD({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new r5(this,this.logger),this.verify=new s5(this.projectId||"",this.logger)}static async init(e){const r=new Uu(e);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(OD,s),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const u5=Uu,Cp="wc",Ap=2,Pp="client",Mu=`${Cp}@${Ap}:${Pp}:`,Fc={name:Pp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},h5="WALLETCONNECT_DEEPLINK_CHOICE",l5="proposal",Tp="Proposal expired",f5="session",Io=ve.SEVEN_DAYS,d5="engine",ss={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},Uc={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},p5="request",g5=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var y5=Object.defineProperty,v5=Object.defineProperties,_5=Object.getOwnPropertyDescriptors,Bf=Object.getOwnPropertySymbols,b5=Object.prototype.hasOwnProperty,m5=Object.prototype.propertyIsEnumerable,zf=(n,e,r)=>e in n?y5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Ur=(n,e)=>{for(var r in e||(e={}))b5.call(e,r)&&zf(n,r,e[r]);if(Bf)for(var r of Bf(e))m5.call(e,r)&&zf(n,r,e[r]);return n},Mc=(n,e)=>v5(n,_5(e));class w5 extends e6{constructor(e){super(e),this.name=d5,this.events=new hu,this.initialized=!1,this.ignoredPayloadTypes=[en],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ss)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Mc(Ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:l,optionalNamespaces:p,sessionProperties:d,relays:g}=s;let w=a,S,N=!1;if(w&&(N=this.client.core.pairing.pairings.get(w).active),!w||!N){const{topic:M,uri:E}=await this.client.core.pairing.create();w=M,S=E}const z=await this.client.core.crypto.generateKeyPair(),R=Ur({requiredNamespaces:l,optionalNamespaces:p,relays:g??[{protocol:xp}],proposer:{publicKey:z,metadata:this.client.metadata}},d&&{sessionProperties:d}),{reject:P,resolve:G,done:q}=xn(ve.FIVE_MINUTES,Tp);if(this.events.once(Ht("session_connect"),async({error:M,session:E})=>{if(M)P(M);else if(E){E.self.publicKey=z;const x=Mc(Ur({},E),{requiredNamespaces:E.requiredNamespaces,optionalNamespaces:E.optionalNamespaces});await this.client.session.set(E.topic,x),await this.setExpiry(E.topic,E.expiry),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:E.peer.metadata}),G(x)}}),!w){const{message:M}=ce("NO_MATCHING_KEY",`connect() pairing topic: ${w}`);throw new Error(M)}const ie=await this.sendRequest(w,"wc_sessionPropose",R),T=ri(ve.FIVE_MINUTES);return await this.setProposal(ie,Ur({id:ie,expiry:T},R)),{uri:S,approval:q}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:a,namespaces:l,sessionProperties:p}=r,d=this.client.proposal.get(s);let{pairingTopic:g,proposer:w,requiredNamespaces:S,optionalNamespaces:N}=d;g=g||"",An(S)||(S=BE(l,"approve()"));const z=await this.client.core.crypto.generateKeyPair(),R=w.publicKey,P=await this.client.core.crypto.generateSharedKey(z,R);g&&s&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:w.metadata}),await this.sendResult(s,g,{relay:{protocol:a??"irn"},responderPublicKey:z}),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const G=Ur({relay:{protocol:a??"irn"},namespaces:l,requiredNamespaces:S,optionalNamespaces:N,pairingTopic:g,controller:{publicKey:z,metadata:this.client.metadata},expiry:ri(Io)},p&&{sessionProperties:p});await this.client.core.relayer.subscribe(P),await this.sendRequest(P,"wc_sessionSettle",G);const q=Mc(Ur({},G),{topic:P,pairingTopic:g,acknowledged:!1,self:G.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:z});return await this.client.session.set(P,q),await this.setExpiry(P,ri(Io)),{topic:P,acknowledged:()=>new Promise(ie=>setTimeout(()=>ie(this.client.session.get(P)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:a}=r,{pairingTopic:l}=this.client.proposal.get(s);l&&(await this.sendError(s,l,a),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:a}=r,l=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:a}),{done:p,resolve:d,reject:g}=xn();return this.events.once(Ht("session_update",l),({error:w})=>{w?g(w):d()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:p}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,a=await this.sendRequest(s,"wc_sessionExtend",{}),{done:l,resolve:p,reject:d}=xn();return this.events.once(Ht("session_extend",a),({error:g})=>{g?d(g):p()}),await this.setExpiry(s,ri(Io)),{acknowledged:l}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:a,topic:l,expiry:p}=r,d=await this.sendRequest(l,"wc_sessionRequest",{request:a,chainId:s},p),{done:g,resolve:w,reject:S}=xn(p);this.events.once(Ht("session_request",d),({error:z,result:R})=>{z?S(z):w(R)}),this.client.events.emit("session_request_sent",{topic:l,request:a,chainId:s,id:d});const N=await this.client.core.storage.getItem(h5);return xE({id:d,topic:l,wcDeepLink:N}),await g()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:a}=r,{id:l}=a;yi(a)?await this.sendResult(l,s,a.result):Vr(a)&&await this.sendError(l,s,a.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=await this.sendRequest(s,"wc_sessionPing",{}),{done:l,resolve:p,reject:d}=xn();this.events.once(Ht("session_ping",a),({error:g})=>{g?d(g):p()}),await l()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:a,chainId:l}=r;await this.sendRequest(s,"wc_sessionEvent",{event:a,chainId:l})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=Tu().toString();let l;const p=d=>{d?.id.toString()===a&&(this.client.core.relayer.events.removeListener(Ct.message_ack,p),l())};await Promise.all([new Promise(d=>{l=d,this.client.core.relayer.on(Ct.message_ack,p)}),this.sendRequest(s,"wc_sessionDelete",Rt("USER_DISCONNECTED"),void 0,a)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>qE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(l=>{var p,d;return((p=l.peerMetadata)==null?void 0:p.url)&&((d=l.peerMetadata)==null?void 0:d.url)===r.peer.metadata.url&&l.topic&&l.topic!==s.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(l=>this.client.core.pairing.disconnect({topic:l.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Rt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r)},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Rt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),a?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=ss.wc_sessionRequest.req.ttl,{id:a,topic:l,params:p}=r;await this.client.pendingRequest.set(a,{id:a,topic:l,params:p}),s&&this.client.core.expirer.set(a,ri(s))},this.sendRequest=async(r,s,a,l,p)=>{const d=Xo(s,a);if(wu()&&g5.includes(s)){const S=Cn(JSON.stringify(d));await this.client.core.verify.register({attestationId:S})}const g=await this.client.core.crypto.encode(r,d),w=ss[s].req;return l&&(w.ttl=l),p&&(w.id=p),this.client.core.history.set(r,d),this.client.core.relayer.publish(r,g,w),d.id},this.sendResult=async(r,s,a)=>{const l=Nu(r,a),p=await this.client.core.crypto.encode(s,l),d=await this.client.core.history.get(s,r),g=ss[d.request.method].res;this.client.core.relayer.publish(s,p,g),await this.client.core.history.resolve(l)},this.sendError=async(r,s,a)=>{const l=Zo(r,a),p=await this.client.core.crypto.encode(s,l),d=await this.client.core.history.get(s,r),g=ss[d.request.method].res;this.client.core.relayer.publish(s,p,g),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(a=>{Ai(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{Ai(a.expiry)&&s.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=r=>{const{topic:s,payload:a}=r,l=a.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:a}=r,l=(await this.client.core.history.get(s,a.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:a}=ce("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,s)=>{const{params:a,id:l}=s;try{this.isValidConnect(Ur({},s.params));const p=ri(ve.FIVE_MINUTES),d=Ur({id:l,pairingTopic:r,expiry:p},a);await this.setProposal(l,d);const g=Cn(JSON.stringify(s)),w=await this.getVerifyContext(g,d.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:d,verifyContext:w})}catch(p){await this.sendError(l,r,p),this.client.logger.error(p)}},this.onSessionProposeResponse=async(r,s)=>{const{id:a}=s;if(yi(s)){const{result:l}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const p=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:p});const d=p.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const g=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const w=await this.client.core.crypto.generateSharedKey(d,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:w});const S=await this.client.core.relayer.subscribe(w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:S}),await this.client.core.pairing.activate({topic:r})}else Vr(s)&&(await this.client.proposal.delete(a,Rt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidSessionSettleRequest(l);const{relay:p,controller:d,expiry:g,namespaces:w,requiredNamespaces:S,optionalNamespaces:N,sessionProperties:z,pairingTopic:R}=s.params,P=Ur({topic:r,relay:p,expiry:g,namespaces:w,acknowledged:!0,pairingTopic:R,requiredNamespaces:S,optionalNamespaces:N,controller:d.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:d.publicKey,metadata:d.metadata}},z&&{sessionProperties:z});await this.sendResult(s.id,r,!0),this.events.emit(Ht("session_connect"),{session:P}),this.cleanupDuplicatePairings(P)}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionSettleResponse=async(r,s)=>{const{id:a}=s;yi(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",a),{})):Vr(s)&&(await this.client.session.delete(r,Rt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:a,id:l}=s;try{this.isValidUpdate(Ur({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult(l,r,!0),this.client.events.emit("session_update",{id:l,topic:r,params:a})}catch(p){await this.sendError(l,r,p),this.client.logger.error(p)}},this.onSessionUpdateResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(Ht("session_update",a),{}):Vr(s)&&this.events.emit(Ht("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:a}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,ri(Io)),await this.sendResult(a,r,!0),this.client.events.emit("session_extend",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(Ht("session_extend",a),{}):Vr(s)&&this.events.emit(Ht("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.client.events.emit("session_ping",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,s)=>{const{id:a}=s;setTimeout(()=>{yi(s)?this.events.emit(Ht("session_ping",a),{}):Vr(s)&&this.events.emit(Ht("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(Ct.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult(a,r,!0)]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidRequest(Ur({topic:r},l)),await this.setPendingSessionRequest({id:a,topic:r,params:l});const p=Cn(JSON.stringify(s)),d=this.client.session.get(r),g=await this.getVerifyContext(p,d.peer.metadata);this.client.events.emit("session_request",{id:a,topic:r,params:l,verifyContext:g})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionRequestResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(Ht("session_request",a),{result:s.result}):Vr(s)&&this.events.emit(Ht("session_request",a),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidEmit(Ur({topic:r},l)),this.client.events.emit("session_event",{id:a,topic:r,params:l})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.isValidConnect=async r=>{if(!gr(r)){const{message:g}=ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(g)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:l,sessionProperties:p,relays:d}=r;if(or(s)||await this.isValidPairingTopic(s),!t3(d,!0)){const{message:g}=ce("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(g)}!or(a)&&An(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!or(l)&&An(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),or(p)||this.validateSessionProps(p,"sessionProperties")},this.validateNamespaces=(r,s)=>{const a=e3(r,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!gr(r))throw new Error(ce("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:a,relayProtocol:l,sessionProperties:p}=r;await this.isValidProposalId(s);const d=this.client.proposal.get(s),g=Po(a,"approve()");if(g)throw new Error(g.message);const w=lf(d.requiredNamespaces,a,"approve()");if(w)throw new Error(w.message);if(!Gt(l,!0)){const{message:S}=ce("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(S)}or(p)||this.validateSessionProps(p,"sessionProperties")},this.isValidReject=async r=>{if(!gr(r)){const{message:l}=ce("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:s,reason:a}=r;if(await this.isValidProposalId(s),!i3(a)){const{message:l}=ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!gr(r)){const{message:w}=ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(w)}const{relay:s,controller:a,namespaces:l,expiry:p}=r;if(!kd(s)){const{message:w}=ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(w)}const d=WE(a,"onSessionSettleRequest()");if(d)throw new Error(d.message);const g=Po(l,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(Ai(p)){const{message:w}=ce("EXPIRED","onSessionSettleRequest()");throw new Error(w)}},this.isValidUpdate=async r=>{if(!gr(r)){const{message:g}=ce("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(g)}const{topic:s,namespaces:a}=r;await this.isValidSessionTopic(s);const l=this.client.session.get(s),p=Po(a,"update()");if(p)throw new Error(p.message);const d=lf(l.requiredNamespaces,a,"update()");if(d)throw new Error(d.message)},this.isValidExtend=async r=>{if(!gr(r)){const{message:a}=ce("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!gr(r)){const{message:g}=ce("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(g)}const{topic:s,request:a,chainId:l,expiry:p}=r;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!hf(d,l)){const{message:g}=ce("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(g)}if(!n3(a)){const{message:g}=ce("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(g)}if(!a3(d,l,a.method)){const{message:g}=ce("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(g)}if(p&&!l3(p,Uc)){const{message:g}=ce("MISSING_OR_INVALID",`request() expiry: ${p}. Expiry must be a number (in seconds) between ${Uc.min} and ${Uc.max}`);throw new Error(g)}},this.isValidRespond=async r=>{if(!gr(r)){const{message:l}=ce("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(l)}const{topic:s,response:a}=r;if(await this.isValidSessionTopic(s),!s3(a)){const{message:l}=ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidPing=async r=>{if(!gr(r)){const{message:a}=ce("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!gr(r)){const{message:d}=ce("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(d)}const{topic:s,event:a,chainId:l}=r;await this.isValidSessionTopic(s);const{namespaces:p}=this.client.session.get(s);if(!hf(p,l)){const{message:d}=ce("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(d)}if(!o3(a)){const{message:d}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(d)}if(!c3(p,l,a.name)){const{message:d}=ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(d)}},this.isValidDisconnect=async r=>{if(!gr(r)){const{message:a}=ce("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const a={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});l&&(a.verified.origin=l,a.verified.validation=l===s.url?"VALID":"INVALID")}catch(l){this.client.logger.error(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(a=>{if(!Gt(a,!1)){const{message:l}=ce("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(l)}})}}isInitialized(){if(!this.initialized){const{message:e}=ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Ct.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(r,s);Ru(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Qo(a)?(await this.client.core.history.resolve(a),this.onRelayEventResponse({topic:r,payload:a})):this.onRelayEventUnknownPayload({topic:r,payload:a})})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:r,id:s}=Hd(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ce("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:r}=ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Ai(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ce("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:r}=ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ai(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=ce("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:r}=ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!r3(e)){const{message:r}=ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ai(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=ce("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class E5 extends ta{constructor(e,r){super(e,r,l5,Mu),this.core=e,this.logger=r}}class D5 extends ta{constructor(e,r){super(e,r,f5,Mu),this.core=e,this.logger=r}}class S5 extends ta{constructor(e,r){super(e,r,p5,Mu,s=>s.id),this.core=e,this.logger=r}}class Lu extends Q3{constructor(e){super(e),this.protocol=Cp,this.version=Ap,this.name=Fc.name,this.events=new jr.exports.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=e?.name||Fc.name,this.metadata=e?.metadata||bE();const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:e?.logger||Fc.logger}));this.core=e?.core||new u5(e),this.logger=Qe.generateChildLogger(r,this.name),this.session=new D5(this.core,this.logger),this.proposal=new E5(this.core,this.logger),this.pendingRequest=new S5(this.core,this.logger),this.engine=new w5(this)}static async init(e){const r=new Lu(e);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var nu={exports:{}};(function(n,e){var r=typeof self<"u"?self:yr,s=function(){function l(){this.fetch=!1,this.DOMException=r.DOMException}return l.prototype=r,new l}();(function(l){(function(p){var d={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function g(m){return m&&DataView.prototype.isPrototypeOf(m)}if(d.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],S=ArrayBuffer.isView||function(m){return m&&w.indexOf(Object.prototype.toString.call(m))>-1};function N(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function z(m){return typeof m!="string"&&(m=String(m)),m}function R(m){var C={next:function(){var Z=m.shift();return{done:Z===void 0,value:Z}}};return d.iterable&&(C[Symbol.iterator]=function(){return C}),C}function P(m){this.map={},m instanceof P?m.forEach(function(C,Z){this.append(Z,C)},this):Array.isArray(m)?m.forEach(function(C){this.append(C[0],C[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(C){this.append(C,m[C])},this)}P.prototype.append=function(m,C){m=N(m),C=z(C);var Z=this.map[m];this.map[m]=Z?Z+", "+C:C},P.prototype.delete=function(m){delete this.map[N(m)]},P.prototype.get=function(m){return m=N(m),this.has(m)?this.map[m]:null},P.prototype.has=function(m){return this.map.hasOwnProperty(N(m))},P.prototype.set=function(m,C){this.map[N(m)]=z(C)},P.prototype.forEach=function(m,C){for(var Z in this.map)this.map.hasOwnProperty(Z)&&m.call(C,this.map[Z],Z,this)},P.prototype.keys=function(){var m=[];return this.forEach(function(C,Z){m.push(Z)}),R(m)},P.prototype.values=function(){var m=[];return this.forEach(function(C){m.push(C)}),R(m)},P.prototype.entries=function(){var m=[];return this.forEach(function(C,Z){m.push([Z,C])}),R(m)},d.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function G(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function q(m){return new Promise(function(C,Z){m.onload=function(){C(m.result)},m.onerror=function(){Z(m.error)}})}function ie(m){var C=new FileReader,Z=q(C);return C.readAsArrayBuffer(m),Z}function T(m){var C=new FileReader,Z=q(C);return C.readAsText(m),Z}function M(m){for(var C=new Uint8Array(m),Z=new Array(C.length),J=0;J<C.length;J++)Z[J]=String.fromCharCode(C[J]);return Z.join("")}function E(m){if(m.slice)return m.slice(0);var C=new Uint8Array(m.byteLength);return C.set(new Uint8Array(m)),C.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:d.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:d.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():d.arrayBuffer&&d.blob&&g(m)?(this._bodyArrayBuffer=E(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||S(m))?this._bodyArrayBuffer=E(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var m=G(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?G(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ie)}),this.text=function(){var m=G(this);if(m)return m;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(m){var C=m.toUpperCase();return O.indexOf(C)>-1?C:m}function _(m,C){C=C||{};var Z=C.body;if(m instanceof _){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,C.headers||(this.headers=new P(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!Z&&m._bodyInit!=null&&(Z=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new P(C.headers)),this.method=u(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Z)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function Q(m){var C=new FormData;return m.trim().split("&").forEach(function(Z){if(Z){var J=Z.split("="),K=J.shift().replace(/\+/g," "),k=J.join("=").replace(/\+/g," ");C.append(decodeURIComponent(K),decodeURIComponent(k))}}),C}function ne(m){var C=new P,Z=m.replace(/\r?\n[\t ]+/g," ");return Z.split(/\r?\n/).forEach(function(J){var K=J.split(":"),k=K.shift().trim();if(k){var ee=K.join(":").trim();C.append(k,ee)}}),C}x.call(_.prototype);function ue(m,C){C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in C?C.statusText:"OK",this.headers=new P(C.headers),this.url=C.url||"",this._initBody(m)}x.call(ue.prototype),ue.prototype.clone=function(){return new ue(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},ue.error=function(){var m=new ue(null,{status:0,statusText:""});return m.type="error",m};var ge=[301,302,303,307,308];ue.redirect=function(m,C){if(ge.indexOf(C)===-1)throw new RangeError("Invalid status code");return new ue(null,{status:C,headers:{location:m}})},p.DOMException=l.DOMException;try{new p.DOMException}catch{p.DOMException=function(C,Z){this.message=C,this.name=Z;var J=Error(C);this.stack=J.stack},p.DOMException.prototype=Object.create(Error.prototype),p.DOMException.prototype.constructor=p.DOMException}function ye(m,C){return new Promise(function(Z,J){var K=new _(m,C);if(K.signal&&K.signal.aborted)return J(new p.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function ee(){k.abort()}k.onload=function(){var re={status:k.status,statusText:k.statusText,headers:ne(k.getAllResponseHeaders()||"")};re.url="responseURL"in k?k.responseURL:re.headers.get("X-Request-URL");var De="response"in k?k.response:k.responseText;Z(new ue(De,re))},k.onerror=function(){J(new TypeError("Network request failed"))},k.ontimeout=function(){J(new TypeError("Network request failed"))},k.onabort=function(){J(new p.DOMException("Aborted","AbortError"))},k.open(K.method,K.url,!0),K.credentials==="include"?k.withCredentials=!0:K.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&d.blob&&(k.responseType="blob"),K.headers.forEach(function(re,De){k.setRequestHeader(De,re)}),K.signal&&(K.signal.addEventListener("abort",ee),k.onreadystatechange=function(){k.readyState===4&&K.signal.removeEventListener("abort",ee)}),k.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return ye.polyfill=!0,l.fetch||(l.fetch=ye,l.Headers=P,l.Request=_,l.Response=ue),p.Headers=P,p.Request=_,p.Response=ue,p.fetch=ye,Object.defineProperty(p,"__esModule",{value:!0}),p})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var a=s;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,n.exports=e})(nu,nu.exports);var Hf=fb(nu.exports);const I5={Accept:"application/json","Content-Type":"application/json"},x5="POST",qf={headers:I5,method:x5},Kf=10;class rn{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new jr.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!_f(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const s=ls(e),l=await(await Hf(this.url,Object.assign(Object.assign({},qf),{body:s}))).json();this.onPayload({data:l})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!_f(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=ls({id:1,jsonrpc:"2.0",method:"test",params:[]});await Hf(e,Object.assign(Object.assign({},qf),{body:r}))}this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ou(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),a=s.message||s.toString(),l=Zo(e,a);this.events.emit("payload",l)}parseError(e,r=this.url){return op(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Kf&&this.events.setMaxListeners(Kf)}}const kf="error",O5="wss://relay.walletconnect.com",C5="wc",A5="universal_provider",Vf=`${C5}@2:${A5}:`,P5="https://rpc.walletconnect.com/v1",Ui={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},su={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var r,s="4.17.21",a=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",d="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",w=500,S="__lodash_placeholder__",N=1,z=2,R=4,P=1,G=2,q=1,ie=2,T=4,M=8,E=16,x=32,O=64,u=128,_=256,Q=512,ne=30,ue="...",ge=800,ye=16,m=1,C=2,Z=3,J=1/0,K=9007199254740991,k=17976931348623157e292,ee=0/0,re=4294967295,De=re-1,oe=re>>>1,Se=[["ary",u],["bind",q],["bindKey",ie],["curry",M],["curryRight",E],["flip",Q],["partial",x],["partialRight",O],["rearg",_]],le="[object Arguments]",Pe="[object Array]",B="[object AsyncFunction]",j="[object Boolean]",F="[object Date]",h="[object DOMException]",I="[object Error]",se="[object Function]",he="[object GeneratorFunction]",Ee="[object Map]",He="[object Number]",ke="[object Null]",Le="[object Object]",pt="[object Promise]",gt="[object Proxy]",je="[object RegExp]",Ie="[object Set]",Re="[object String]",Fe="[object Symbol]",Be="[object Undefined]",Oe="[object WeakMap]",Ue="[object WeakSet]",we="[object ArrayBuffer]",Ce="[object DataView]",qe="[object Float32Array]",xe="[object Float64Array]",Ve="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",er="[object Uint16Array]",ur="[object Uint32Array]",Gr=/\b__p \+= '';/g,tr=/\b(__p \+=) '' \+/g,ni=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_i=/&(?:amp|lt|gt|quot|#39);/g,Mi=/[&<>"']/g,wt=RegExp(_i.source),yt=RegExp(Mi.source),Et=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(St.source),It=/^\s+/,At=/\s/,xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,jt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ra=/[()=,{}\[\]\/\s]/,ia=/\\(\\)?/g,na=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xr=/\w*$/,sa=/^[-+]0x[0-9a-f]+$/i,oa=/^0b[01]+$/i,aa=/^\[object .+?Constructor\]$/,ca=/^0o[0-7]+$/i,ua=/^(?:0|[1-9]\d*)$/,si=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nn=/($^)/,ha=/['\n\r\u2028\u2029\\]/g,sn="\\ud800-\\udfff",la="\\u0300-\\u036f",fa="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",bs=la+fa+on,ms="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",da="\\xac\\xb1\\xd7\\xf7",pa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ga="\\u2000-\\u206f",ya=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ws="A-Z\\xc0-\\xd6\\xd8-\\xde",Es="\\ufe0e\\ufe0f",Li=da+pa+ga+ya,Ln="['\u2019]",$i="["+sn+"]",$n="["+Li+"]",ji="["+bs+"]",Ds="\\d+",va="["+ms+"]",Ss="["+Br+"]",Is="[^"+sn+Li+Ds+ms+Br+ws+"]",an="\\ud83c[\\udffb-\\udfff]",_a="(?:"+ji+"|"+an+")",xs="[^"+sn+"]",cn="(?:\\ud83c[\\udde6-\\uddff]){2}",bi="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ws+"]",Os="\\u200d",Cs="(?:"+Ss+"|"+Is+")",Wr="(?:"+br+"|"+Is+")",As="(?:"+Ln+"(?:d|ll|m|re|s|t|ve))?",Ps="(?:"+Ln+"(?:D|LL|M|RE|S|T|VE))?",Ts=_a+"?",Ns="["+Es+"]?",ba="(?:"+Os+"(?:"+[xs,cn,bi].join("|")+")"+Ns+Ts+")*",oi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fs=Ns+Ts+ba,un="(?:"+[va,cn,bi].join("|")+")"+Fs,ma="(?:"+[xs+ji+"?",ji,cn,bi,$i].join("|")+")",jn=RegExp(Ln,"g"),wa=RegExp(ji,"g"),hn=RegExp(an+"(?="+an+")|"+ma+Fs,"g"),Us=RegExp([br+"?"+Ss+"+"+As+"(?="+[$n,br,"$"].join("|")+")",Wr+"+"+Ps+"(?="+[$n,br+Cs,"$"].join("|")+")",br+"?"+Cs+"+"+As,br+"+"+Ps,Rs,oi,Ds,un].join("|"),"g"),Ms=RegExp("["+Os+sn+bs+Es+"]"),Bi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ls=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ea=-1,ot={};ot[qe]=ot[xe]=ot[Ve]=ot[We]=ot[et]=ot[tt]=ot[Je]=ot[er]=ot[ur]=!0,ot[le]=ot[Pe]=ot[we]=ot[j]=ot[Ce]=ot[F]=ot[I]=ot[se]=ot[Ee]=ot[He]=ot[Le]=ot[je]=ot[Ie]=ot[Re]=ot[Oe]=!1;var st={};st[le]=st[Pe]=st[we]=st[Ce]=st[j]=st[F]=st[qe]=st[xe]=st[Ve]=st[We]=st[et]=st[Ee]=st[He]=st[Le]=st[je]=st[Ie]=st[Re]=st[Fe]=st[tt]=st[Je]=st[er]=st[ur]=!0,st[I]=st[se]=st[Oe]=!1;var b={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},X={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Te=parseInt,ft=typeof os=="object"&&os&&os.Object===Object&&os,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=ft||Bt||Function("return this")(),ct=e&&!e.nodeType&&e,Pt=ct&&!0&&n&&!n.nodeType&&n,hr=Pt&&Pt.exports===ct,zt=hr&&ft.process,dt=function(){try{var L=Pt&&Pt.require&&Pt.require("util").types;return L||zt&&zt.binding&&zt.binding("util")}catch{}}(),rr=dt&&dt.isArrayBuffer,zr=dt&&dt.isDate,Or=dt&&dt.isMap,Yr=dt&&dt.isRegExp,Bn=dt&&dt.isSet,zi=dt&&dt.isTypedArray;function kt(L,V,H){switch(H.length){case 0:return L.call(V);case 1:return L.call(V,H[0]);case 2:return L.call(V,H[0],H[1]);case 3:return L.call(V,H[0],H[1],H[2])}return L.apply(V,H)}function Rp(L,V,H,de){for(var Ae=-1,rt=L==null?0:L.length;++Ae<rt;){var qt=L[Ae];V(de,qt,H(qt),L)}return de}function Cr(L,V){for(var H=-1,de=L==null?0:L.length;++H<de&&V(L[H],H,L)!==!1;);return L}function Fp(L,V){for(var H=L==null?0:L.length;H--&&V(L[H],H,L)!==!1;);return L}function Bu(L,V){for(var H=-1,de=L==null?0:L.length;++H<de;)if(!V(L[H],H,L))return!1;return!0}function mi(L,V){for(var H=-1,de=L==null?0:L.length,Ae=0,rt=[];++H<de;){var qt=L[H];V(qt,H,L)&&(rt[Ae++]=qt)}return rt}function $s(L,V){var H=L==null?0:L.length;return!!H&&ln(L,V,0)>-1}function Da(L,V,H){for(var de=-1,Ae=L==null?0:L.length;++de<Ae;)if(H(V,L[de]))return!0;return!1}function _t(L,V){for(var H=-1,de=L==null?0:L.length,Ae=Array(de);++H<de;)Ae[H]=V(L[H],H,L);return Ae}function wi(L,V){for(var H=-1,de=V.length,Ae=L.length;++H<de;)L[Ae+H]=V[H];return L}function Sa(L,V,H,de){var Ae=-1,rt=L==null?0:L.length;for(de&&rt&&(H=L[++Ae]);++Ae<rt;)H=V(H,L[Ae],Ae,L);return H}function Up(L,V,H,de){var Ae=L==null?0:L.length;for(de&&Ae&&(H=L[--Ae]);Ae--;)H=V(H,L[Ae],Ae,L);return H}function Ia(L,V){for(var H=-1,de=L==null?0:L.length;++H<de;)if(V(L[H],H,L))return!0;return!1}var Mp=xa("length");function Lp(L){return L.split("")}function $p(L){return L.match(jt)||[]}function zu(L,V,H){var de;return H(L,function(Ae,rt,qt){if(V(Ae,rt,qt))return de=rt,!1}),de}function js(L,V,H,de){for(var Ae=L.length,rt=H+(de?1:-1);de?rt--:++rt<Ae;)if(V(L[rt],rt,L))return rt;return-1}function ln(L,V,H){return V===V?Jp(L,V,H):js(L,Hu,H)}function jp(L,V,H,de){for(var Ae=H-1,rt=L.length;++Ae<rt;)if(de(L[Ae],V))return Ae;return-1}function Hu(L){return L!==L}function qu(L,V){var H=L==null?0:L.length;return H?Ca(L,V)/H:ee}function xa(L){return function(V){return V==null?r:V[L]}}function Oa(L){return function(V){return L==null?r:L[V]}}function Ku(L,V,H,de,Ae){return Ae(L,function(rt,qt,ut){H=de?(de=!1,rt):V(H,rt,qt,ut)}),H}function Bp(L,V){var H=L.length;for(L.sort(V);H--;)L[H]=L[H].value;return L}function Ca(L,V){for(var H,de=-1,Ae=L.length;++de<Ae;){var rt=V(L[de]);rt!==r&&(H=H===r?rt:H+rt)}return H}function Aa(L,V){for(var H=-1,de=Array(L);++H<L;)de[H]=V(H);return de}function zp(L,V){return _t(V,function(H){return[H,L[H]]})}function ku(L){return L&&L.slice(0,Yu(L)+1).replace(It,"")}function mr(L){return function(V){return L(V)}}function Pa(L,V){return _t(V,function(H){return L[H]})}function zn(L,V){return L.has(V)}function Vu(L,V){for(var H=-1,de=L.length;++H<de&&ln(V,L[H],0)>-1;);return H}function Gu(L,V){for(var H=L.length;H--&&ln(V,L[H],0)>-1;);return H}function Hp(L,V){for(var H=L.length,de=0;H--;)L[H]===V&&++de;return de}var qp=Oa(b),Kp=Oa(U);function kp(L){return"\\"+fe[L]}function Vp(L,V){return L==null?r:L[V]}function fn(L){return Ms.test(L)}function Gp(L){return Bi.test(L)}function Wp(L){for(var V,H=[];!(V=L.next()).done;)H.push(V.value);return H}function Ta(L){var V=-1,H=Array(L.size);return L.forEach(function(de,Ae){H[++V]=[Ae,de]}),H}function Wu(L,V){return function(H){return L(V(H))}}function Ei(L,V){for(var H=-1,de=L.length,Ae=0,rt=[];++H<de;){var qt=L[H];(qt===V||qt===S)&&(L[H]=S,rt[Ae++]=H)}return rt}function Bs(L){var V=-1,H=Array(L.size);return L.forEach(function(de){H[++V]=de}),H}function Yp(L){var V=-1,H=Array(L.size);return L.forEach(function(de){H[++V]=[de,de]}),H}function Jp(L,V,H){for(var de=H-1,Ae=L.length;++de<Ae;)if(L[de]===V)return de;return-1}function Xp(L,V,H){for(var de=H+1;de--;)if(L[de]===V)return de;return de}function dn(L){return fn(L)?Qp(L):Mp(L)}function Hr(L){return fn(L)?eg(L):Lp(L)}function Yu(L){for(var V=L.length;V--&&At.test(L.charAt(V)););return V}var Zp=Oa(X);function Qp(L){for(var V=hn.lastIndex=0;hn.test(L);)++V;return V}function eg(L){return L.match(hn)||[]}function tg(L){return L.match(Us)||[]}var rg=function L(V){V=V==null?Xe:pn.defaults(Xe.Object(),V,pn.pick(Xe,Ls));var H=V.Array,de=V.Date,Ae=V.Error,rt=V.Function,qt=V.Math,ut=V.Object,Na=V.RegExp,ig=V.String,Ar=V.TypeError,zs=H.prototype,ng=rt.prototype,gn=ut.prototype,Hs=V["__core-js_shared__"],qs=ng.toString,nt=gn.hasOwnProperty,sg=0,Ju=function(){var t=/[^.]+$/.exec(Hs&&Hs.keys&&Hs.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ks=gn.toString,og=qs.call(ut),ag=Xe._,cg=Na("^"+qs.call(nt).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ks=hr?V.Buffer:r,Di=V.Symbol,Vs=V.Uint8Array,Xu=ks?ks.allocUnsafe:r,Gs=Wu(ut.getPrototypeOf,ut),Zu=ut.create,Qu=gn.propertyIsEnumerable,Ws=zs.splice,eh=Di?Di.isConcatSpreadable:r,Hn=Di?Di.iterator:r,Hi=Di?Di.toStringTag:r,Ys=function(){try{var t=Gi(ut,"defineProperty");return t({},"",{}),t}catch{}}(),ug=V.clearTimeout!==Xe.clearTimeout&&V.clearTimeout,hg=de&&de.now!==Xe.Date.now&&de.now,lg=V.setTimeout!==Xe.setTimeout&&V.setTimeout,Js=qt.ceil,Xs=qt.floor,Ra=ut.getOwnPropertySymbols,fg=ks?ks.isBuffer:r,th=V.isFinite,dg=zs.join,pg=Wu(ut.keys,ut),Kt=qt.max,Xt=qt.min,gg=de.now,yg=V.parseInt,rh=qt.random,vg=zs.reverse,Fa=Gi(V,"DataView"),qn=Gi(V,"Map"),Ua=Gi(V,"Promise"),yn=Gi(V,"Set"),Kn=Gi(V,"WeakMap"),kn=Gi(ut,"create"),Zs=Kn&&new Kn,vn={},_g=Wi(Fa),bg=Wi(qn),mg=Wi(Ua),wg=Wi(yn),Eg=Wi(Kn),Qs=Di?Di.prototype:r,Vn=Qs?Qs.valueOf:r,ih=Qs?Qs.toString:r;function y(t){if(Ot(t)&&!Ne(t)&&!(t instanceof Ye)){if(t instanceof Pr)return t;if(nt.call(t,"__wrapped__"))return nl(t)}return new Pr(t)}var _n=function(){function t(){}return function(i){if(!mt(i))return{};if(Zu)return Zu(i);t.prototype=i;var o=new t;return t.prototype=r,o}}();function eo(){}function Pr(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}y.templateSettings={escape:Et,evaluate:Dt,interpolate:bt,variable:"",imports:{_:y}},y.prototype=eo.prototype,y.prototype.constructor=y,Pr.prototype=_n(eo.prototype),Pr.prototype.constructor=Pr;function Ye(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function Dg(){var t=new Ye(this.__wrapped__);return t.__actions__=lr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=lr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=lr(this.__views__),t}function Sg(){if(this.__filtered__){var t=new Ye(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ig(){var t=this.__wrapped__.value(),i=this.__dir__,o=Ne(t),c=i<0,f=o?t.length:0,v=L0(0,f,this.__views__),D=v.start,A=v.end,$=A-D,W=c?A:D-1,Y=this.__iteratees__,te=Y.length,ae=0,pe=Xt($,this.__takeCount__);if(!o||!c&&f==$&&pe==$)return Oh(t,this.__actions__);var be=[];e:for(;$--&&ae<pe;){W+=i;for(var ze=-1,me=t[W];++ze<te;){var Ge=Y[ze],Ze=Ge.iteratee,Dr=Ge.type,sr=Ze(me);if(Dr==C)me=sr;else if(!sr){if(Dr==m)continue e;break e}}be[ae++]=me}return be}Ye.prototype=_n(eo.prototype),Ye.prototype.constructor=Ye;function qi(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var c=t[i];this.set(c[0],c[1])}}function xg(){this.__data__=kn?kn(null):{},this.size=0}function Og(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function Cg(t){var i=this.__data__;if(kn){var o=i[t];return o===g?r:o}return nt.call(i,t)?i[t]:r}function Ag(t){var i=this.__data__;return kn?i[t]!==r:nt.call(i,t)}function Pg(t,i){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=kn&&i===r?g:i,this}qi.prototype.clear=xg,qi.prototype.delete=Og,qi.prototype.get=Cg,qi.prototype.has=Ag,qi.prototype.set=Pg;function ai(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var c=t[i];this.set(c[0],c[1])}}function Tg(){this.__data__=[],this.size=0}function Ng(t){var i=this.__data__,o=to(i,t);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():Ws.call(i,o,1),--this.size,!0}function Rg(t){var i=this.__data__,o=to(i,t);return o<0?r:i[o][1]}function Fg(t){return to(this.__data__,t)>-1}function Ug(t,i){var o=this.__data__,c=to(o,t);return c<0?(++this.size,o.push([t,i])):o[c][1]=i,this}ai.prototype.clear=Tg,ai.prototype.delete=Ng,ai.prototype.get=Rg,ai.prototype.has=Fg,ai.prototype.set=Ug;function ci(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var c=t[i];this.set(c[0],c[1])}}function Mg(){this.size=0,this.__data__={hash:new qi,map:new(qn||ai),string:new qi}}function Lg(t){var i=po(this,t).delete(t);return this.size-=i?1:0,i}function $g(t){return po(this,t).get(t)}function jg(t){return po(this,t).has(t)}function Bg(t,i){var o=po(this,t),c=o.size;return o.set(t,i),this.size+=o.size==c?0:1,this}ci.prototype.clear=Mg,ci.prototype.delete=Lg,ci.prototype.get=$g,ci.prototype.has=jg,ci.prototype.set=Bg;function Ki(t){var i=-1,o=t==null?0:t.length;for(this.__data__=new ci;++i<o;)this.add(t[i])}function zg(t){return this.__data__.set(t,g),this}function Hg(t){return this.__data__.has(t)}Ki.prototype.add=Ki.prototype.push=zg,Ki.prototype.has=Hg;function qr(t){var i=this.__data__=new ai(t);this.size=i.size}function qg(){this.__data__=new ai,this.size=0}function Kg(t){var i=this.__data__,o=i.delete(t);return this.size=i.size,o}function kg(t){return this.__data__.get(t)}function Vg(t){return this.__data__.has(t)}function Gg(t,i){var o=this.__data__;if(o instanceof ai){var c=o.__data__;if(!qn||c.length<a-1)return c.push([t,i]),this.size=++o.size,this;o=this.__data__=new ci(c)}return o.set(t,i),this.size=o.size,this}qr.prototype.clear=qg,qr.prototype.delete=Kg,qr.prototype.get=kg,qr.prototype.has=Vg,qr.prototype.set=Gg;function nh(t,i){var o=Ne(t),c=!o&&Yi(t),f=!o&&!c&&Ci(t),v=!o&&!c&&!f&&En(t),D=o||c||f||v,A=D?Aa(t.length,ig):[],$=A.length;for(var W in t)(i||nt.call(t,W))&&!(D&&(W=="length"||f&&(W=="offset"||W=="parent")||v&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||fi(W,$)))&&A.push(W);return A}function sh(t){var i=t.length;return i?t[Va(0,i-1)]:r}function Wg(t,i){return go(lr(t),ki(i,0,t.length))}function Yg(t){return go(lr(t))}function Ma(t,i,o){(o!==r&&!Kr(t[i],o)||o===r&&!(i in t))&&ui(t,i,o)}function Gn(t,i,o){var c=t[i];(!(nt.call(t,i)&&Kr(c,o))||o===r&&!(i in t))&&ui(t,i,o)}function to(t,i){for(var o=t.length;o--;)if(Kr(t[o][0],i))return o;return-1}function Jg(t,i,o,c){return Si(t,function(f,v,D){i(c,f,o(f),D)}),c}function oh(t,i){return t&&Xr(i,Vt(i),t)}function Xg(t,i){return t&&Xr(i,dr(i),t)}function ui(t,i,o){i=="__proto__"&&Ys?Ys(t,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[i]=o}function La(t,i){for(var o=-1,c=i.length,f=H(c),v=t==null;++o<c;)f[o]=v?r:vc(t,i[o]);return f}function ki(t,i,o){return t===t&&(o!==r&&(t=t<=o?t:o),i!==r&&(t=t>=i?t:i)),t}function Tr(t,i,o,c,f,v){var D,A=i&N,$=i&z,W=i&R;if(o&&(D=f?o(t,c,f,v):o(t)),D!==r)return D;if(!mt(t))return t;var Y=Ne(t);if(Y){if(D=j0(t),!A)return lr(t,D)}else{var te=Zt(t),ae=te==se||te==he;if(Ci(t))return Ph(t,A);if(te==Le||te==le||ae&&!f){if(D=$||ae?{}:Yh(t),!A)return $?C0(t,Xg(D,t)):O0(t,oh(D,t))}else{if(!st[te])return f?t:{};D=B0(t,te,A)}}v||(v=new qr);var pe=v.get(t);if(pe)return pe;v.set(t,D),Sl(t)?t.forEach(function(me){D.add(Tr(me,i,o,me,t,v))}):El(t)&&t.forEach(function(me,Ge){D.set(Ge,Tr(me,i,o,Ge,t,v))});var be=W?$?ic:rc:$?dr:Vt,ze=Y?r:be(t);return Cr(ze||t,function(me,Ge){ze&&(Ge=me,me=t[Ge]),Gn(D,Ge,Tr(me,i,o,Ge,t,v))}),D}function Zg(t){var i=Vt(t);return function(o){return ah(o,t,i)}}function ah(t,i,o){var c=o.length;if(t==null)return!c;for(t=ut(t);c--;){var f=o[c],v=i[f],D=t[f];if(D===r&&!(f in t)||!v(D))return!1}return!0}function ch(t,i,o){if(typeof t!="function")throw new Ar(p);return es(function(){t.apply(r,o)},i)}function Wn(t,i,o,c){var f=-1,v=$s,D=!0,A=t.length,$=[],W=i.length;if(!A)return $;o&&(i=_t(i,mr(o))),c?(v=Da,D=!1):i.length>=a&&(v=zn,D=!1,i=new Ki(i));e:for(;++f<A;){var Y=t[f],te=o==null?Y:o(Y);if(Y=c||Y!==0?Y:0,D&&te===te){for(var ae=W;ae--;)if(i[ae]===te)continue e;$.push(Y)}else v(i,te,c)||$.push(Y)}return $}var Si=Uh(Jr),uh=Uh(ja,!0);function Qg(t,i){var o=!0;return Si(t,function(c,f,v){return o=!!i(c,f,v),o}),o}function ro(t,i,o){for(var c=-1,f=t.length;++c<f;){var v=t[c],D=i(v);if(D!=null&&(A===r?D===D&&!Er(D):o(D,A)))var A=D,$=v}return $}function e0(t,i,o,c){var f=t.length;for(o=$e(o),o<0&&(o=-o>f?0:f+o),c=c===r||c>f?f:$e(c),c<0&&(c+=f),c=o>c?0:xl(c);o<c;)t[o++]=i;return t}function hh(t,i){var o=[];return Si(t,function(c,f,v){i(c,f,v)&&o.push(c)}),o}function Wt(t,i,o,c,f){var v=-1,D=t.length;for(o||(o=H0),f||(f=[]);++v<D;){var A=t[v];i>0&&o(A)?i>1?Wt(A,i-1,o,c,f):wi(f,A):c||(f[f.length]=A)}return f}var $a=Mh(),lh=Mh(!0);function Jr(t,i){return t&&$a(t,i,Vt)}function ja(t,i){return t&&lh(t,i,Vt)}function io(t,i){return mi(i,function(o){return di(t[o])})}function Vi(t,i){i=xi(i,t);for(var o=0,c=i.length;t!=null&&o<c;)t=t[Zr(i[o++])];return o&&o==c?t:r}function fh(t,i,o){var c=i(t);return Ne(t)?c:wi(c,o(t))}function ir(t){return t==null?t===r?Be:ke:Hi&&Hi in ut(t)?M0(t):Y0(t)}function Ba(t,i){return t>i}function t0(t,i){return t!=null&&nt.call(t,i)}function r0(t,i){return t!=null&&i in ut(t)}function i0(t,i,o){return t>=Xt(i,o)&&t<Kt(i,o)}function za(t,i,o){for(var c=o?Da:$s,f=t[0].length,v=t.length,D=v,A=H(v),$=1/0,W=[];D--;){var Y=t[D];D&&i&&(Y=_t(Y,mr(i))),$=Xt(Y.length,$),A[D]=!o&&(i||f>=120&&Y.length>=120)?new Ki(D&&Y):r}Y=t[0];var te=-1,ae=A[0];e:for(;++te<f&&W.length<$;){var pe=Y[te],be=i?i(pe):pe;if(pe=o||pe!==0?pe:0,!(ae?zn(ae,be):c(W,be,o))){for(D=v;--D;){var ze=A[D];if(!(ze?zn(ze,be):c(t[D],be,o)))continue e}ae&&ae.push(be),W.push(pe)}}return W}function n0(t,i,o,c){return Jr(t,function(f,v,D){i(c,o(f),v,D)}),c}function Yn(t,i,o){i=xi(i,t),t=Qh(t,i);var c=t==null?t:t[Zr(Rr(i))];return c==null?r:kt(c,t,o)}function dh(t){return Ot(t)&&ir(t)==le}function s0(t){return Ot(t)&&ir(t)==we}function o0(t){return Ot(t)&&ir(t)==F}function Jn(t,i,o,c,f){return t===i?!0:t==null||i==null||!Ot(t)&&!Ot(i)?t!==t&&i!==i:a0(t,i,o,c,Jn,f)}function a0(t,i,o,c,f,v){var D=Ne(t),A=Ne(i),$=D?Pe:Zt(t),W=A?Pe:Zt(i);$=$==le?Le:$,W=W==le?Le:W;var Y=$==Le,te=W==Le,ae=$==W;if(ae&&Ci(t)){if(!Ci(i))return!1;D=!0,Y=!1}if(ae&&!Y)return v||(v=new qr),D||En(t)?Vh(t,i,o,c,f,v):F0(t,i,$,o,c,f,v);if(!(o&P)){var pe=Y&&nt.call(t,"__wrapped__"),be=te&&nt.call(i,"__wrapped__");if(pe||be){var ze=pe?t.value():t,me=be?i.value():i;return v||(v=new qr),f(ze,me,o,c,v)}}return ae?(v||(v=new qr),U0(t,i,o,c,f,v)):!1}function c0(t){return Ot(t)&&Zt(t)==Ee}function Ha(t,i,o,c){var f=o.length,v=f,D=!c;if(t==null)return!v;for(t=ut(t);f--;){var A=o[f];if(D&&A[2]?A[1]!==t[A[0]]:!(A[0]in t))return!1}for(;++f<v;){A=o[f];var $=A[0],W=t[$],Y=A[1];if(D&&A[2]){if(W===r&&!($ in t))return!1}else{var te=new qr;if(c)var ae=c(W,Y,$,t,i,te);if(!(ae===r?Jn(Y,W,P|G,c,te):ae))return!1}}return!0}function ph(t){if(!mt(t)||K0(t))return!1;var i=di(t)?cg:aa;return i.test(Wi(t))}function u0(t){return Ot(t)&&ir(t)==je}function h0(t){return Ot(t)&&Zt(t)==Ie}function l0(t){return Ot(t)&&wo(t.length)&&!!ot[ir(t)]}function gh(t){return typeof t=="function"?t:t==null?pr:typeof t=="object"?Ne(t)?_h(t[0],t[1]):vh(t):Ll(t)}function qa(t){if(!Qn(t))return pg(t);var i=[];for(var o in ut(t))nt.call(t,o)&&o!="constructor"&&i.push(o);return i}function f0(t){if(!mt(t))return W0(t);var i=Qn(t),o=[];for(var c in t)c=="constructor"&&(i||!nt.call(t,c))||o.push(c);return o}function Ka(t,i){return t<i}function yh(t,i){var o=-1,c=fr(t)?H(t.length):[];return Si(t,function(f,v,D){c[++o]=i(f,v,D)}),c}function vh(t){var i=sc(t);return i.length==1&&i[0][2]?Xh(i[0][0],i[0][1]):function(o){return o===t||Ha(o,t,i)}}function _h(t,i){return ac(t)&&Jh(i)?Xh(Zr(t),i):function(o){var c=vc(o,t);return c===r&&c===i?_c(o,t):Jn(i,c,P|G)}}function no(t,i,o,c,f){t!==i&&$a(i,function(v,D){if(f||(f=new qr),mt(v))d0(t,i,D,o,no,c,f);else{var A=c?c(uc(t,D),v,D+"",t,i,f):r;A===r&&(A=v),Ma(t,D,A)}},dr)}function d0(t,i,o,c,f,v,D){var A=uc(t,o),$=uc(i,o),W=D.get($);if(W){Ma(t,o,W);return}var Y=v?v(A,$,o+"",t,i,D):r,te=Y===r;if(te){var ae=Ne($),pe=!ae&&Ci($),be=!ae&&!pe&&En($);Y=$,ae||pe||be?Ne(A)?Y=A:Tt(A)?Y=lr(A):pe?(te=!1,Y=Ph($,!0)):be?(te=!1,Y=Th($,!0)):Y=[]:ts($)||Yi($)?(Y=A,Yi(A)?Y=Ol(A):(!mt(A)||di(A))&&(Y=Yh($))):te=!1}te&&(D.set($,Y),f(Y,$,c,v,D),D.delete($)),Ma(t,o,Y)}function bh(t,i){var o=t.length;if(o)return i+=i<0?o:0,fi(i,o)?t[i]:r}function mh(t,i,o){i.length?i=_t(i,function(v){return Ne(v)?function(D){return Vi(D,v.length===1?v[0]:v)}:v}):i=[pr];var c=-1;i=_t(i,mr(_e()));var f=yh(t,function(v,D,A){var $=_t(i,function(W){return W(v)});return{criteria:$,index:++c,value:v}});return Bp(f,function(v,D){return x0(v,D,o)})}function p0(t,i){return wh(t,i,function(o,c){return _c(t,c)})}function wh(t,i,o){for(var c=-1,f=i.length,v={};++c<f;){var D=i[c],A=Vi(t,D);o(A,D)&&Xn(v,xi(D,t),A)}return v}function g0(t){return function(i){return Vi(i,t)}}function ka(t,i,o,c){var f=c?jp:ln,v=-1,D=i.length,A=t;for(t===i&&(i=lr(i)),o&&(A=_t(t,mr(o)));++v<D;)for(var $=0,W=i[v],Y=o?o(W):W;($=f(A,Y,$,c))>-1;)A!==t&&Ws.call(A,$,1),Ws.call(t,$,1);return t}function Eh(t,i){for(var o=t?i.length:0,c=o-1;o--;){var f=i[o];if(o==c||f!==v){var v=f;fi(f)?Ws.call(t,f,1):Ya(t,f)}}return t}function Va(t,i){return t+Xs(rh()*(i-t+1))}function y0(t,i,o,c){for(var f=-1,v=Kt(Js((i-t)/(o||1)),0),D=H(v);v--;)D[c?v:++f]=t,t+=o;return D}function Ga(t,i){var o="";if(!t||i<1||i>K)return o;do i%2&&(o+=t),i=Xs(i/2),i&&(t+=t);while(i);return o}function Ke(t,i){return hc(Zh(t,i,pr),t+"")}function v0(t){return sh(Dn(t))}function _0(t,i){var o=Dn(t);return go(o,ki(i,0,o.length))}function Xn(t,i,o,c){if(!mt(t))return t;i=xi(i,t);for(var f=-1,v=i.length,D=v-1,A=t;A!=null&&++f<v;){var $=Zr(i[f]),W=o;if($==="__proto__"||$==="constructor"||$==="prototype")return t;if(f!=D){var Y=A[$];W=c?c(Y,$,A):r,W===r&&(W=mt(Y)?Y:fi(i[f+1])?[]:{})}Gn(A,$,W),A=A[$]}return t}var Dh=Zs?function(t,i){return Zs.set(t,i),t}:pr,b0=Ys?function(t,i){return Ys(t,"toString",{configurable:!0,enumerable:!1,value:mc(i),writable:!0})}:pr;function m0(t){return go(Dn(t))}function Nr(t,i,o){var c=-1,f=t.length;i<0&&(i=-i>f?0:f+i),o=o>f?f:o,o<0&&(o+=f),f=i>o?0:o-i>>>0,i>>>=0;for(var v=H(f);++c<f;)v[c]=t[c+i];return v}function w0(t,i){var o;return Si(t,function(c,f,v){return o=i(c,f,v),!o}),!!o}function so(t,i,o){var c=0,f=t==null?c:t.length;if(typeof i=="number"&&i===i&&f<=oe){for(;c<f;){var v=c+f>>>1,D=t[v];D!==null&&!Er(D)&&(o?D<=i:D<i)?c=v+1:f=v}return f}return Wa(t,i,pr,o)}function Wa(t,i,o,c){var f=0,v=t==null?0:t.length;if(v===0)return 0;i=o(i);for(var D=i!==i,A=i===null,$=Er(i),W=i===r;f<v;){var Y=Xs((f+v)/2),te=o(t[Y]),ae=te!==r,pe=te===null,be=te===te,ze=Er(te);if(D)var me=c||be;else W?me=be&&(c||ae):A?me=be&&ae&&(c||!pe):$?me=be&&ae&&!pe&&(c||!ze):pe||ze?me=!1:me=c?te<=i:te<i;me?f=Y+1:v=Y}return Xt(v,De)}function Sh(t,i){for(var o=-1,c=t.length,f=0,v=[];++o<c;){var D=t[o],A=i?i(D):D;if(!o||!Kr(A,$)){var $=A;v[f++]=D===0?0:D}}return v}function Ih(t){return typeof t=="number"?t:Er(t)?ee:+t}function wr(t){if(typeof t=="string")return t;if(Ne(t))return _t(t,wr)+"";if(Er(t))return ih?ih.call(t):"";var i=t+"";return i=="0"&&1/t==-J?"-0":i}function Ii(t,i,o){var c=-1,f=$s,v=t.length,D=!0,A=[],$=A;if(o)D=!1,f=Da;else if(v>=a){var W=i?null:N0(t);if(W)return Bs(W);D=!1,f=zn,$=new Ki}else $=i?[]:A;e:for(;++c<v;){var Y=t[c],te=i?i(Y):Y;if(Y=o||Y!==0?Y:0,D&&te===te){for(var ae=$.length;ae--;)if($[ae]===te)continue e;i&&$.push(te),A.push(Y)}else f($,te,o)||($!==A&&$.push(te),A.push(Y))}return A}function Ya(t,i){return i=xi(i,t),t=Qh(t,i),t==null||delete t[Zr(Rr(i))]}function xh(t,i,o,c){return Xn(t,i,o(Vi(t,i)),c)}function oo(t,i,o,c){for(var f=t.length,v=c?f:-1;(c?v--:++v<f)&&i(t[v],v,t););return o?Nr(t,c?0:v,c?v+1:f):Nr(t,c?v+1:0,c?f:v)}function Oh(t,i){var o=t;return o instanceof Ye&&(o=o.value()),Sa(i,function(c,f){return f.func.apply(f.thisArg,wi([c],f.args))},o)}function Ja(t,i,o){var c=t.length;if(c<2)return c?Ii(t[0]):[];for(var f=-1,v=H(c);++f<c;)for(var D=t[f],A=-1;++A<c;)A!=f&&(v[f]=Wn(v[f]||D,t[A],i,o));return Ii(Wt(v,1),i,o)}function Ch(t,i,o){for(var c=-1,f=t.length,v=i.length,D={};++c<f;){var A=c<v?i[c]:r;o(D,t[c],A)}return D}function Xa(t){return Tt(t)?t:[]}function Za(t){return typeof t=="function"?t:pr}function xi(t,i){return Ne(t)?t:ac(t,i)?[t]:il(it(t))}var E0=Ke;function Oi(t,i,o){var c=t.length;return o=o===r?c:o,!i&&o>=c?t:Nr(t,i,o)}var Ah=ug||function(t){return Xe.clearTimeout(t)};function Ph(t,i){if(i)return t.slice();var o=t.length,c=Xu?Xu(o):new t.constructor(o);return t.copy(c),c}function Qa(t){var i=new t.constructor(t.byteLength);return new Vs(i).set(new Vs(t)),i}function D0(t,i){var o=i?Qa(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}function S0(t){var i=new t.constructor(t.source,xr.exec(t));return i.lastIndex=t.lastIndex,i}function I0(t){return Vn?ut(Vn.call(t)):{}}function Th(t,i){var o=i?Qa(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}function Nh(t,i){if(t!==i){var o=t!==r,c=t===null,f=t===t,v=Er(t),D=i!==r,A=i===null,$=i===i,W=Er(i);if(!A&&!W&&!v&&t>i||v&&D&&$&&!A&&!W||c&&D&&$||!o&&$||!f)return 1;if(!c&&!v&&!W&&t<i||W&&o&&f&&!c&&!v||A&&o&&f||!D&&f||!$)return-1}return 0}function x0(t,i,o){for(var c=-1,f=t.criteria,v=i.criteria,D=f.length,A=o.length;++c<D;){var $=Nh(f[c],v[c]);if($){if(c>=A)return $;var W=o[c];return $*(W=="desc"?-1:1)}}return t.index-i.index}function Rh(t,i,o,c){for(var f=-1,v=t.length,D=o.length,A=-1,$=i.length,W=Kt(v-D,0),Y=H($+W),te=!c;++A<$;)Y[A]=i[A];for(;++f<D;)(te||f<v)&&(Y[o[f]]=t[f]);for(;W--;)Y[A++]=t[f++];return Y}function Fh(t,i,o,c){for(var f=-1,v=t.length,D=-1,A=o.length,$=-1,W=i.length,Y=Kt(v-A,0),te=H(Y+W),ae=!c;++f<Y;)te[f]=t[f];for(var pe=f;++$<W;)te[pe+$]=i[$];for(;++D<A;)(ae||f<v)&&(te[pe+o[D]]=t[f++]);return te}function lr(t,i){var o=-1,c=t.length;for(i||(i=H(c));++o<c;)i[o]=t[o];return i}function Xr(t,i,o,c){var f=!o;o||(o={});for(var v=-1,D=i.length;++v<D;){var A=i[v],$=c?c(o[A],t[A],A,o,t):r;$===r&&($=t[A]),f?ui(o,A,$):Gn(o,A,$)}return o}function O0(t,i){return Xr(t,oc(t),i)}function C0(t,i){return Xr(t,Gh(t),i)}function ao(t,i){return function(o,c){var f=Ne(o)?Rp:Jg,v=i?i():{};return f(o,t,_e(c,2),v)}}function bn(t){return Ke(function(i,o){var c=-1,f=o.length,v=f>1?o[f-1]:r,D=f>2?o[2]:r;for(v=t.length>3&&typeof v=="function"?(f--,v):r,D&&nr(o[0],o[1],D)&&(v=f<3?r:v,f=1),i=ut(i);++c<f;){var A=o[c];A&&t(i,A,c,v)}return i})}function Uh(t,i){return function(o,c){if(o==null)return o;if(!fr(o))return t(o,c);for(var f=o.length,v=i?f:-1,D=ut(o);(i?v--:++v<f)&&c(D[v],v,D)!==!1;);return o}}function Mh(t){return function(i,o,c){for(var f=-1,v=ut(i),D=c(i),A=D.length;A--;){var $=D[t?A:++f];if(o(v[$],$,v)===!1)break}return i}}function A0(t,i,o){var c=i&q,f=Zn(t);function v(){var D=this&&this!==Xe&&this instanceof v?f:t;return D.apply(c?o:this,arguments)}return v}function Lh(t){return function(i){i=it(i);var o=fn(i)?Hr(i):r,c=o?o[0]:i.charAt(0),f=o?Oi(o,1).join(""):i.slice(1);return c[t]()+f}}function mn(t){return function(i){return Sa(Ul(Fl(i).replace(jn,"")),t,"")}}function Zn(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=_n(t.prototype),c=t.apply(o,i);return mt(c)?c:o}}function P0(t,i,o){var c=Zn(t);function f(){for(var v=arguments.length,D=H(v),A=v,$=wn(f);A--;)D[A]=arguments[A];var W=v<3&&D[0]!==$&&D[v-1]!==$?[]:Ei(D,$);if(v-=W.length,v<o)return Hh(t,i,co,f.placeholder,r,D,W,r,r,o-v);var Y=this&&this!==Xe&&this instanceof f?c:t;return kt(Y,this,D)}return f}function $h(t){return function(i,o,c){var f=ut(i);if(!fr(i)){var v=_e(o,3);i=Vt(i),o=function(A){return v(f[A],A,f)}}var D=t(i,o,c);return D>-1?f[v?i[D]:D]:r}}function jh(t){return li(function(i){var o=i.length,c=o,f=Pr.prototype.thru;for(t&&i.reverse();c--;){var v=i[c];if(typeof v!="function")throw new Ar(p);if(f&&!D&&fo(v)=="wrapper")var D=new Pr([],!0)}for(c=D?c:o;++c<o;){v=i[c];var A=fo(v),$=A=="wrapper"?nc(v):r;$&&cc($[0])&&$[1]==(u|M|x|_)&&!$[4].length&&$[9]==1?D=D[fo($[0])].apply(D,$[3]):D=v.length==1&&cc(v)?D[A]():D.thru(v)}return function(){var W=arguments,Y=W[0];if(D&&W.length==1&&Ne(Y))return D.plant(Y).value();for(var te=0,ae=o?i[te].apply(this,W):Y;++te<o;)ae=i[te].call(this,ae);return ae}})}function co(t,i,o,c,f,v,D,A,$,W){var Y=i&u,te=i&q,ae=i&ie,pe=i&(M|E),be=i&Q,ze=ae?r:Zn(t);function me(){for(var Ge=arguments.length,Ze=H(Ge),Dr=Ge;Dr--;)Ze[Dr]=arguments[Dr];if(pe)var sr=wn(me),Sr=Hp(Ze,sr);if(c&&(Ze=Rh(Ze,c,f,pe)),v&&(Ze=Fh(Ze,v,D,pe)),Ge-=Sr,pe&&Ge<W){var Nt=Ei(Ze,sr);return Hh(t,i,co,me.placeholder,o,Ze,Nt,A,$,W-Ge)}var kr=te?o:this,gi=ae?kr[t]:t;return Ge=Ze.length,A?Ze=J0(Ze,A):be&&Ge>1&&Ze.reverse(),Y&&$<Ge&&(Ze.length=$),this&&this!==Xe&&this instanceof me&&(gi=ze||Zn(gi)),gi.apply(kr,Ze)}return me}function Bh(t,i){return function(o,c){return n0(o,t,i(c),{})}}function uo(t,i){return function(o,c){var f;if(o===r&&c===r)return i;if(o!==r&&(f=o),c!==r){if(f===r)return c;typeof o=="string"||typeof c=="string"?(o=wr(o),c=wr(c)):(o=Ih(o),c=Ih(c)),f=t(o,c)}return f}}function ec(t){return li(function(i){return i=_t(i,mr(_e())),Ke(function(o){var c=this;return t(i,function(f){return kt(f,c,o)})})})}function ho(t,i){i=i===r?" ":wr(i);var o=i.length;if(o<2)return o?Ga(i,t):i;var c=Ga(i,Js(t/dn(i)));return fn(i)?Oi(Hr(c),0,t).join(""):c.slice(0,t)}function T0(t,i,o,c){var f=i&q,v=Zn(t);function D(){for(var A=-1,$=arguments.length,W=-1,Y=c.length,te=H(Y+$),ae=this&&this!==Xe&&this instanceof D?v:t;++W<Y;)te[W]=c[W];for(;$--;)te[W++]=arguments[++A];return kt(ae,f?o:this,te)}return D}function zh(t){return function(i,o,c){return c&&typeof c!="number"&&nr(i,o,c)&&(o=c=r),i=pi(i),o===r?(o=i,i=0):o=pi(o),c=c===r?i<o?1:-1:pi(c),y0(i,o,c,t)}}function lo(t){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Fr(i),o=Fr(o)),t(i,o)}}function Hh(t,i,o,c,f,v,D,A,$,W){var Y=i&M,te=Y?D:r,ae=Y?r:D,pe=Y?v:r,be=Y?r:v;i|=Y?x:O,i&=~(Y?O:x),i&T||(i&=~(q|ie));var ze=[t,i,f,pe,te,be,ae,A,$,W],me=o.apply(r,ze);return cc(t)&&el(me,ze),me.placeholder=c,tl(me,t,i)}function tc(t){var i=qt[t];return function(o,c){if(o=Fr(o),c=c==null?0:Xt($e(c),292),c&&th(o)){var f=(it(o)+"e").split("e"),v=i(f[0]+"e"+(+f[1]+c));return f=(it(v)+"e").split("e"),+(f[0]+"e"+(+f[1]-c))}return i(o)}}var N0=yn&&1/Bs(new yn([,-0]))[1]==J?function(t){return new yn(t)}:Dc;function qh(t){return function(i){var o=Zt(i);return o==Ee?Ta(i):o==Ie?Yp(i):zp(i,t(i))}}function hi(t,i,o,c,f,v,D,A){var $=i&ie;if(!$&&typeof t!="function")throw new Ar(p);var W=c?c.length:0;if(W||(i&=~(x|O),c=f=r),D=D===r?D:Kt($e(D),0),A=A===r?A:$e(A),W-=f?f.length:0,i&O){var Y=c,te=f;c=f=r}var ae=$?r:nc(t),pe=[t,i,o,c,f,Y,te,v,D,A];if(ae&&G0(pe,ae),t=pe[0],i=pe[1],o=pe[2],c=pe[3],f=pe[4],A=pe[9]=pe[9]===r?$?0:t.length:Kt(pe[9]-W,0),!A&&i&(M|E)&&(i&=~(M|E)),!i||i==q)var be=A0(t,i,o);else i==M||i==E?be=P0(t,i,A):(i==x||i==(q|x))&&!f.length?be=T0(t,i,o,c):be=co.apply(r,pe);var ze=ae?Dh:el;return tl(ze(be,pe),t,i)}function Kh(t,i,o,c){return t===r||Kr(t,gn[o])&&!nt.call(c,o)?i:t}function kh(t,i,o,c,f,v){return mt(t)&&mt(i)&&(v.set(i,t),no(t,i,r,kh,v),v.delete(i)),t}function R0(t){return ts(t)?r:t}function Vh(t,i,o,c,f,v){var D=o&P,A=t.length,$=i.length;if(A!=$&&!(D&&$>A))return!1;var W=v.get(t),Y=v.get(i);if(W&&Y)return W==i&&Y==t;var te=-1,ae=!0,pe=o&G?new Ki:r;for(v.set(t,i),v.set(i,t);++te<A;){var be=t[te],ze=i[te];if(c)var me=D?c(ze,be,te,i,t,v):c(be,ze,te,t,i,v);if(me!==r){if(me)continue;ae=!1;break}if(pe){if(!Ia(i,function(Ge,Ze){if(!zn(pe,Ze)&&(be===Ge||f(be,Ge,o,c,v)))return pe.push(Ze)})){ae=!1;break}}else if(!(be===ze||f(be,ze,o,c,v))){ae=!1;break}}return v.delete(t),v.delete(i),ae}function F0(t,i,o,c,f,v,D){switch(o){case Ce:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case we:return!(t.byteLength!=i.byteLength||!v(new Vs(t),new Vs(i)));case j:case F:case He:return Kr(+t,+i);case I:return t.name==i.name&&t.message==i.message;case je:case Re:return t==i+"";case Ee:var A=Ta;case Ie:var $=c&P;if(A||(A=Bs),t.size!=i.size&&!$)return!1;var W=D.get(t);if(W)return W==i;c|=G,D.set(t,i);var Y=Vh(A(t),A(i),c,f,v,D);return D.delete(t),Y;case Fe:if(Vn)return Vn.call(t)==Vn.call(i)}return!1}function U0(t,i,o,c,f,v){var D=o&P,A=rc(t),$=A.length,W=rc(i),Y=W.length;if($!=Y&&!D)return!1;for(var te=$;te--;){var ae=A[te];if(!(D?ae in i:nt.call(i,ae)))return!1}var pe=v.get(t),be=v.get(i);if(pe&&be)return pe==i&&be==t;var ze=!0;v.set(t,i),v.set(i,t);for(var me=D;++te<$;){ae=A[te];var Ge=t[ae],Ze=i[ae];if(c)var Dr=D?c(Ze,Ge,ae,i,t,v):c(Ge,Ze,ae,t,i,v);if(!(Dr===r?Ge===Ze||f(Ge,Ze,o,c,v):Dr)){ze=!1;break}me||(me=ae=="constructor")}if(ze&&!me){var sr=t.constructor,Sr=i.constructor;sr!=Sr&&"constructor"in t&&"constructor"in i&&!(typeof sr=="function"&&sr instanceof sr&&typeof Sr=="function"&&Sr instanceof Sr)&&(ze=!1)}return v.delete(t),v.delete(i),ze}function li(t){return hc(Zh(t,r,al),t+"")}function rc(t){return fh(t,Vt,oc)}function ic(t){return fh(t,dr,Gh)}var nc=Zs?function(t){return Zs.get(t)}:Dc;function fo(t){for(var i=t.name+"",o=vn[i],c=nt.call(vn,i)?o.length:0;c--;){var f=o[c],v=f.func;if(v==null||v==t)return f.name}return i}function wn(t){var i=nt.call(y,"placeholder")?y:t;return i.placeholder}function _e(){var t=y.iteratee||wc;return t=t===wc?gh:t,arguments.length?t(arguments[0],arguments[1]):t}function po(t,i){var o=t.__data__;return q0(i)?o[typeof i=="string"?"string":"hash"]:o.map}function sc(t){for(var i=Vt(t),o=i.length;o--;){var c=i[o],f=t[c];i[o]=[c,f,Jh(f)]}return i}function Gi(t,i){var o=Vp(t,i);return ph(o)?o:r}function M0(t){var i=nt.call(t,Hi),o=t[Hi];try{t[Hi]=r;var c=!0}catch{}var f=Ks.call(t);return c&&(i?t[Hi]=o:delete t[Hi]),f}var oc=Ra?function(t){return t==null?[]:(t=ut(t),mi(Ra(t),function(i){return Qu.call(t,i)}))}:Sc,Gh=Ra?function(t){for(var i=[];t;)wi(i,oc(t)),t=Gs(t);return i}:Sc,Zt=ir;(Fa&&Zt(new Fa(new ArrayBuffer(1)))!=Ce||qn&&Zt(new qn)!=Ee||Ua&&Zt(Ua.resolve())!=pt||yn&&Zt(new yn)!=Ie||Kn&&Zt(new Kn)!=Oe)&&(Zt=function(t){var i=ir(t),o=i==Le?t.constructor:r,c=o?Wi(o):"";if(c)switch(c){case _g:return Ce;case bg:return Ee;case mg:return pt;case wg:return Ie;case Eg:return Oe}return i});function L0(t,i,o){for(var c=-1,f=o.length;++c<f;){var v=o[c],D=v.size;switch(v.type){case"drop":t+=D;break;case"dropRight":i-=D;break;case"take":i=Xt(i,t+D);break;case"takeRight":t=Kt(t,i-D);break}}return{start:t,end:i}}function $0(t){var i=t.match(ht);return i?i[1].split($t):[]}function Wh(t,i,o){i=xi(i,t);for(var c=-1,f=i.length,v=!1;++c<f;){var D=Zr(i[c]);if(!(v=t!=null&&o(t,D)))break;t=t[D]}return v||++c!=f?v:(f=t==null?0:t.length,!!f&&wo(f)&&fi(D,f)&&(Ne(t)||Yi(t)))}function j0(t){var i=t.length,o=new t.constructor(i);return i&&typeof t[0]=="string"&&nt.call(t,"index")&&(o.index=t.index,o.input=t.input),o}function Yh(t){return typeof t.constructor=="function"&&!Qn(t)?_n(Gs(t)):{}}function B0(t,i,o){var c=t.constructor;switch(i){case we:return Qa(t);case j:case F:return new c(+t);case Ce:return D0(t,o);case qe:case xe:case Ve:case We:case et:case tt:case Je:case er:case ur:return Th(t,o);case Ee:return new c;case He:case Re:return new c(t);case je:return S0(t);case Ie:return new c;case Fe:return I0(t)}}function z0(t,i){var o=i.length;if(!o)return t;var c=o-1;return i[c]=(o>1?"& ":"")+i[c],i=i.join(o>2?", ":" "),t.replace(xt,`{
/* [wrapped with `+i+`] */
`)}function H0(t){return Ne(t)||Yi(t)||!!(eh&&t&&t[eh])}function fi(t,i){var o=typeof t;return i=i??K,!!i&&(o=="number"||o!="symbol"&&ua.test(t))&&t>-1&&t%1==0&&t<i}function nr(t,i,o){if(!mt(o))return!1;var c=typeof i;return(c=="number"?fr(o)&&fi(i,o.length):c=="string"&&i in o)?Kr(o[i],t):!1}function ac(t,i){if(Ne(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||Er(t)?!0:Ut.test(t)||!vt.test(t)||i!=null&&t in ut(i)}function q0(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function cc(t){var i=fo(t),o=y[i];if(typeof o!="function"||!(i in Ye.prototype))return!1;if(t===o)return!0;var c=nc(o);return!!c&&t===c[0]}function K0(t){return!!Ju&&Ju in t}var k0=Hs?di:Ic;function Qn(t){var i=t&&t.constructor,o=typeof i=="function"&&i.prototype||gn;return t===o}function Jh(t){return t===t&&!mt(t)}function Xh(t,i){return function(o){return o==null?!1:o[t]===i&&(i!==r||t in ut(o))}}function V0(t){var i=bo(t,function(c){return o.size===w&&o.clear(),c}),o=i.cache;return i}function G0(t,i){var o=t[1],c=i[1],f=o|c,v=f<(q|ie|u),D=c==u&&o==M||c==u&&o==_&&t[7].length<=i[8]||c==(u|_)&&i[7].length<=i[8]&&o==M;if(!(v||D))return t;c&q&&(t[2]=i[2],f|=o&q?0:T);var A=i[3];if(A){var $=t[3];t[3]=$?Rh($,A,i[4]):A,t[4]=$?Ei(t[3],S):i[4]}return A=i[5],A&&($=t[5],t[5]=$?Fh($,A,i[6]):A,t[6]=$?Ei(t[5],S):i[6]),A=i[7],A&&(t[7]=A),c&u&&(t[8]=t[8]==null?i[8]:Xt(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=f,t}function W0(t){var i=[];if(t!=null)for(var o in ut(t))i.push(o);return i}function Y0(t){return Ks.call(t)}function Zh(t,i,o){return i=Kt(i===r?t.length-1:i,0),function(){for(var c=arguments,f=-1,v=Kt(c.length-i,0),D=H(v);++f<v;)D[f]=c[i+f];f=-1;for(var A=H(i+1);++f<i;)A[f]=c[f];return A[i]=o(D),kt(t,this,A)}}function Qh(t,i){return i.length<2?t:Vi(t,Nr(i,0,-1))}function J0(t,i){for(var o=t.length,c=Xt(i.length,o),f=lr(t);c--;){var v=i[c];t[c]=fi(v,o)?f[v]:r}return t}function uc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var el=rl(Dh),es=lg||function(t,i){return Xe.setTimeout(t,i)},hc=rl(b0);function tl(t,i,o){var c=i+"";return hc(t,z0(c,X0($0(c),o)))}function rl(t){var i=0,o=0;return function(){var c=gg(),f=ye-(c-o);if(o=c,f>0){if(++i>=ge)return arguments[0]}else i=0;return t.apply(r,arguments)}}function go(t,i){var o=-1,c=t.length,f=c-1;for(i=i===r?c:i;++o<i;){var v=Va(o,f),D=t[v];t[v]=t[o],t[o]=D}return t.length=i,t}var il=V0(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Mt,function(o,c,f,v){i.push(f?v.replace(ia,"$1"):c||o)}),i});function Zr(t){if(typeof t=="string"||Er(t))return t;var i=t+"";return i=="0"&&1/t==-J?"-0":i}function Wi(t){if(t!=null){try{return qs.call(t)}catch{}try{return t+""}catch{}}return""}function X0(t,i){return Cr(Se,function(o){var c="_."+o[0];i&o[1]&&!$s(t,c)&&t.push(c)}),t.sort()}function nl(t){if(t instanceof Ye)return t.clone();var i=new Pr(t.__wrapped__,t.__chain__);return i.__actions__=lr(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function Z0(t,i,o){(o?nr(t,i,o):i===r)?i=1:i=Kt($e(i),0);var c=t==null?0:t.length;if(!c||i<1)return[];for(var f=0,v=0,D=H(Js(c/i));f<c;)D[v++]=Nr(t,f,f+=i);return D}function Q0(t){for(var i=-1,o=t==null?0:t.length,c=0,f=[];++i<o;){var v=t[i];v&&(f[c++]=v)}return f}function e1(){var t=arguments.length;if(!t)return[];for(var i=H(t-1),o=arguments[0],c=t;c--;)i[c-1]=arguments[c];return wi(Ne(o)?lr(o):[o],Wt(i,1))}var t1=Ke(function(t,i){return Tt(t)?Wn(t,Wt(i,1,Tt,!0)):[]}),r1=Ke(function(t,i){var o=Rr(i);return Tt(o)&&(o=r),Tt(t)?Wn(t,Wt(i,1,Tt,!0),_e(o,2)):[]}),i1=Ke(function(t,i){var o=Rr(i);return Tt(o)&&(o=r),Tt(t)?Wn(t,Wt(i,1,Tt,!0),r,o):[]});function n1(t,i,o){var c=t==null?0:t.length;return c?(i=o||i===r?1:$e(i),Nr(t,i<0?0:i,c)):[]}function s1(t,i,o){var c=t==null?0:t.length;return c?(i=o||i===r?1:$e(i),i=c-i,Nr(t,0,i<0?0:i)):[]}function o1(t,i){return t&&t.length?oo(t,_e(i,3),!0,!0):[]}function a1(t,i){return t&&t.length?oo(t,_e(i,3),!0):[]}function c1(t,i,o,c){var f=t==null?0:t.length;return f?(o&&typeof o!="number"&&nr(t,i,o)&&(o=0,c=f),e0(t,i,o,c)):[]}function sl(t,i,o){var c=t==null?0:t.length;if(!c)return-1;var f=o==null?0:$e(o);return f<0&&(f=Kt(c+f,0)),js(t,_e(i,3),f)}function ol(t,i,o){var c=t==null?0:t.length;if(!c)return-1;var f=c-1;return o!==r&&(f=$e(o),f=o<0?Kt(c+f,0):Xt(f,c-1)),js(t,_e(i,3),f,!0)}function al(t){var i=t==null?0:t.length;return i?Wt(t,1):[]}function u1(t){var i=t==null?0:t.length;return i?Wt(t,J):[]}function h1(t,i){var o=t==null?0:t.length;return o?(i=i===r?1:$e(i),Wt(t,i)):[]}function l1(t){for(var i=-1,o=t==null?0:t.length,c={};++i<o;){var f=t[i];c[f[0]]=f[1]}return c}function cl(t){return t&&t.length?t[0]:r}function f1(t,i,o){var c=t==null?0:t.length;if(!c)return-1;var f=o==null?0:$e(o);return f<0&&(f=Kt(c+f,0)),ln(t,i,f)}function d1(t){var i=t==null?0:t.length;return i?Nr(t,0,-1):[]}var p1=Ke(function(t){var i=_t(t,Xa);return i.length&&i[0]===t[0]?za(i):[]}),g1=Ke(function(t){var i=Rr(t),o=_t(t,Xa);return i===Rr(o)?i=r:o.pop(),o.length&&o[0]===t[0]?za(o,_e(i,2)):[]}),y1=Ke(function(t){var i=Rr(t),o=_t(t,Xa);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===t[0]?za(o,r,i):[]});function v1(t,i){return t==null?"":dg.call(t,i)}function Rr(t){var i=t==null?0:t.length;return i?t[i-1]:r}function _1(t,i,o){var c=t==null?0:t.length;if(!c)return-1;var f=c;return o!==r&&(f=$e(o),f=f<0?Kt(c+f,0):Xt(f,c-1)),i===i?Xp(t,i,f):js(t,Hu,f,!0)}function b1(t,i){return t&&t.length?bh(t,$e(i)):r}var m1=Ke(ul);function ul(t,i){return t&&t.length&&i&&i.length?ka(t,i):t}function w1(t,i,o){return t&&t.length&&i&&i.length?ka(t,i,_e(o,2)):t}function E1(t,i,o){return t&&t.length&&i&&i.length?ka(t,i,r,o):t}var D1=li(function(t,i){var o=t==null?0:t.length,c=La(t,i);return Eh(t,_t(i,function(f){return fi(f,o)?+f:f}).sort(Nh)),c});function S1(t,i){var o=[];if(!(t&&t.length))return o;var c=-1,f=[],v=t.length;for(i=_e(i,3);++c<v;){var D=t[c];i(D,c,t)&&(o.push(D),f.push(c))}return Eh(t,f),o}function lc(t){return t==null?t:vg.call(t)}function I1(t,i,o){var c=t==null?0:t.length;return c?(o&&typeof o!="number"&&nr(t,i,o)?(i=0,o=c):(i=i==null?0:$e(i),o=o===r?c:$e(o)),Nr(t,i,o)):[]}function x1(t,i){return so(t,i)}function O1(t,i,o){return Wa(t,i,_e(o,2))}function C1(t,i){var o=t==null?0:t.length;if(o){var c=so(t,i);if(c<o&&Kr(t[c],i))return c}return-1}function A1(t,i){return so(t,i,!0)}function P1(t,i,o){return Wa(t,i,_e(o,2),!0)}function T1(t,i){var o=t==null?0:t.length;if(o){var c=so(t,i,!0)-1;if(Kr(t[c],i))return c}return-1}function N1(t){return t&&t.length?Sh(t):[]}function R1(t,i){return t&&t.length?Sh(t,_e(i,2)):[]}function F1(t){var i=t==null?0:t.length;return i?Nr(t,1,i):[]}function U1(t,i,o){return t&&t.length?(i=o||i===r?1:$e(i),Nr(t,0,i<0?0:i)):[]}function M1(t,i,o){var c=t==null?0:t.length;return c?(i=o||i===r?1:$e(i),i=c-i,Nr(t,i<0?0:i,c)):[]}function L1(t,i){return t&&t.length?oo(t,_e(i,3),!1,!0):[]}function $1(t,i){return t&&t.length?oo(t,_e(i,3)):[]}var j1=Ke(function(t){return Ii(Wt(t,1,Tt,!0))}),B1=Ke(function(t){var i=Rr(t);return Tt(i)&&(i=r),Ii(Wt(t,1,Tt,!0),_e(i,2))}),z1=Ke(function(t){var i=Rr(t);return i=typeof i=="function"?i:r,Ii(Wt(t,1,Tt,!0),r,i)});function H1(t){return t&&t.length?Ii(t):[]}function q1(t,i){return t&&t.length?Ii(t,_e(i,2)):[]}function K1(t,i){return i=typeof i=="function"?i:r,t&&t.length?Ii(t,r,i):[]}function fc(t){if(!(t&&t.length))return[];var i=0;return t=mi(t,function(o){if(Tt(o))return i=Kt(o.length,i),!0}),Aa(i,function(o){return _t(t,xa(o))})}function hl(t,i){if(!(t&&t.length))return[];var o=fc(t);return i==null?o:_t(o,function(c){return kt(i,r,c)})}var k1=Ke(function(t,i){return Tt(t)?Wn(t,i):[]}),V1=Ke(function(t){return Ja(mi(t,Tt))}),G1=Ke(function(t){var i=Rr(t);return Tt(i)&&(i=r),Ja(mi(t,Tt),_e(i,2))}),W1=Ke(function(t){var i=Rr(t);return i=typeof i=="function"?i:r,Ja(mi(t,Tt),r,i)}),Y1=Ke(fc);function J1(t,i){return Ch(t||[],i||[],Gn)}function X1(t,i){return Ch(t||[],i||[],Xn)}var Z1=Ke(function(t){var i=t.length,o=i>1?t[i-1]:r;return o=typeof o=="function"?(t.pop(),o):r,hl(t,o)});function ll(t){var i=y(t);return i.__chain__=!0,i}function Q1(t,i){return i(t),t}function yo(t,i){return i(t)}var ey=li(function(t){var i=t.length,o=i?t[0]:0,c=this.__wrapped__,f=function(v){return La(v,t)};return i>1||this.__actions__.length||!(c instanceof Ye)||!fi(o)?this.thru(f):(c=c.slice(o,+o+(i?1:0)),c.__actions__.push({func:yo,args:[f],thisArg:r}),new Pr(c,this.__chain__).thru(function(v){return i&&!v.length&&v.push(r),v}))});function ty(){return ll(this)}function ry(){return new Pr(this.value(),this.__chain__)}function iy(){this.__values__===r&&(this.__values__=Il(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function ny(){return this}function sy(t){for(var i,o=this;o instanceof eo;){var c=nl(o);c.__index__=0,c.__values__=r,i?f.__wrapped__=c:i=c;var f=c;o=o.__wrapped__}return f.__wrapped__=t,i}function oy(){var t=this.__wrapped__;if(t instanceof Ye){var i=t;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:yo,args:[lc],thisArg:r}),new Pr(i,this.__chain__)}return this.thru(lc)}function ay(){return Oh(this.__wrapped__,this.__actions__)}var cy=ao(function(t,i,o){nt.call(t,o)?++t[o]:ui(t,o,1)});function uy(t,i,o){var c=Ne(t)?Bu:Qg;return o&&nr(t,i,o)&&(i=r),c(t,_e(i,3))}function hy(t,i){var o=Ne(t)?mi:hh;return o(t,_e(i,3))}var ly=$h(sl),fy=$h(ol);function dy(t,i){return Wt(vo(t,i),1)}function py(t,i){return Wt(vo(t,i),J)}function gy(t,i,o){return o=o===r?1:$e(o),Wt(vo(t,i),o)}function fl(t,i){var o=Ne(t)?Cr:Si;return o(t,_e(i,3))}function dl(t,i){var o=Ne(t)?Fp:uh;return o(t,_e(i,3))}var yy=ao(function(t,i,o){nt.call(t,o)?t[o].push(i):ui(t,o,[i])});function vy(t,i,o,c){t=fr(t)?t:Dn(t),o=o&&!c?$e(o):0;var f=t.length;return o<0&&(o=Kt(f+o,0)),Eo(t)?o<=f&&t.indexOf(i,o)>-1:!!f&&ln(t,i,o)>-1}var _y=Ke(function(t,i,o){var c=-1,f=typeof i=="function",v=fr(t)?H(t.length):[];return Si(t,function(D){v[++c]=f?kt(i,D,o):Yn(D,i,o)}),v}),by=ao(function(t,i,o){ui(t,o,i)});function vo(t,i){var o=Ne(t)?_t:yh;return o(t,_e(i,3))}function my(t,i,o,c){return t==null?[]:(Ne(i)||(i=i==null?[]:[i]),o=c?r:o,Ne(o)||(o=o==null?[]:[o]),mh(t,i,o))}var wy=ao(function(t,i,o){t[o?0:1].push(i)},function(){return[[],[]]});function Ey(t,i,o){var c=Ne(t)?Sa:Ku,f=arguments.length<3;return c(t,_e(i,4),o,f,Si)}function Dy(t,i,o){var c=Ne(t)?Up:Ku,f=arguments.length<3;return c(t,_e(i,4),o,f,uh)}function Sy(t,i){var o=Ne(t)?mi:hh;return o(t,mo(_e(i,3)))}function Iy(t){var i=Ne(t)?sh:v0;return i(t)}function xy(t,i,o){(o?nr(t,i,o):i===r)?i=1:i=$e(i);var c=Ne(t)?Wg:_0;return c(t,i)}function Oy(t){var i=Ne(t)?Yg:m0;return i(t)}function Cy(t){if(t==null)return 0;if(fr(t))return Eo(t)?dn(t):t.length;var i=Zt(t);return i==Ee||i==Ie?t.size:qa(t).length}function Ay(t,i,o){var c=Ne(t)?Ia:w0;return o&&nr(t,i,o)&&(i=r),c(t,_e(i,3))}var Py=Ke(function(t,i){if(t==null)return[];var o=i.length;return o>1&&nr(t,i[0],i[1])?i=[]:o>2&&nr(i[0],i[1],i[2])&&(i=[i[0]]),mh(t,Wt(i,1),[])}),_o=hg||function(){return Xe.Date.now()};function Ty(t,i){if(typeof i!="function")throw new Ar(p);return t=$e(t),function(){if(--t<1)return i.apply(this,arguments)}}function pl(t,i,o){return i=o?r:i,i=t&&i==null?t.length:i,hi(t,u,r,r,r,r,i)}function gl(t,i){var o;if(typeof i!="function")throw new Ar(p);return t=$e(t),function(){return--t>0&&(o=i.apply(this,arguments)),t<=1&&(i=r),o}}var dc=Ke(function(t,i,o){var c=q;if(o.length){var f=Ei(o,wn(dc));c|=x}return hi(t,c,i,o,f)}),yl=Ke(function(t,i,o){var c=q|ie;if(o.length){var f=Ei(o,wn(yl));c|=x}return hi(i,c,t,o,f)});function vl(t,i,o){i=o?r:i;var c=hi(t,M,r,r,r,r,r,i);return c.placeholder=vl.placeholder,c}function _l(t,i,o){i=o?r:i;var c=hi(t,E,r,r,r,r,r,i);return c.placeholder=_l.placeholder,c}function bl(t,i,o){var c,f,v,D,A,$,W=0,Y=!1,te=!1,ae=!0;if(typeof t!="function")throw new Ar(p);i=Fr(i)||0,mt(o)&&(Y=!!o.leading,te="maxWait"in o,v=te?Kt(Fr(o.maxWait)||0,i):v,ae="trailing"in o?!!o.trailing:ae);function pe(Nt){var kr=c,gi=f;return c=f=r,W=Nt,D=t.apply(gi,kr),D}function be(Nt){return W=Nt,A=es(Ge,i),Y?pe(Nt):D}function ze(Nt){var kr=Nt-$,gi=Nt-W,$l=i-kr;return te?Xt($l,v-gi):$l}function me(Nt){var kr=Nt-$,gi=Nt-W;return $===r||kr>=i||kr<0||te&&gi>=v}function Ge(){var Nt=_o();if(me(Nt))return Ze(Nt);A=es(Ge,ze(Nt))}function Ze(Nt){return A=r,ae&&c?pe(Nt):(c=f=r,D)}function Dr(){A!==r&&Ah(A),W=0,c=$=f=A=r}function sr(){return A===r?D:Ze(_o())}function Sr(){var Nt=_o(),kr=me(Nt);if(c=arguments,f=this,$=Nt,kr){if(A===r)return be($);if(te)return Ah(A),A=es(Ge,i),pe($)}return A===r&&(A=es(Ge,i)),D}return Sr.cancel=Dr,Sr.flush=sr,Sr}var Ny=Ke(function(t,i){return ch(t,1,i)}),Ry=Ke(function(t,i,o){return ch(t,Fr(i)||0,o)});function Fy(t){return hi(t,Q)}function bo(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new Ar(p);var o=function(){var c=arguments,f=i?i.apply(this,c):c[0],v=o.cache;if(v.has(f))return v.get(f);var D=t.apply(this,c);return o.cache=v.set(f,D)||v,D};return o.cache=new(bo.Cache||ci),o}bo.Cache=ci;function mo(t){if(typeof t!="function")throw new Ar(p);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function Uy(t){return gl(2,t)}var My=E0(function(t,i){i=i.length==1&&Ne(i[0])?_t(i[0],mr(_e())):_t(Wt(i,1),mr(_e()));var o=i.length;return Ke(function(c){for(var f=-1,v=Xt(c.length,o);++f<v;)c[f]=i[f].call(this,c[f]);return kt(t,this,c)})}),pc=Ke(function(t,i){var o=Ei(i,wn(pc));return hi(t,x,r,i,o)}),ml=Ke(function(t,i){var o=Ei(i,wn(ml));return hi(t,O,r,i,o)}),Ly=li(function(t,i){return hi(t,_,r,r,r,i)});function $y(t,i){if(typeof t!="function")throw new Ar(p);return i=i===r?i:$e(i),Ke(t,i)}function jy(t,i){if(typeof t!="function")throw new Ar(p);return i=i==null?0:Kt($e(i),0),Ke(function(o){var c=o[i],f=Oi(o,0,i);return c&&wi(f,c),kt(t,this,f)})}function By(t,i,o){var c=!0,f=!0;if(typeof t!="function")throw new Ar(p);return mt(o)&&(c="leading"in o?!!o.leading:c,f="trailing"in o?!!o.trailing:f),bl(t,i,{leading:c,maxWait:i,trailing:f})}function zy(t){return pl(t,1)}function Hy(t,i){return pc(Za(i),t)}function qy(){if(!arguments.length)return[];var t=arguments[0];return Ne(t)?t:[t]}function Ky(t){return Tr(t,R)}function ky(t,i){return i=typeof i=="function"?i:r,Tr(t,R,i)}function Vy(t){return Tr(t,N|R)}function Gy(t,i){return i=typeof i=="function"?i:r,Tr(t,N|R,i)}function Wy(t,i){return i==null||ah(t,i,Vt(i))}function Kr(t,i){return t===i||t!==t&&i!==i}var Yy=lo(Ba),Jy=lo(function(t,i){return t>=i}),Yi=dh(function(){return arguments}())?dh:function(t){return Ot(t)&&nt.call(t,"callee")&&!Qu.call(t,"callee")},Ne=H.isArray,Xy=rr?mr(rr):s0;function fr(t){return t!=null&&wo(t.length)&&!di(t)}function Tt(t){return Ot(t)&&fr(t)}function Zy(t){return t===!0||t===!1||Ot(t)&&ir(t)==j}var Ci=fg||Ic,Qy=zr?mr(zr):o0;function ev(t){return Ot(t)&&t.nodeType===1&&!ts(t)}function tv(t){if(t==null)return!0;if(fr(t)&&(Ne(t)||typeof t=="string"||typeof t.splice=="function"||Ci(t)||En(t)||Yi(t)))return!t.length;var i=Zt(t);if(i==Ee||i==Ie)return!t.size;if(Qn(t))return!qa(t).length;for(var o in t)if(nt.call(t,o))return!1;return!0}function rv(t,i){return Jn(t,i)}function iv(t,i,o){o=typeof o=="function"?o:r;var c=o?o(t,i):r;return c===r?Jn(t,i,r,o):!!c}function gc(t){if(!Ot(t))return!1;var i=ir(t);return i==I||i==h||typeof t.message=="string"&&typeof t.name=="string"&&!ts(t)}function nv(t){return typeof t=="number"&&th(t)}function di(t){if(!mt(t))return!1;var i=ir(t);return i==se||i==he||i==B||i==gt}function wl(t){return typeof t=="number"&&t==$e(t)}function wo(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=K}function mt(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function Ot(t){return t!=null&&typeof t=="object"}var El=Or?mr(Or):c0;function sv(t,i){return t===i||Ha(t,i,sc(i))}function ov(t,i,o){return o=typeof o=="function"?o:r,Ha(t,i,sc(i),o)}function av(t){return Dl(t)&&t!=+t}function cv(t){if(k0(t))throw new Ae(l);return ph(t)}function uv(t){return t===null}function hv(t){return t==null}function Dl(t){return typeof t=="number"||Ot(t)&&ir(t)==He}function ts(t){if(!Ot(t)||ir(t)!=Le)return!1;var i=Gs(t);if(i===null)return!0;var o=nt.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&qs.call(o)==og}var yc=Yr?mr(Yr):u0;function lv(t){return wl(t)&&t>=-K&&t<=K}var Sl=Bn?mr(Bn):h0;function Eo(t){return typeof t=="string"||!Ne(t)&&Ot(t)&&ir(t)==Re}function Er(t){return typeof t=="symbol"||Ot(t)&&ir(t)==Fe}var En=zi?mr(zi):l0;function fv(t){return t===r}function dv(t){return Ot(t)&&Zt(t)==Oe}function pv(t){return Ot(t)&&ir(t)==Ue}var gv=lo(Ka),yv=lo(function(t,i){return t<=i});function Il(t){if(!t)return[];if(fr(t))return Eo(t)?Hr(t):lr(t);if(Hn&&t[Hn])return Wp(t[Hn]());var i=Zt(t),o=i==Ee?Ta:i==Ie?Bs:Dn;return o(t)}function pi(t){if(!t)return t===0?t:0;if(t=Fr(t),t===J||t===-J){var i=t<0?-1:1;return i*k}return t===t?t:0}function $e(t){var i=pi(t),o=i%1;return i===i?o?i-o:i:0}function xl(t){return t?ki($e(t),0,re):0}function Fr(t){if(typeof t=="number")return t;if(Er(t))return ee;if(mt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=mt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=ku(t);var o=oa.test(t);return o||ca.test(t)?Te(t.slice(2),o?2:8):sa.test(t)?ee:+t}function Ol(t){return Xr(t,dr(t))}function vv(t){return t?ki($e(t),-K,K):t===0?t:0}function it(t){return t==null?"":wr(t)}var _v=bn(function(t,i){if(Qn(i)||fr(i)){Xr(i,Vt(i),t);return}for(var o in i)nt.call(i,o)&&Gn(t,o,i[o])}),Cl=bn(function(t,i){Xr(i,dr(i),t)}),Do=bn(function(t,i,o,c){Xr(i,dr(i),t,c)}),bv=bn(function(t,i,o,c){Xr(i,Vt(i),t,c)}),mv=li(La);function wv(t,i){var o=_n(t);return i==null?o:oh(o,i)}var Ev=Ke(function(t,i){t=ut(t);var o=-1,c=i.length,f=c>2?i[2]:r;for(f&&nr(i[0],i[1],f)&&(c=1);++o<c;)for(var v=i[o],D=dr(v),A=-1,$=D.length;++A<$;){var W=D[A],Y=t[W];(Y===r||Kr(Y,gn[W])&&!nt.call(t,W))&&(t[W]=v[W])}return t}),Dv=Ke(function(t){return t.push(r,kh),kt(Al,r,t)});function Sv(t,i){return zu(t,_e(i,3),Jr)}function Iv(t,i){return zu(t,_e(i,3),ja)}function xv(t,i){return t==null?t:$a(t,_e(i,3),dr)}function Ov(t,i){return t==null?t:lh(t,_e(i,3),dr)}function Cv(t,i){return t&&Jr(t,_e(i,3))}function Av(t,i){return t&&ja(t,_e(i,3))}function Pv(t){return t==null?[]:io(t,Vt(t))}function Tv(t){return t==null?[]:io(t,dr(t))}function vc(t,i,o){var c=t==null?r:Vi(t,i);return c===r?o:c}function Nv(t,i){return t!=null&&Wh(t,i,t0)}function _c(t,i){return t!=null&&Wh(t,i,r0)}var Rv=Bh(function(t,i,o){i!=null&&typeof i.toString!="function"&&(i=Ks.call(i)),t[i]=o},mc(pr)),Fv=Bh(function(t,i,o){i!=null&&typeof i.toString!="function"&&(i=Ks.call(i)),nt.call(t,i)?t[i].push(o):t[i]=[o]},_e),Uv=Ke(Yn);function Vt(t){return fr(t)?nh(t):qa(t)}function dr(t){return fr(t)?nh(t,!0):f0(t)}function Mv(t,i){var o={};return i=_e(i,3),Jr(t,function(c,f,v){ui(o,i(c,f,v),c)}),o}function Lv(t,i){var o={};return i=_e(i,3),Jr(t,function(c,f,v){ui(o,f,i(c,f,v))}),o}var $v=bn(function(t,i,o){no(t,i,o)}),Al=bn(function(t,i,o,c){no(t,i,o,c)}),jv=li(function(t,i){var o={};if(t==null)return o;var c=!1;i=_t(i,function(v){return v=xi(v,t),c||(c=v.length>1),v}),Xr(t,ic(t),o),c&&(o=Tr(o,N|z|R,R0));for(var f=i.length;f--;)Ya(o,i[f]);return o});function Bv(t,i){return Pl(t,mo(_e(i)))}var zv=li(function(t,i){return t==null?{}:p0(t,i)});function Pl(t,i){if(t==null)return{};var o=_t(ic(t),function(c){return[c]});return i=_e(i),wh(t,o,function(c,f){return i(c,f[0])})}function Hv(t,i,o){i=xi(i,t);var c=-1,f=i.length;for(f||(f=1,t=r);++c<f;){var v=t==null?r:t[Zr(i[c])];v===r&&(c=f,v=o),t=di(v)?v.call(t):v}return t}function qv(t,i,o){return t==null?t:Xn(t,i,o)}function Kv(t,i,o,c){return c=typeof c=="function"?c:r,t==null?t:Xn(t,i,o,c)}var Tl=qh(Vt),Nl=qh(dr);function kv(t,i,o){var c=Ne(t),f=c||Ci(t)||En(t);if(i=_e(i,4),o==null){var v=t&&t.constructor;f?o=c?new v:[]:mt(t)?o=di(v)?_n(Gs(t)):{}:o={}}return(f?Cr:Jr)(t,function(D,A,$){return i(o,D,A,$)}),o}function Vv(t,i){return t==null?!0:Ya(t,i)}function Gv(t,i,o){return t==null?t:xh(t,i,Za(o))}function Wv(t,i,o,c){return c=typeof c=="function"?c:r,t==null?t:xh(t,i,Za(o),c)}function Dn(t){return t==null?[]:Pa(t,Vt(t))}function Yv(t){return t==null?[]:Pa(t,dr(t))}function Jv(t,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Fr(o),o=o===o?o:0),i!==r&&(i=Fr(i),i=i===i?i:0),ki(Fr(t),i,o)}function Xv(t,i,o){return i=pi(i),o===r?(o=i,i=0):o=pi(o),t=Fr(t),i0(t,i,o)}function Zv(t,i,o){if(o&&typeof o!="boolean"&&nr(t,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof t=="boolean"&&(o=t,t=r)),t===r&&i===r?(t=0,i=1):(t=pi(t),i===r?(i=t,t=0):i=pi(i)),t>i){var c=t;t=i,i=c}if(o||t%1||i%1){var f=rh();return Xt(t+f*(i-t+at("1e-"+((f+"").length-1))),i)}return Va(t,i)}var Qv=mn(function(t,i,o){return i=i.toLowerCase(),t+(o?Rl(i):i)});function Rl(t){return bc(it(t).toLowerCase())}function Fl(t){return t=it(t),t&&t.replace(si,qp).replace(wa,"")}function e_(t,i,o){t=it(t),i=wr(i);var c=t.length;o=o===r?c:ki($e(o),0,c);var f=o;return o-=i.length,o>=0&&t.slice(o,f)==i}function t_(t){return t=it(t),t&&yt.test(t)?t.replace(Mi,Kp):t}function r_(t){return t=it(t),t&&Lt.test(t)?t.replace(St,"\\$&"):t}var i_=mn(function(t,i,o){return t+(o?"-":"")+i.toLowerCase()}),n_=mn(function(t,i,o){return t+(o?" ":"")+i.toLowerCase()}),s_=Lh("toLowerCase");function o_(t,i,o){t=it(t),i=$e(i);var c=i?dn(t):0;if(!i||c>=i)return t;var f=(i-c)/2;return ho(Xs(f),o)+t+ho(Js(f),o)}function a_(t,i,o){t=it(t),i=$e(i);var c=i?dn(t):0;return i&&c<i?t+ho(i-c,o):t}function c_(t,i,o){t=it(t),i=$e(i);var c=i?dn(t):0;return i&&c<i?ho(i-c,o)+t:t}function u_(t,i,o){return o||i==null?i=0:i&&(i=+i),yg(it(t).replace(It,""),i||0)}function h_(t,i,o){return(o?nr(t,i,o):i===r)?i=1:i=$e(i),Ga(it(t),i)}function l_(){var t=arguments,i=it(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var f_=mn(function(t,i,o){return t+(o?"_":"")+i.toLowerCase()});function d_(t,i,o){return o&&typeof o!="number"&&nr(t,i,o)&&(i=o=r),o=o===r?re:o>>>0,o?(t=it(t),t&&(typeof i=="string"||i!=null&&!yc(i))&&(i=wr(i),!i&&fn(t))?Oi(Hr(t),0,o):t.split(i,o)):[]}var p_=mn(function(t,i,o){return t+(o?" ":"")+bc(i)});function g_(t,i,o){return t=it(t),o=o==null?0:ki($e(o),0,t.length),i=wr(i),t.slice(o,o+i.length)==i}function y_(t,i,o){var c=y.templateSettings;o&&nr(t,i,o)&&(i=r),t=it(t),i=Do({},i,c,Kh);var f=Do({},i.imports,c.imports,Kh),v=Vt(f),D=Pa(f,v),A,$,W=0,Y=i.interpolate||nn,te="__p += '",ae=Na((i.escape||nn).source+"|"+Y.source+"|"+(Y===bt?na:nn).source+"|"+(i.evaluate||nn).source+"|$","g"),pe="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ea+"]")+`
`;t.replace(ae,function(me,Ge,Ze,Dr,sr,Sr){return Ze||(Ze=Dr),te+=t.slice(W,Sr).replace(ha,kp),Ge&&(A=!0,te+=`' +
__e(`+Ge+`) +
'`),sr&&($=!0,te+=`';
`+sr+`;
__p += '`),Ze&&(te+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),W=Sr+me.length,me}),te+=`';
`;var be=nt.call(i,"variable")&&i.variable;if(!be)te=`with (obj) {
`+te+`
}
`;else if(ra.test(be))throw new Ae(d);te=($?te.replace(Gr,""):te).replace(tr,"$1").replace(ni,"$1;"),te="function("+(be||"obj")+`) {
`+(be?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+($?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+te+`return __p
}`;var ze=Ml(function(){return rt(v,pe+"return "+te).apply(r,D)});if(ze.source=te,gc(ze))throw ze;return ze}function v_(t){return it(t).toLowerCase()}function __(t){return it(t).toUpperCase()}function b_(t,i,o){if(t=it(t),t&&(o||i===r))return ku(t);if(!t||!(i=wr(i)))return t;var c=Hr(t),f=Hr(i),v=Vu(c,f),D=Gu(c,f)+1;return Oi(c,v,D).join("")}function m_(t,i,o){if(t=it(t),t&&(o||i===r))return t.slice(0,Yu(t)+1);if(!t||!(i=wr(i)))return t;var c=Hr(t),f=Gu(c,Hr(i))+1;return Oi(c,0,f).join("")}function w_(t,i,o){if(t=it(t),t&&(o||i===r))return t.replace(It,"");if(!t||!(i=wr(i)))return t;var c=Hr(t),f=Vu(c,Hr(i));return Oi(c,f).join("")}function E_(t,i){var o=ne,c=ue;if(mt(i)){var f="separator"in i?i.separator:f;o="length"in i?$e(i.length):o,c="omission"in i?wr(i.omission):c}t=it(t);var v=t.length;if(fn(t)){var D=Hr(t);v=D.length}if(o>=v)return t;var A=o-dn(c);if(A<1)return c;var $=D?Oi(D,0,A).join(""):t.slice(0,A);if(f===r)return $+c;if(D&&(A+=$.length-A),yc(f)){if(t.slice(A).search(f)){var W,Y=$;for(f.global||(f=Na(f.source,it(xr.exec(f))+"g")),f.lastIndex=0;W=f.exec(Y);)var te=W.index;$=$.slice(0,te===r?A:te)}}else if(t.indexOf(wr(f),A)!=A){var ae=$.lastIndexOf(f);ae>-1&&($=$.slice(0,ae))}return $+c}function D_(t){return t=it(t),t&&wt.test(t)?t.replace(_i,Zp):t}var S_=mn(function(t,i,o){return t+(o?" ":"")+i.toUpperCase()}),bc=Lh("toUpperCase");function Ul(t,i,o){return t=it(t),i=o?r:i,i===r?Gp(t)?tg(t):$p(t):t.match(i)||[]}var Ml=Ke(function(t,i){try{return kt(t,r,i)}catch(o){return gc(o)?o:new Ae(o)}}),I_=li(function(t,i){return Cr(i,function(o){o=Zr(o),ui(t,o,dc(t[o],t))}),t});function x_(t){var i=t==null?0:t.length,o=_e();return t=i?_t(t,function(c){if(typeof c[1]!="function")throw new Ar(p);return[o(c[0]),c[1]]}):[],Ke(function(c){for(var f=-1;++f<i;){var v=t[f];if(kt(v[0],this,c))return kt(v[1],this,c)}})}function O_(t){return Zg(Tr(t,N))}function mc(t){return function(){return t}}function C_(t,i){return t==null||t!==t?i:t}var A_=jh(),P_=jh(!0);function pr(t){return t}function wc(t){return gh(typeof t=="function"?t:Tr(t,N))}function T_(t){return vh(Tr(t,N))}function N_(t,i){return _h(t,Tr(i,N))}var R_=Ke(function(t,i){return function(o){return Yn(o,t,i)}}),F_=Ke(function(t,i){return function(o){return Yn(t,o,i)}});function Ec(t,i,o){var c=Vt(i),f=io(i,c);o==null&&!(mt(i)&&(f.length||!c.length))&&(o=i,i=t,t=this,f=io(i,Vt(i)));var v=!(mt(o)&&"chain"in o)||!!o.chain,D=di(t);return Cr(f,function(A){var $=i[A];t[A]=$,D&&(t.prototype[A]=function(){var W=this.__chain__;if(v||W){var Y=t(this.__wrapped__),te=Y.__actions__=lr(this.__actions__);return te.push({func:$,args:arguments,thisArg:t}),Y.__chain__=W,Y}return $.apply(t,wi([this.value()],arguments))})}),t}function U_(){return Xe._===this&&(Xe._=ag),this}function Dc(){}function M_(t){return t=$e(t),Ke(function(i){return bh(i,t)})}var L_=ec(_t),$_=ec(Bu),j_=ec(Ia);function Ll(t){return ac(t)?xa(Zr(t)):g0(t)}function B_(t){return function(i){return t==null?r:Vi(t,i)}}var z_=zh(),H_=zh(!0);function Sc(){return[]}function Ic(){return!1}function q_(){return{}}function K_(){return""}function k_(){return!0}function V_(t,i){if(t=$e(t),t<1||t>K)return[];var o=re,c=Xt(t,re);i=_e(i),t-=re;for(var f=Aa(c,i);++o<t;)i(o);return f}function G_(t){return Ne(t)?_t(t,Zr):Er(t)?[t]:lr(il(it(t)))}function W_(t){var i=++sg;return it(t)+i}var Y_=uo(function(t,i){return t+i},0),J_=tc("ceil"),X_=uo(function(t,i){return t/i},1),Z_=tc("floor");function Q_(t){return t&&t.length?ro(t,pr,Ba):r}function eb(t,i){return t&&t.length?ro(t,_e(i,2),Ba):r}function tb(t){return qu(t,pr)}function rb(t,i){return qu(t,_e(i,2))}function ib(t){return t&&t.length?ro(t,pr,Ka):r}function nb(t,i){return t&&t.length?ro(t,_e(i,2),Ka):r}var sb=uo(function(t,i){return t*i},1),ob=tc("round"),ab=uo(function(t,i){return t-i},0);function cb(t){return t&&t.length?Ca(t,pr):0}function ub(t,i){return t&&t.length?Ca(t,_e(i,2)):0}return y.after=Ty,y.ary=pl,y.assign=_v,y.assignIn=Cl,y.assignInWith=Do,y.assignWith=bv,y.at=mv,y.before=gl,y.bind=dc,y.bindAll=I_,y.bindKey=yl,y.castArray=qy,y.chain=ll,y.chunk=Z0,y.compact=Q0,y.concat=e1,y.cond=x_,y.conforms=O_,y.constant=mc,y.countBy=cy,y.create=wv,y.curry=vl,y.curryRight=_l,y.debounce=bl,y.defaults=Ev,y.defaultsDeep=Dv,y.defer=Ny,y.delay=Ry,y.difference=t1,y.differenceBy=r1,y.differenceWith=i1,y.drop=n1,y.dropRight=s1,y.dropRightWhile=o1,y.dropWhile=a1,y.fill=c1,y.filter=hy,y.flatMap=dy,y.flatMapDeep=py,y.flatMapDepth=gy,y.flatten=al,y.flattenDeep=u1,y.flattenDepth=h1,y.flip=Fy,y.flow=A_,y.flowRight=P_,y.fromPairs=l1,y.functions=Pv,y.functionsIn=Tv,y.groupBy=yy,y.initial=d1,y.intersection=p1,y.intersectionBy=g1,y.intersectionWith=y1,y.invert=Rv,y.invertBy=Fv,y.invokeMap=_y,y.iteratee=wc,y.keyBy=by,y.keys=Vt,y.keysIn=dr,y.map=vo,y.mapKeys=Mv,y.mapValues=Lv,y.matches=T_,y.matchesProperty=N_,y.memoize=bo,y.merge=$v,y.mergeWith=Al,y.method=R_,y.methodOf=F_,y.mixin=Ec,y.negate=mo,y.nthArg=M_,y.omit=jv,y.omitBy=Bv,y.once=Uy,y.orderBy=my,y.over=L_,y.overArgs=My,y.overEvery=$_,y.overSome=j_,y.partial=pc,y.partialRight=ml,y.partition=wy,y.pick=zv,y.pickBy=Pl,y.property=Ll,y.propertyOf=B_,y.pull=m1,y.pullAll=ul,y.pullAllBy=w1,y.pullAllWith=E1,y.pullAt=D1,y.range=z_,y.rangeRight=H_,y.rearg=Ly,y.reject=Sy,y.remove=S1,y.rest=$y,y.reverse=lc,y.sampleSize=xy,y.set=qv,y.setWith=Kv,y.shuffle=Oy,y.slice=I1,y.sortBy=Py,y.sortedUniq=N1,y.sortedUniqBy=R1,y.split=d_,y.spread=jy,y.tail=F1,y.take=U1,y.takeRight=M1,y.takeRightWhile=L1,y.takeWhile=$1,y.tap=Q1,y.throttle=By,y.thru=yo,y.toArray=Il,y.toPairs=Tl,y.toPairsIn=Nl,y.toPath=G_,y.toPlainObject=Ol,y.transform=kv,y.unary=zy,y.union=j1,y.unionBy=B1,y.unionWith=z1,y.uniq=H1,y.uniqBy=q1,y.uniqWith=K1,y.unset=Vv,y.unzip=fc,y.unzipWith=hl,y.update=Gv,y.updateWith=Wv,y.values=Dn,y.valuesIn=Yv,y.without=k1,y.words=Ul,y.wrap=Hy,y.xor=V1,y.xorBy=G1,y.xorWith=W1,y.zip=Y1,y.zipObject=J1,y.zipObjectDeep=X1,y.zipWith=Z1,y.entries=Tl,y.entriesIn=Nl,y.extend=Cl,y.extendWith=Do,Ec(y,y),y.add=Y_,y.attempt=Ml,y.camelCase=Qv,y.capitalize=Rl,y.ceil=J_,y.clamp=Jv,y.clone=Ky,y.cloneDeep=Vy,y.cloneDeepWith=Gy,y.cloneWith=ky,y.conformsTo=Wy,y.deburr=Fl,y.defaultTo=C_,y.divide=X_,y.endsWith=e_,y.eq=Kr,y.escape=t_,y.escapeRegExp=r_,y.every=uy,y.find=ly,y.findIndex=sl,y.findKey=Sv,y.findLast=fy,y.findLastIndex=ol,y.findLastKey=Iv,y.floor=Z_,y.forEach=fl,y.forEachRight=dl,y.forIn=xv,y.forInRight=Ov,y.forOwn=Cv,y.forOwnRight=Av,y.get=vc,y.gt=Yy,y.gte=Jy,y.has=Nv,y.hasIn=_c,y.head=cl,y.identity=pr,y.includes=vy,y.indexOf=f1,y.inRange=Xv,y.invoke=Uv,y.isArguments=Yi,y.isArray=Ne,y.isArrayBuffer=Xy,y.isArrayLike=fr,y.isArrayLikeObject=Tt,y.isBoolean=Zy,y.isBuffer=Ci,y.isDate=Qy,y.isElement=ev,y.isEmpty=tv,y.isEqual=rv,y.isEqualWith=iv,y.isError=gc,y.isFinite=nv,y.isFunction=di,y.isInteger=wl,y.isLength=wo,y.isMap=El,y.isMatch=sv,y.isMatchWith=ov,y.isNaN=av,y.isNative=cv,y.isNil=hv,y.isNull=uv,y.isNumber=Dl,y.isObject=mt,y.isObjectLike=Ot,y.isPlainObject=ts,y.isRegExp=yc,y.isSafeInteger=lv,y.isSet=Sl,y.isString=Eo,y.isSymbol=Er,y.isTypedArray=En,y.isUndefined=fv,y.isWeakMap=dv,y.isWeakSet=pv,y.join=v1,y.kebabCase=i_,y.last=Rr,y.lastIndexOf=_1,y.lowerCase=n_,y.lowerFirst=s_,y.lt=gv,y.lte=yv,y.max=Q_,y.maxBy=eb,y.mean=tb,y.meanBy=rb,y.min=ib,y.minBy=nb,y.stubArray=Sc,y.stubFalse=Ic,y.stubObject=q_,y.stubString=K_,y.stubTrue=k_,y.multiply=sb,y.nth=b1,y.noConflict=U_,y.noop=Dc,y.now=_o,y.pad=o_,y.padEnd=a_,y.padStart=c_,y.parseInt=u_,y.random=Zv,y.reduce=Ey,y.reduceRight=Dy,y.repeat=h_,y.replace=l_,y.result=Hv,y.round=ob,y.runInContext=L,y.sample=Iy,y.size=Cy,y.snakeCase=f_,y.some=Ay,y.sortedIndex=x1,y.sortedIndexBy=O1,y.sortedIndexOf=C1,y.sortedLastIndex=A1,y.sortedLastIndexBy=P1,y.sortedLastIndexOf=T1,y.startCase=p_,y.startsWith=g_,y.subtract=ab,y.sum=cb,y.sumBy=ub,y.template=y_,y.times=V_,y.toFinite=pi,y.toInteger=$e,y.toLength=xl,y.toLower=v_,y.toNumber=Fr,y.toSafeInteger=vv,y.toString=it,y.toUpper=__,y.trim=b_,y.trimEnd=m_,y.trimStart=w_,y.truncate=E_,y.unescape=D_,y.uniqueId=W_,y.upperCase=S_,y.upperFirst=bc,y.each=fl,y.eachRight=dl,y.first=cl,Ec(y,function(){var t={};return Jr(y,function(i,o){nt.call(y.prototype,o)||(t[o]=i)}),t}(),{chain:!1}),y.VERSION=s,Cr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){y[t].placeholder=y}),Cr(["drop","take"],function(t,i){Ye.prototype[t]=function(o){o=o===r?1:Kt($e(o),0);var c=this.__filtered__&&!i?new Ye(this):this.clone();return c.__filtered__?c.__takeCount__=Xt(o,c.__takeCount__):c.__views__.push({size:Xt(o,re),type:t+(c.__dir__<0?"Right":"")}),c},Ye.prototype[t+"Right"]=function(o){return this.reverse()[t](o).reverse()}}),Cr(["filter","map","takeWhile"],function(t,i){var o=i+1,c=o==m||o==Z;Ye.prototype[t]=function(f){var v=this.clone();return v.__iteratees__.push({iteratee:_e(f,3),type:o}),v.__filtered__=v.__filtered__||c,v}}),Cr(["head","last"],function(t,i){var o="take"+(i?"Right":"");Ye.prototype[t]=function(){return this[o](1).value()[0]}}),Cr(["initial","tail"],function(t,i){var o="drop"+(i?"":"Right");Ye.prototype[t]=function(){return this.__filtered__?new Ye(this):this[o](1)}}),Ye.prototype.compact=function(){return this.filter(pr)},Ye.prototype.find=function(t){return this.filter(t).head()},Ye.prototype.findLast=function(t){return this.reverse().find(t)},Ye.prototype.invokeMap=Ke(function(t,i){return typeof t=="function"?new Ye(this):this.map(function(o){return Yn(o,t,i)})}),Ye.prototype.reject=function(t){return this.filter(mo(_e(t)))},Ye.prototype.slice=function(t,i){t=$e(t);var o=this;return o.__filtered__&&(t>0||i<0)?new Ye(o):(t<0?o=o.takeRight(-t):t&&(o=o.drop(t)),i!==r&&(i=$e(i),o=i<0?o.dropRight(-i):o.take(i-t)),o)},Ye.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ye.prototype.toArray=function(){return this.take(re)},Jr(Ye.prototype,function(t,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),c=/^(?:head|last)$/.test(i),f=y[c?"take"+(i=="last"?"Right":""):i],v=c||/^find/.test(i);f&&(y.prototype[i]=function(){var D=this.__wrapped__,A=c?[1]:arguments,$=D instanceof Ye,W=A[0],Y=$||Ne(D),te=function(Ge){var Ze=f.apply(y,wi([Ge],A));return c&&ae?Ze[0]:Ze};Y&&o&&typeof W=="function"&&W.length!=1&&($=Y=!1);var ae=this.__chain__,pe=!!this.__actions__.length,be=v&&!ae,ze=$&&!pe;if(!v&&Y){D=ze?D:new Ye(this);var me=t.apply(D,A);return me.__actions__.push({func:yo,args:[te],thisArg:r}),new Pr(me,ae)}return be&&ze?t.apply(this,A):(me=this.thru(te),be?c?me.value()[0]:me.value():me)})}),Cr(["pop","push","shift","sort","splice","unshift"],function(t){var i=zs[t],o=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",c=/^(?:pop|shift)$/.test(t);y.prototype[t]=function(){var f=arguments;if(c&&!this.__chain__){var v=this.value();return i.apply(Ne(v)?v:[],f)}return this[o](function(D){return i.apply(Ne(D)?D:[],f)})}}),Jr(Ye.prototype,function(t,i){var o=y[i];if(o){var c=o.name+"";nt.call(vn,c)||(vn[c]=[]),vn[c].push({name:i,func:o})}}),vn[co(r,ie).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Dg,Ye.prototype.reverse=Sg,Ye.prototype.value=Ig,y.prototype.at=ey,y.prototype.chain=ty,y.prototype.commit=ry,y.prototype.next=iy,y.prototype.plant=sy,y.prototype.reverse=oy,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=ay,y.prototype.first=y.prototype.head,Hn&&(y.prototype[Hn]=ny),y},pn=rg();Pt?((Pt.exports=pn)._=pn,ct._=pn):Xe._=pn}).call(os)})(su,su.exports);var T5=Object.defineProperty,N5=Object.defineProperties,R5=Object.getOwnPropertyDescriptors,Gf=Object.getOwnPropertySymbols,F5=Object.prototype.hasOwnProperty,U5=Object.prototype.propertyIsEnumerable,Wf=(n,e,r)=>e in n?T5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,xo=(n,e)=>{for(var r in e||(e={}))F5.call(e,r)&&Wf(n,r,e[r]);if(Gf)for(var r of Gf(e))U5.call(e,r)&&Wf(n,r,e[r]);return n},M5=(n,e)=>N5(n,R5(e));function Lr(n,e,r){let s;const a=ou(n);return e.rpcMap&&(s=e.rpcMap[a]),s||(s=`${P5}?chainId=eip155:${a}&projectId=${r}`),s}function ou(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function L5(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function $5(n,e){const r=Object.keys(e.namespaces).filter(a=>a.includes(n));if(!r.length)return[];const s=[];return r.forEach(a=>{const l=e.namespaces[a].accounts;s.push(...l)}),s}function j5(n,e={}){const r=Yf(n),s=Yf(e);return su.exports.merge(r,s)}function Yf(n){var e,r,s,a;const l={};if(!An(n))return l;for(const[p,d]of Object.entries(n)){const g=qd(p)?[p]:d.chains,w=d.methods||[],S=d.events||[],N=d.rpcMap||{},z=Ao(p);l[z]=M5(xo(xo({},l[z]),d),{chains:Oc(g,(e=l[z])==null?void 0:e.chains),methods:Oc(w,(r=l[z])==null?void 0:r.methods),events:Oc(S,(s=l[z])==null?void 0:s.events),rpcMap:xo(xo({},N),(a=l[z])==null?void 0:a.rpcMap)})}return l}const Np={},Ft=n=>Np[n],Lc=(n,e)=>{Np[n]=e};class B5{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||Lr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Lr(e,this.namespace);return typeof s>"u"?void 0:new Fi(new rn(s,Ft("disableProviderPing")))}}class z5{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){const s=ou(e);if(!this.httpProviders[s]){const a=r||Lr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!a)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,a)}this.chainId=s,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const s=r||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ft("disableProviderPing")))}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const a=ou(r);e[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const a=parseInt(s,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:e.chainId}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class H5{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Lr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ft("disableProviderPing")))}}class q5{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Lr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ft("disableProviderPing")))}}class K5{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);e[r]=this.createHttpProvider(r,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Fi(new rn(s,Ft("disableProviderPing")))}}class k5{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Lr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ft("disableProviderPing")))}}class V5{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||Lr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||Lr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ft("disableProviderPing")))}}var G5=Object.defineProperty,W5=Object.defineProperties,Y5=Object.getOwnPropertyDescriptors,Jf=Object.getOwnPropertySymbols,J5=Object.prototype.hasOwnProperty,X5=Object.prototype.propertyIsEnumerable,Xf=(n,e,r)=>e in n?G5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Oo=(n,e)=>{for(var r in e||(e={}))J5.call(e,r)&&Xf(n,r,e[r]);if(Jf)for(var r of Jf(e))X5.call(e,r)&&Xf(n,r,e[r]);return n},$c=(n,e)=>W5(n,Y5(e));class $u{constructor(e){this.events=new hu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:e?.logger||kf})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new $u(e);return await r.initialize(),r}async request(e,r){const[s,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Oo({},e),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(e,r,s){this.request(e,s).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(l=>{this.session=l}).catch(l=>{if(l.message!==Tp)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{const[s,a]=this.validateChain(e);this.getProvider(s).setDefaultChain(a,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(vi(r)){for(const s of r)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Lu.init({logger:this.providerOpts.logger||kf,relayUrl:this.providerOpts.relayUrl||O5,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Ao(r)))];Lc("client",this.client),Lc("events",this.events),Lc("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const s=$5(r,this.session),a=L5(s),l=j5(this.namespaces,this.optionalNamespaces),p=$c(Oo({},l[r]),{accounts:s,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new z5({namespace:p});break;case"solana":this.rpcProviders[r]=new H5({namespace:p});break;case"cosmos":this.rpcProviders[r]=new q5({namespace:p});break;case"polkadot":this.rpcProviders[r]=new B5({namespace:p});break;case"cip34":this.rpcProviders[r]=new K5({namespace:p});break;case"elrond":this.rpcProviders[r]=new k5({namespace:p});break;case"multiversx":this.rpcProviders[r]=new V5({namespace:p});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var s;const{namespaces:a}=r,l=(s=this.client)==null?void 0:s.session.get(e);this.session=$c(Oo({},l),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",$c(Oo({},Rt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Ui.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:s,sessionProperties:a}=e;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(e){const[r,s]=e?.split(":")||["",""];if(r&&!Object.keys(this.namespaces).map(p=>Ao(p)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const a=Ao(Object.keys(this.namespaces)[0]),l=this.rpcProviders[a].getDefaultChain();return[a,l]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){var s;const[a,l]=this.validateChain(e);r||this.getProvider(a).setDefaultChain(l),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${Vf}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${Vf}/${e}`)}}const Z5=$u,Q5="wc",eS="ethereum_provider",tS=`${Q5}@2:${eS}:`,rS="https://rpc.walletconnect.com/v1/",au=["eth_sendTransaction","personal_sign"],lS=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],cu=["chainChanged","accountsChanged"],fS=["message","disconnect","connect"];var iS=Object.defineProperty,nS=Object.defineProperties,sS=Object.getOwnPropertyDescriptors,Zf=Object.getOwnPropertySymbols,oS=Object.prototype.hasOwnProperty,aS=Object.prototype.propertyIsEnumerable,Qf=(n,e,r)=>e in n?iS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,jc=(n,e)=>{for(var r in e||(e={}))oS.call(e,r)&&Qf(n,r,e[r]);if(Zf)for(var r of Zf(e))aS.call(e,r)&&Qf(n,r,e[r]);return n},ed=(n,e)=>nS(n,sS(e));function uu(n){return Number(n[0].split(":")[1])}function Bc(n){return`0x${n.toString(16)}`}function cS(n){const{chains:e,optionalChains:r,methods:s,optionalMethods:a,events:l,optionalEvents:p,rpcMap:d}=n;if(!vi(e))throw new Error("Invalid chains");const g=e,w=s||au,S=l||cu,N={[uu(g)]:d[uu(g)]},z={chains:g,methods:w,events:S,rpcMap:N},R=l?.filter(ie=>!cu.includes(ie)),P=s?.filter(ie=>!au.includes(ie));if(!r&&!p&&!a&&!(R!=null&&R.length)&&!(P!=null&&P.length))return{required:z};const G=R?.length&&P?.length||!r,q={chains:[...new Set(G?g.concat(r||[]):r)],methods:[...new Set(w.concat(a||[]))],events:[...new Set(S.concat(p||[]))],rpcMap:d};return{required:z,optional:q}}class ju{constructor(){this.events=new jr.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=tS,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new ju;return await r.initialize(e),r}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,r){this.signer.sendAsync(e,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=cS(this.rpc);try{const a=await new Promise(async(p,d)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(w=>{!w.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),d(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(ed(jc({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e?.pairingTopic})).then(w=>{p(w)}).catch(w=>{d(new Error(w.message))})});if(!a)return;this.setChainIds(this.rpc.chains);const l=iE(a.namespaces,[this.namespace]);this.setAccounts(l),this.events.emit("connect",{chainId:Bc(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",Bc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",ed(jc({},Rt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Bc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,s,a]=e.split(":");return{chainId:`${r}:${s}`,address:a}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,s;return{chains:((r=e.chains)==null?void 0:r.map(a=>this.formatChainId(a)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(a=>this.formatChainId(a)):void 0,methods:e?.methods||au,events:e?.events||cu,optionalMethods:e?.optionalMethods||[],optionalEvents:e?.optionalEvents||[],rpcMap:e?.rpcMap||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(s=e?.qrModalOptions)!=null?s:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const s={};return e.forEach(a=>{s[a]=this.getRpcUrl(a,r)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=uu(this.rpc.chains),this.signer=await Z5.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await db(()=>import("./index.5ffc3bba.js").then(function(a){return a.a}),["assets/index.5ffc3bba.js","assets/index.50f2c8db.js","assets/index.127880d5.css","assets/index.11f5e8c0.js"]);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(jc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:s,rpcMap:a}=e;r&&vi(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=a?.[l]||this.getRpcUrl(l)})),s&&vi(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(l=>this.formatChainId(l)),s.forEach(l=>{this.rpc.rpcMap[l]=a?.[l]||this.getRpcUrl(l)}))}getRpcUrl(e,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${rS}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r?.accounts),this.setAccounts(r?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const dS=ju;export{dS as EthereumProvider,fS as OPTIONAL_EVENTS,lS as OPTIONAL_METHODS,cu as REQUIRED_EVENTS,au as REQUIRED_METHODS,ju as default};
